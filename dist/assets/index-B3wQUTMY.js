import{r as u,j as e,P as Ee,c as os,a as $t,b as Ea,D as Cl,C as Tl,d as Pl,u as xt,A as El,e as Ae,f as Rl,$ as Al,S as _l,g as Ra,h as Ol,i as Aa,k as _a,l as Dl,m as Oa,n as Ll,o as Da,p as La,q as Ml,s as Fl,t as Ma,v as Il,w as Ul,R as kr,x as ct,y as Os,O as Fa,z as $l,B as Ia,E as Bl,T as Ua,F as $a,G as zl,H as ql,I as Ba,J as za,K as Vl,L as qa,M as Va,N as Ha,Q as Wa,U as Ga,V as Ka,W as Ja,X as Hl,Y as Wl,Z as Qa,_ as Ya,a0 as Gl,a1 as Kl,a2 as Jl,a3 as Ql}from"./ui-BXD_MuXQ.js";import{a as Yl,r as Xl}from"./vendor-DweBbekM.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var ps={},Rn;function Zl(){if(Rn)return ps;Rn=1;var t=Yl();return ps.createRoot=t.createRoot,ps.hydrateRoot=t.hydrateRoot,ps}var ec=Zl();const Xa=u.createContext(void 0),_t={isAuthenticated:()=>!!localStorage.getItem("token"),getCurrentUserFromSession:()=>{try{const t=sessionStorage.getItem("currentUser");return t?JSON.parse(t):null}catch{return null}},clearAuth:()=>{localStorage.removeItem("token"),sessionStorage.removeItem("currentUser")}},tc=({children:t})=>{const[s,r]=u.useState(null),[n,a]=u.useState(!0);u.useEffect(()=>{(async()=>{try{const d=localStorage.getItem("token");if(!d){const f=_t.getCurrentUserFromSession();f&&r(f),a(!1);return}const m=await fetch("http://localhost:5000/api/auth/me",{method:"GET",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(m.ok){const f=await m.json();if(f.status==="success"&&f.data?.user)r(f.data.user),sessionStorage.setItem("currentUser",JSON.stringify(f.data.user));else throw new Error("Invalid response format")}else if(m.status===401){_t.clearAuth();const f=_t.getCurrentUserFromSession();f&&r(f)}else throw new Error(`HTTP ${m.status}`)}catch{const m=_t.getCurrentUserFromSession();m?r(m):_t.clearAuth()}finally{a(!1)}})()},[]);const c={user:s,isLoading:n,isAuthenticated:!!s,login:async(h,d,m)=>{try{a(!0);const f=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h.trim().toLowerCase(),password:d,role:m})}),y=await f.json();return f.ok&&y.status==="success"&&y.data?.token&&y.data?.user?(localStorage.setItem("token",y.data.token),r(y.data.user),sessionStorage.setItem("currentUser",JSON.stringify(y.data.user)),!0):!1}catch{return!1}finally{a(!1)}},logout:async()=>{try{const h=localStorage.getItem("token");h&&await fetch("http://localhost:5000/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`}}).catch(d=>{})}catch{}finally{r(null),_t.clearAuth()}},updateUser:h=>{if(s){const d={...s,...h};r(d),sessionStorage.setItem("currentUser",JSON.stringify(d))}}};return e.jsx(Xa.Provider,{value:c,children:t})};var sc=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),rc="VisuallyHidden",Za=u.forwardRef((t,s)=>e.jsx(Ee.span,{...t,ref:s,style:{...sc,...t.style}}));Za.displayName=rc;var nc=Za,[Gs,ag]=os("Tooltip",[Ea]),Yr=Ea(),ei="TooltipProvider",ac=700,An="tooltip.open",[ic,ti]=Gs(ei),si=t=>{const{__scopeTooltip:s,delayDuration:r=ac,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=t,o=u.useRef(!0),l=u.useRef(!1),c=u.useRef(0);return u.useEffect(()=>{const h=c.current;return()=>window.clearTimeout(h)},[]),e.jsx(ic,{scope:s,isOpenDelayedRef:o,delayDuration:r,onOpen:u.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:u.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:u.useCallback(h=>{l.current=h},[]),disableHoverableContent:a,children:i})};si.displayName=ei;var ri="Tooltip",[ig,Ks]=Gs(ri),Cr="TooltipTrigger",oc=u.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=Ks(Cr,r),i=ti(Cr,r),o=Yr(r),l=u.useRef(null),c=xt(s,l,a.onTriggerChange),h=u.useRef(!1),d=u.useRef(!1),m=u.useCallback(()=>h.current=!1,[]);return u.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),e.jsx(El,{asChild:!0,...o,children:e.jsx(Ee.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:Ae(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ae(t.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Ae(t.onPointerDown,()=>{a.open&&a.onClose(),h.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Ae(t.onFocus,()=>{h.current||a.onOpen()}),onBlur:Ae(t.onBlur,a.onClose),onClick:Ae(t.onClick,a.onClose)})})});oc.displayName=Cr;var lc="TooltipPortal",[og,cc]=Gs(lc,{forceMount:void 0}),Lt="TooltipContent",ni=u.forwardRef((t,s)=>{const r=cc(Lt,t.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=t,o=Ks(Lt,t.__scopeTooltip);return e.jsx($t,{present:n||o.open,children:o.disableHoverableContent?e.jsx(ai,{side:a,...i,ref:s}):e.jsx(dc,{side:a,...i,ref:s})})}),dc=u.forwardRef((t,s)=>{const r=Ks(Lt,t.__scopeTooltip),n=ti(Lt,t.__scopeTooltip),a=u.useRef(null),i=xt(s,a),[o,l]=u.useState(null),{trigger:c,onClose:h}=r,d=a.current,{onPointerInTransitChange:m}=n,f=u.useCallback(()=>{l(null),m(!1)},[m]),y=u.useCallback((x,g)=>{const p=x.currentTarget,w={x:x.clientX,y:x.clientY},E=pc(w,p.getBoundingClientRect()),N=xc(w,E),T=gc(g.getBoundingClientRect()),L=jc([...N,...T]);l(L),m(!0)},[m]);return u.useEffect(()=>()=>f(),[f]),u.useEffect(()=>{if(c&&d){const x=p=>y(p,d),g=p=>y(p,c);return c.addEventListener("pointerleave",x),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",x),d.removeEventListener("pointerleave",g)}}},[c,d,y,f]),u.useEffect(()=>{if(o){const x=g=>{const p=g.target,w={x:g.clientX,y:g.clientY},E=c?.contains(p)||d?.contains(p),N=!yc(w,o);E?f():N&&(f(),h())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,d,o,h,f]),e.jsx(ai,{...t,ref:i})}),[uc,hc]=Gs(ri,{isInside:!1}),mc=Pl("TooltipContent"),ai=u.forwardRef((t,s)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=Ks(Lt,r),h=Yr(r),{onClose:d}=c;return u.useEffect(()=>(document.addEventListener(An,d),()=>document.removeEventListener(An,d)),[d]),u.useEffect(()=>{if(c.trigger){const m=f=>{f.target?.contains(c.trigger)&&d()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,d]),e.jsx(Cl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:d,children:e.jsxs(Tl,{"data-state":c.stateAttribute,...h,...l,ref:s,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(mc,{children:n}),e.jsx(uc,{scope:r,isInside:!0,children:e.jsx(nc,{id:c.contentId,role:"tooltip",children:a||n})})]})})});ni.displayName=Lt;var ii="TooltipArrow",fc=u.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=Yr(r);return hc(ii,r).isInside?null:e.jsx(Rl,{...a,...n,ref:s})});fc.displayName=ii;function pc(t,s){const r=Math.abs(s.top-t.y),n=Math.abs(s.bottom-t.y),a=Math.abs(s.right-t.x),i=Math.abs(s.left-t.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function xc(t,s,r=5){const n=[];switch(s){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function gc(t){const{top:s,right:r,bottom:n,left:a}=t;return[{x:a,y:s},{x:r,y:s},{x:r,y:n},{x:a,y:n}]}function yc(t,s){const{x:r,y:n}=t;let a=!1;for(let i=0,o=s.length-1;i<s.length;o=i++){const l=s[i],c=s[o],h=l.x,d=l.y,m=c.x,f=c.y;d>n!=f>n&&r<(m-h)*(n-d)/(f-d)+h&&(a=!a)}return a}function jc(t){const s=t.slice();return s.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),bc(s)}function bc(t){if(t.length<=1)return t.slice();const s=[];for(let n=0;n<t.length;n++){const a=t[n];for(;s.length>=2;){const i=s[s.length-1],o=s[s.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))s.pop();else break}s.push(a)}s.pop();const r=[];for(let n=t.length-1;n>=0;n--){const a=t[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),s.length===1&&r.length===1&&s[0].x===r[0].x&&s[0].y===r[0].y?s:s.concat(r)}var vc=si,oi=ni;function li(t){var s,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(r=li(t[s]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function ci(){for(var t,s,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(s=li(t))&&(n&&(n+=" "),n+=s);return n}function wc(){for(var t=0,s,r,n="";t<arguments.length;)(s=arguments[t++])&&(r=di(s))&&(n&&(n+=" "),n+=r);return n}function di(t){if(typeof t=="string")return t;for(var s,r="",n=0;n<t.length;n++)t[n]&&(s=di(t[n]))&&(r&&(r+=" "),r+=s);return r}var Xr="-";function Nc(t){var s=kc(t),r=t.conflictingClassGroups,n=t.conflictingClassGroupModifiers,a=n===void 0?{}:n;function i(l){var c=l.split(Xr);return c[0]===""&&c.length!==1&&c.shift(),ui(c,s)||Sc(l)}function o(l,c){var h=r[l]||[];return c&&a[l]?[].concat(h,a[l]):h}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function ui(t,s){if(t.length===0)return s.classGroupId;var r=t[0],n=s.nextPart.get(r),a=n?ui(t.slice(1),n):void 0;if(a)return a;if(s.validators.length!==0){var i=t.join(Xr);return s.validators.find(function(o){var l=o.validator;return l(i)})?.classGroupId}}var _n=/^\[(.+)\]$/;function Sc(t){if(_n.test(t)){var s=_n.exec(t)[1],r=s?.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}}function kc(t){var s=t.theme,r=t.prefix,n={nextPart:new Map,validators:[]},a=Tc(Object.entries(t.classGroups),r);return a.forEach(function(i){var o=i[0],l=i[1];Tr(l,n,o,s)}),n}function Tr(t,s,r,n){t.forEach(function(a){if(typeof a=="string"){var i=a===""?s:On(s,a);i.classGroupId=r;return}if(typeof a=="function"){if(Cc(a)){Tr(a(n),s,r,n);return}s.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(function(o){var l=o[0],c=o[1];Tr(c,On(s,l),r,n)})})}function On(t,s){var r=t;return s.split(Xr).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function Cc(t){return t.isThemeGetter}function Tc(t,s){return s?t.map(function(r){var n=r[0],a=r[1],i=a.map(function(o){return typeof o=="string"?s+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var c=l[0],h=l[1];return[s+c,h]})):o});return[n,i]}):t}function Pc(t){if(t<1)return{get:function(){},set:function(){}};var s=0,r=new Map,n=new Map;function a(i,o){r.set(i,o),s++,s>t&&(s=0,n=r,r=new Map)}return{get:function(o){var l=r.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return a(o,l),l},set:function(o,l){r.has(o)?r.set(o,l):a(o,l)}}}var hi="!";function Ec(t){var s=t.separator||":",r=s.length===1,n=s[0],a=s.length;return function(o){for(var l=[],c=0,h=0,d,m=0;m<o.length;m++){var f=o[m];if(c===0){if(f===n&&(r||o.slice(m,m+a)===s)){l.push(o.slice(h,m)),h=m+a;continue}if(f==="/"){d=m;continue}}f==="["?c++:f==="]"&&c--}var y=l.length===0?o:o.substring(h),x=y.startsWith(hi),g=x?y.substring(1):y,p=d&&d>h?d-h:void 0;return{modifiers:l,hasImportantModifier:x,baseClassName:g,maybePostfixModifierPosition:p}}}function Rc(t){if(t.length<=1)return t;var s=[],r=[];return t.forEach(function(n){var a=n[0]==="[";a?(s.push.apply(s,r.sort().concat([n])),r=[]):r.push(n)}),s.push.apply(s,r.sort()),s}function Ac(t){return{cache:Pc(t.cacheSize),splitModifiers:Ec(t),...Nc(t)}}var _c=/\s+/;function Oc(t,s){var r=s.splitModifiers,n=s.getClassGroupId,a=s.getConflictingClassGroupIds,i=new Set;return t.trim().split(_c).map(function(o){var l=r(o),c=l.modifiers,h=l.hasImportantModifier,d=l.baseClassName,m=l.maybePostfixModifierPosition,f=n(m?d.substring(0,m):d),y=!!m;if(!f){if(!m)return{isTailwindClass:!1,originalClassName:o};if(f=n(d),!f)return{isTailwindClass:!1,originalClassName:o};y=!1}var x=Rc(c).join(":"),g=h?x+hi:x;return{isTailwindClass:!0,modifierId:g,classGroupId:f,originalClassName:o,hasPostfixModifier:y}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,c=o.classGroupId,h=o.hasPostfixModifier,d=l+c;return i.has(d)?!1:(i.add(d),a(c,h).forEach(function(m){return i.add(l+m)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function Dc(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];var n,a,i,o=l;function l(h){var d=s[0],m=s.slice(1),f=m.reduce(function(y,x){return x(y)},d());return n=Ac(f),a=n.cache.get,i=n.cache.set,o=c,c(h)}function c(h){var d=a(h);if(d)return d;var m=Oc(h,n);return i(h,m),m}return function(){return o(wc.apply(null,arguments))}}function ce(t){var s=function(n){return n[t]||[]};return s.isThemeGetter=!0,s}var mi=/^\[(?:([a-z-]+):)?(.+)\]$/i,Lc=/^\d+\/\d+$/,Mc=new Set(["px","full","screen"]),Fc=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ic=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Uc=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function We(t){return yt(t)||Mc.has(t)||Lc.test(t)||Pr(t)}function Pr(t){return Tt(t,"length",Hc)}function $c(t){return Tt(t,"size",fi)}function Bc(t){return Tt(t,"position",fi)}function zc(t){return Tt(t,"url",Wc)}function xs(t){return Tt(t,"number",yt)}function yt(t){return!Number.isNaN(Number(t))}function qc(t){return t.endsWith("%")&&yt(t.slice(0,-1))}function Kt(t){return Dn(t)||Tt(t,"number",Dn)}function X(t){return mi.test(t)}function Jt(){return!0}function lt(t){return Fc.test(t)}function Vc(t){return Tt(t,"",Gc)}function Tt(t,s,r){var n=mi.exec(t);return n?n[1]?n[1]===s:r(n[2]):!1}function Hc(t){return Ic.test(t)}function fi(){return!1}function Wc(t){return t.startsWith("url(")}function Dn(t){return Number.isInteger(Number(t))}function Gc(t){return Uc.test(t)}function Kc(){var t=ce("colors"),s=ce("spacing"),r=ce("blur"),n=ce("brightness"),a=ce("borderColor"),i=ce("borderRadius"),o=ce("borderSpacing"),l=ce("borderWidth"),c=ce("contrast"),h=ce("grayscale"),d=ce("hueRotate"),m=ce("invert"),f=ce("gap"),y=ce("gradientColorStops"),x=ce("gradientColorStopPositions"),g=ce("inset"),p=ce("margin"),w=ce("opacity"),E=ce("padding"),N=ce("saturate"),T=ce("scale"),L=ce("sepia"),M=ce("skew"),C=ce("space"),z=ce("translate"),W=function(){return["auto","contain","none"]},K=function(){return["auto","hidden","clip","visible","scroll"]},A=function(){return["auto",X,s]},k=function(){return[X,s]},R=function(){return["",We]},Q=function(){return["auto",yt,X]},he=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},Y=function(){return["solid","dashed","dotted","double","none"]},Se=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},ne=function(){return["start","end","center","between","around","evenly","stretch"]},oe=function(){return["","0",X]},ye=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},D=function(){return[yt,xs]},S=function(){return[yt,X]};return{cacheSize:500,theme:{colors:[Jt],spacing:[We],blur:["none","",lt,X],brightness:D(),borderColor:[t],borderRadius:["none","","full",lt,X],borderSpacing:k(),borderWidth:R(),contrast:D(),grayscale:oe(),hueRotate:S(),invert:oe(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[qc,Pr],inset:A(),margin:A(),opacity:D(),padding:k(),saturate:D(),scale:D(),sepia:oe(),skew:S(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",X]}],container:["container"],columns:[{columns:[lt]}],"break-after":[{"break-after":ye()}],"break-before":[{"break-before":ye()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(he(),[X])}],overflow:[{overflow:K()}],"overflow-x":[{"overflow-x":K()}],"overflow-y":[{"overflow-y":K()}],overscroll:[{overscroll:W()}],"overscroll-x":[{"overscroll-x":W()}],"overscroll-y":[{"overscroll-y":W()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Kt]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",X]}],grow:[{grow:oe()}],shrink:[{shrink:oe()}],order:[{order:["first","last","none",Kt]}],"grid-cols":[{"grid-cols":[Jt]}],"col-start-end":[{col:["auto",{span:["full",Kt]},X]}],"col-start":[{"col-start":Q()}],"col-end":[{"col-end":Q()}],"grid-rows":[{"grid-rows":[Jt]}],"row-start-end":[{row:["auto",{span:[Kt]},X]}],"row-start":[{"row-start":Q()}],"row-end":[{"row-end":Q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",X]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",X]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(ne())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(ne(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(ne(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",X,s]}],"min-w":[{"min-w":["min","max","fit",X,We]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[lt]},lt,X]}],h:[{h:[X,s,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",X,We]}],"max-h":[{"max-h":[X,s,"min","max","fit"]}],"font-size":[{text:["base",lt,Pr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",xs]}],"font-family":[{font:[Jt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",X]}],"line-clamp":[{"line-clamp":["none",yt,xs]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",X,We]}],"list-image":[{"list-image":["none",X]}],"list-style-type":[{list:["none","disc","decimal",X]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(Y(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",We]}],"underline-offset":[{"underline-offset":["auto",X,We]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",X]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",X]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(he(),[Bc])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$c]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},zc]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[].concat(Y(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:Y()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:[""].concat(Y())}],"outline-offset":[{"outline-offset":[X,We]}],"outline-w":[{outline:[We]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[We]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",lt,Vc]}],"shadow-color":[{shadow:[Jt]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":Se()}],"bg-blend":[{"bg-blend":Se()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",lt,X]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[m]}],saturate:[{saturate:[N]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",X]}],duration:[{duration:S()}],ease:[{ease:["linear","in","out","in-out",X]}],delay:[{delay:S()}],animate:[{animate:["none","spin","ping","pulse","bounce",X]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[Kt,X]}],"translate-x":[{"translate-x":[z]}],"translate-y":[{"translate-y":[z]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",X]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",X]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",X]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[We,xs]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Jc=Dc(Kc);function U(...t){return Jc(ci(t))}const Qc=vc,Yc=u.forwardRef(({className:t,sideOffset:s=4,...r},n)=>e.jsx(oi,{ref:n,sideOffset:s,className:U("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));Yc.displayName=oi.displayName;var Js=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Qs=typeof window>"u"||"Deno"in globalThis;function Ke(){}function Xc(t,s){return typeof t=="function"?t(s):t}function Zc(t){return typeof t=="number"&&t>=0&&t!==1/0}function ed(t,s){return Math.max(t+(s||0)-Date.now(),0)}function Er(t,s){return typeof t=="function"?t(s):t}function td(t,s){return typeof t=="function"?t(s):t}function Ln(t,s){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=t;if(o){if(n){if(s.queryHash!==Zr(o,s.options))return!1}else if(!rs(s.queryKey,o))return!1}if(r!=="all"){const c=s.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&s.isStale()!==l||a&&a!==s.state.fetchStatus||i&&!i(s))}function Mn(t,s){const{exact:r,status:n,predicate:a,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(r){if(ss(s.options.mutationKey)!==ss(i))return!1}else if(!rs(s.options.mutationKey,i))return!1}return!(n&&s.state.status!==n||a&&!a(s))}function Zr(t,s){return(s?.queryKeyHashFn||ss)(t)}function ss(t){return JSON.stringify(t,(s,r)=>Rr(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function rs(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(r=>rs(t[r],s[r])):!1}function pi(t,s){if(t===s)return t;const r=Fn(t)&&Fn(s);if(r||Rr(t)&&Rr(s)){const n=r?t:Object.keys(t),a=n.length,i=r?s:Object.keys(s),o=i.length,l=r?[]:{},c=new Set(n);let h=0;for(let d=0;d<o;d++){const m=r?d:i[d];(!r&&c.has(m)||r)&&t[m]===void 0&&s[m]===void 0?(l[m]=void 0,h++):(l[m]=pi(t[m],s[m]),l[m]===t[m]&&t[m]!==void 0&&h++)}return a===o&&h===a?t:l}return s}function Fn(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Rr(t){if(!In(t))return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!In(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function In(t){return Object.prototype.toString.call(t)==="[object Object]"}function sd(t){return new Promise(s=>{setTimeout(s,t)})}function rd(t,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,s):r.structuralSharing!==!1?pi(t,s):s}function nd(t,s,r=0){const n=[...t,s];return r&&n.length>r?n.slice(1):n}function ad(t,s,r=0){const n=[s,...t];return r&&n.length>r?n.slice(0,-1):n}var en=Symbol();function xi(t,s){return!t.queryFn&&s?.initialPromise?()=>s.initialPromise:!t.queryFn||t.queryFn===en?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var id=class extends Js{#e;#t;#s;constructor(){super(),this.#s=t=>{if(!Qs&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},gi=new id,od=class extends Js{#e=!0;#t;#s;constructor(){super(),this.#s=t=>{if(!Qs&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#e}},Ds=new od;function ld(){let t,s;const r=new Promise((a,i)=>{t=a,s=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},r.reject=a=>{n({status:"rejected",reason:a}),s(a)},r}function cd(t){return Math.min(1e3*2**t,3e4)}function yi(t){return(t??"online")==="online"?Ds.isOnline():!0}var ji=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function mr(t){return t instanceof ji}function bi(t){let s=!1,r=0,n=!1,a;const i=ld(),o=g=>{n||(f(new ji(g)),t.abort?.())},l=()=>{s=!0},c=()=>{s=!1},h=()=>gi.isFocused()&&(t.networkMode==="always"||Ds.isOnline())&&t.canRun(),d=()=>yi(t.networkMode)&&t.canRun(),m=g=>{n||(n=!0,t.onSuccess?.(g),a?.(),i.resolve(g))},f=g=>{n||(n=!0,t.onError?.(g),a?.(),i.reject(g))},y=()=>new Promise(g=>{a=p=>{(n||h())&&g(p)},t.onPause?.()}).then(()=>{a=void 0,n||t.onContinue?.()}),x=()=>{if(n)return;let g;const p=r===0?t.initialPromise:void 0;try{g=p??t.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(m).catch(w=>{if(n)return;const E=t.retry??(Qs?0:3),N=t.retryDelay??cd,T=typeof N=="function"?N(r,w):N,L=E===!0||typeof E=="number"&&r<E||typeof E=="function"&&E(r,w);if(s||!L){f(w);return}r++,t.onFail?.(r,w),sd(T).then(()=>h()?void 0:y()).then(()=>{s?f(w):x()})})};return{promise:i,cancel:o,continue:()=>(a?.(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?x():y().then(x),i)}}var dd=t=>setTimeout(t,0);function ud(){let t=[],s=0,r=l=>{l()},n=l=>{l()},a=dd;const i=l=>{s?t.push(l):a(()=>{r(l)})},o=()=>{const l=t;t=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;s++;try{c=l()}finally{s--,s||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Me=ud(),vi=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Zc(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Qs?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},hd=class extends vi{#e;#t;#s;#n;#r;#i;#o;constructor(t){super(),this.#o=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.client,this.#s=this.#n.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=fd(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(t,s){const r=rd(this.state.data,t,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),r}setState(t,s){this.#a({type:"setState",state:t,setStateOptions:s})}cancel(t){const s=this.#r?.promise;return this.#r?.cancel(t),s?s.then(Ke).catch(Ke):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>td(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===en||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Er(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!ed(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}fetch(t,s){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(h=>h.options.queryFn);c&&this.setOptions(c.options)}const r=new AbortController,n=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},a=()=>{const c=xi(this.options,s),d=(()=>{const m={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(m),m})();return this.#o=!1,this.options.persister?this.options.persister(c,d,this):c(d)},o=(()=>{const c={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:a};return n(c),c})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#a({type:"fetch",meta:o.fetchOptions?.meta});const l=c=>{mr(c)&&c.silent||this.#a({type:"error",error:c}),mr(c)||(this.#s.config.onError?.(c,this),this.#s.config.onSettled?.(this.state.data,c,this)),this.scheduleGc()};return this.#r=bi({initialPromise:s?.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:c=>{if(c===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(h){l(h);return}this.#s.config.onSuccess?.(c,this),this.#s.config.onSettled?.(c,this.state.error,this),this.scheduleGc()},onError:l,onFail:(c,h)=>{this.#a({type:"failed",failureCount:c,error:h})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}),this.#r.start()}#a(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...md(r.data,this.options),fetchMeta:t.meta??null};case"success":return this.#t=void 0,{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return mr(n)&&n.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),Me.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:t})})}};function md(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:yi(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function fd(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,r=s!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var pd=class extends Js{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,s,r){const n=s.queryKey,a=s.queryHash??Zr(n,s);let i=this.get(a);return i||(i=new hd({client:t,queryKey:n,queryHash:a,options:t.defaultQueryOptions(s),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(i)),i}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=this.#e.get(t.queryHash);s&&(t.destroy(),s===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Me.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Ln(s,r))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(r=>Ln(t,r)):s}notify(t){Me.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){Me.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Me.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},xd=class extends vi{#e;#t;#s;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||gd(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(s=>s!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){const s=()=>{this.#n({type:"continue"})};this.#s=bi({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(a,i)=>{this.#n({type:"failed",failureCount:a,error:i})},onPause:()=>{this.#n({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const r=this.state.status==="pending",n=!this.#s.canStart();try{if(r)s();else{this.#n({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#n({type:"pending",context:i,variables:t,isPaused:n})}const a=await this.#s.start();return await this.#t.config.onSuccess?.(a,t,this.state.context,this),await this.options.onSuccess?.(a,t,this.state.context),await this.#t.config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,t,this.state.context),this.#n({type:"success",data:a}),a}catch(a){try{throw await this.#t.config.onError?.(a,t,this.state.context,this),await this.options.onError?.(a,t,this.state.context),await this.#t.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,a,t,this.state.context),a}finally{this.#n({type:"error",error:a})}}finally{this.#t.runNext(this)}}#n(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Me.batch(()=>{this.#e.forEach(r=>{r.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function gd(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yd=class extends Js{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(t,s,r){const n=new xd({mutationCache:this,mutationId:++this.#s,options:t.defaultMutationOptions(s),state:r});return this.add(n),n}add(t){this.#e.add(t);const s=gs(t);if(typeof s=="string"){const r=this.#t.get(s);r?r.push(t):this.#t.set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const s=gs(t);if(typeof s=="string"){const r=this.#t.get(s);if(r)if(r.length>1){const n=r.indexOf(t);n!==-1&&r.splice(n,1)}else r[0]===t&&this.#t.delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=gs(t);if(typeof s=="string"){const n=this.#t.get(s)?.find(a=>a.state.status==="pending");return!n||n===t}else return!0}runNext(t){const s=gs(t);return typeof s=="string"?this.#t.get(s)?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Me.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Mn(s,r))}findAll(t={}){return this.getAll().filter(s=>Mn(t,s))}notify(t){Me.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return Me.batch(()=>Promise.all(t.map(s=>s.continue().catch(Ke))))}};function gs(t){return t.options.scope?.id}function Un(t){return{onFetch:(s,r)=>{const n=s.options,a=s.fetchOptions?.meta?.fetchMore?.direction,i=s.state.data?.pages||[],o=s.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const h=async()=>{let d=!1;const m=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(s.signal.aborted?d=!0:s.signal.addEventListener("abort",()=>{d=!0}),s.signal)})},f=xi(s.options,s.fetchOptions),y=async(x,g,p)=>{if(d)return Promise.reject();if(g==null&&x.pages.length)return Promise.resolve(x);const E=(()=>{const M={client:s.client,queryKey:s.queryKey,pageParam:g,direction:p?"backward":"forward",meta:s.options.meta};return m(M),M})(),N=await f(E),{maxPages:T}=s.options,L=p?ad:nd;return{pages:L(x.pages,N,T),pageParams:L(x.pageParams,g,T)}};if(a&&i.length){const x=a==="backward",g=x?jd:$n,p={pages:i,pageParams:o},w=g(n,p);l=await y(p,w,x)}else{const x=t??i.length;do{const g=c===0?o[0]??n.initialPageParam:$n(n,l);if(c>0&&g==null)break;l=await y(l,g),c++}while(c<x)}return l};s.options.persister?s.fetchFn=()=>s.options.persister?.(h,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r):s.fetchFn=h}}}function $n(t,{pages:s,pageParams:r}){const n=s.length-1;return s.length>0?t.getNextPageParam(s[n],s,r[n],r):void 0}function jd(t,{pages:s,pageParams:r}){return s.length>0?t.getPreviousPageParam?.(s[0],s,r[0],r):void 0}var bd=class{#e;#t;#s;#n;#r;#i;#o;#a;constructor(t={}){this.#e=t.queryCache||new pd,this.#t=t.mutationCache||new yd,this.#s=t.defaultOptions||{},this.#n=new Map,this.#r=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=gi.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Ds.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),r=this.#e.build(this,s),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Er(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(n))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:s,state:r})=>{const n=r.data;return[s,n]})}setQueryData(t,s,r){const n=this.defaultQueryOptions({queryKey:t}),i=this.#e.get(n.queryHash)?.state.data,o=Xc(s,i);if(o!==void 0)return this.#e.build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,s,r){return Me.batch(()=>this.#e.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,s,r)]))}getQueryState(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state}removeQueries(t){const s=this.#e;Me.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=this.#e;return Me.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const r={revert:!0,...s},n=Me.batch(()=>this.#e.findAll(t).map(a=>a.cancel(r)));return Promise.all(n).then(Ke).catch(Ke)}invalidateQueries(t,s={}){return Me.batch(()=>(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},s)))}refetchQueries(t,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},n=Me.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Ke)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Ke)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=this.#e.build(this,s);return r.isStaleByTime(Er(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ke).catch(Ke)}fetchInfiniteQuery(t){return t.behavior=Un(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ke).catch(Ke)}ensureInfiniteQueryData(t){return t.behavior=Un(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ds.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(t){this.#s=t}setQueryDefaults(t,s){this.#n.set(ss(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...this.#n.values()],r={};return s.forEach(n=>{rs(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,s){this.#r.set(ss(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...this.#r.values()],r={};return s.forEach(n=>{rs(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...this.#s.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=Zr(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===en&&(s.enabled=!1),s}defaultMutationOptions(t){return t?._defaulted?t:{...this.#s.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},vd=u.createContext(void 0),wd=({client:t,children:s})=>(u.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(vd.Provider,{value:t,children:s}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ns(){return ns=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ns.apply(this,arguments)}var ut;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ut||(ut={}));const Bn="popstate";function Nd(t){t===void 0&&(t={});function s(n,a){let{pathname:i,search:o,hash:l}=n.location;return Ar("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Ni(a)}return kd(s,r,null,t)}function ve(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function wi(t,s){if(!t)try{throw new Error(s)}catch{}}function Sd(){return Math.random().toString(36).substr(2,8)}function zn(t,s){return{usr:t.state,key:t.key,idx:s}}function Ar(t,s,r,n){return r===void 0&&(r=null),ns({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?Bt(s):s,{state:r,key:s&&s.key||n||Sd()})}function Ni(t){let{pathname:s="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Bt(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(s.search=t.substr(n),t=t.substr(0,n)),t&&(s.pathname=t)}return s}function kd(t,s,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=ut.Pop,c=null,h=d();h==null&&(h=0,o.replaceState(ns({},o.state,{idx:h}),""));function d(){return(o.state||{idx:null}).idx}function m(){l=ut.Pop;let p=d(),w=p==null?null:p-h;h=p,c&&c({action:l,location:g.location,delta:w})}function f(p,w){l=ut.Push;let E=Ar(g.location,p,w);h=d()+1;let N=zn(E,h),T=g.createHref(E);try{o.pushState(N,"",T)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;a.location.assign(T)}i&&c&&c({action:l,location:g.location,delta:1})}function y(p,w){l=ut.Replace;let E=Ar(g.location,p,w);h=d();let N=zn(E,h),T=g.createHref(E);o.replaceState(N,"",T),i&&c&&c({action:l,location:g.location,delta:0})}function x(p){let w=a.location.origin!=="null"?a.location.origin:a.location.href,E=typeof p=="string"?p:Ni(p);return E=E.replace(/ $/,"%20"),ve(w,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,w)}let g={get action(){return l},get location(){return t(a,o)},listen(p){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Bn,m),c=p,()=>{a.removeEventListener(Bn,m),c=null}},createHref(p){return s(a,p)},createURL:x,encodeLocation(p){let w=x(p);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:y,go(p){return o.go(p)}};return g}var qn;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(qn||(qn={}));function Cd(t,s,r){return r===void 0&&(r="/"),Td(t,s,r)}function Td(t,s,r,n){let a=typeof s=="string"?Bt(s):s,i=Ci(a.pathname||"/",r);if(i==null)return null;let o=Si(t);Pd(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let h=$d(i);l=Fd(o[c],h)}return l}function Si(t,s,r,n){s===void 0&&(s=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ve(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let h=vt([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(ve(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Si(i.children,s,d,h)),!(i.path==null&&!i.index)&&s.push({path:h,score:Ld(h,i.index),routesMeta:d})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of ki(i.path))a(i,o,c)}),s}function ki(t){let s=t.split("/");if(s.length===0)return[];let[r,...n]=s,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=ki(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Pd(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:Md(s.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Ed=/^:[\w-]+$/,Rd=3,Ad=2,_d=1,Od=10,Dd=-2,Vn=t=>t==="*";function Ld(t,s){let r=t.split("/"),n=r.length;return r.some(Vn)&&(n+=Dd),s&&(n+=Ad),r.filter(a=>!Vn(a)).reduce((a,i)=>a+(Ed.test(i)?Rd:i===""?_d:Od),n)}function Md(t,s){return t.length===s.length&&t.slice(0,-1).every((n,a)=>n===s[a])?t[t.length-1]-s[s.length-1]:0}function Fd(t,s,r){let{routesMeta:n}=t,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],h=l===n.length-1,d=i==="/"?s:s.slice(i.length)||"/",m=Id({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},d),f=c.route;if(!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:vt([i,m.pathname]),pathnameBase:Vd(vt([i,m.pathnameBase])),route:f}),m.pathnameBase!=="/"&&(i=vt([i,m.pathnameBase]))}return o}function Id(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Ud(t.path,t.caseSensitive,t.end),a=s.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((h,d,m)=>{let{paramName:f,isOptional:y}=d;if(f==="*"){let g=l[m]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const x=l[m];return y&&!x?h[f]=void 0:h[f]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:t}}function Ud(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),wi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),n]}function $d(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return wi(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function Ci(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function Bd(t,s){s===void 0&&(s="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Bt(t):t;return{pathname:r?r.startsWith("/")?r:zd(r,s):s,search:Hd(n),hash:Wd(a)}}function zd(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function fr(t,s,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qd(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function Ti(t,s){let r=qd(t);return s?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Pi(t,s,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=Bt(t):(a=ns({},t),ve(!a.pathname||!a.pathname.includes("?"),fr("?","pathname","search",a)),ve(!a.pathname||!a.pathname.includes("#"),fr("#","pathname","hash",a)),ve(!a.search||!a.search.includes("#"),fr("#","search","hash",a)));let i=t===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let m=s.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),m-=1;a.pathname=f.join("/")}l=m>=0?s[m]:"/"}let c=Bd(a,l),h=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(h||d)&&(c.pathname+="/"),c}const vt=t=>t.join("/").replace(/\/\/+/g,"/"),Vd=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Hd=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Wd=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Gd(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ei=["post","put","patch","delete"];new Set(Ei);const Kd=["get",...Ei];new Set(Kd);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function as(){return as=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},as.apply(this,arguments)}const tn=u.createContext(null),Jd=u.createContext(null),ls=u.createContext(null),Ys=u.createContext(null),Pt=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Ri=u.createContext(null);function cs(){return u.useContext(Ys)!=null}function zt(){return cs()||ve(!1),u.useContext(Ys).location}function Ai(t){u.useContext(ls).static||u.useLayoutEffect(t)}function sn(){let{isDataRoute:t}=u.useContext(Pt);return t?lu():Qd()}function Qd(){cs()||ve(!1);let t=u.useContext(tn),{basename:s,future:r,navigator:n}=u.useContext(ls),{matches:a}=u.useContext(Pt),{pathname:i}=zt(),o=JSON.stringify(Ti(a,r.v7_relativeSplatPath)),l=u.useRef(!1);return Ai(()=>{l.current=!0}),u.useCallback(function(h,d){if(d===void 0&&(d={}),!l.current)return;if(typeof h=="number"){n.go(h);return}let m=Pi(h,JSON.parse(o),i,d.relative==="path");t==null&&s!=="/"&&(m.pathname=m.pathname==="/"?s:vt([s,m.pathname])),(d.replace?n.replace:n.push)(m,d.state,d)},[s,n,o,i,t])}function Yd(t,s){return Xd(t,s)}function Xd(t,s,r,n){cs()||ve(!1);let{navigator:a}=u.useContext(ls),{matches:i}=u.useContext(Pt),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=zt(),d;if(s){var m;let p=typeof s=="string"?Bt(s):s;c==="/"||(m=p.pathname)!=null&&m.startsWith(c)||ve(!1),d=p}else d=h;let f=d.pathname||"/",y=f;if(c!=="/"){let p=c.replace(/^\//,"").split("/");y="/"+f.replace(/^\//,"").split("/").slice(p.length).join("/")}let x=Cd(t,{pathname:y}),g=ru(x&&x.map(p=>Object.assign({},p,{params:Object.assign({},l,p.params),pathname:vt([c,a.encodeLocation?a.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?c:vt([c,a.encodeLocation?a.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),i,r,n);return s&&g?u.createElement(Ys.Provider,{value:{location:as({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ut.Pop}},g):g}function Zd(){let t=ou(),s=Gd(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},s),r?u.createElement("pre",{style:a},r):null,null)}const eu=u.createElement(Zd,null);class tu extends u.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){}render(){return this.state.error!==void 0?u.createElement(Pt.Provider,{value:this.props.routeContext},u.createElement(Ri.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function su(t){let{routeContext:s,match:r,children:n}=t,a=u.useContext(tn);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),u.createElement(Pt.Provider,{value:s},n)}function ru(t,s,r,n){var a;if(s===void 0&&(s=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);d>=0||ve(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,h=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let m=o[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=d),m.route.id){let{loaderData:f,errors:y}=r,x=m.route.loader&&f[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||x){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((d,m,f)=>{let y,x=!1,g=null,p=null;r&&(y=l&&m.route.id?l[m.route.id]:void 0,g=m.route.errorElement||eu,c&&(h<0&&f===0?(cu("route-fallback"),x=!0,p=null):h===f&&(x=!0,p=m.route.hydrateFallbackElement||null)));let w=s.concat(o.slice(0,f+1)),E=()=>{let N;return y?N=g:x?N=p:m.route.Component?N=u.createElement(m.route.Component,null):m.route.element?N=m.route.element:N=d,u.createElement(su,{match:m,routeContext:{outlet:d,matches:w,isDataRoute:r!=null},children:N})};return r&&(m.route.ErrorBoundary||m.route.errorElement||f===0)?u.createElement(tu,{location:r.location,revalidation:r.revalidation,component:g,error:y,children:E(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):E()},null)}var _i=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(_i||{}),Oi=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Oi||{});function nu(t){let s=u.useContext(tn);return s||ve(!1),s}function au(t){let s=u.useContext(Jd);return s||ve(!1),s}function iu(t){let s=u.useContext(Pt);return s||ve(!1),s}function Di(t){let s=iu(),r=s.matches[s.matches.length-1];return r.route.id||ve(!1),r.route.id}function ou(){var t;let s=u.useContext(Ri),r=au(),n=Di();return s!==void 0?s:(t=r.errors)==null?void 0:t[n]}function lu(){let{router:t}=nu(_i.UseNavigateStable),s=Di(Oi.UseNavigateStable),r=u.useRef(!1);return Ai(()=>{r.current=!0}),u.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,as({fromRouteId:s},i)))},[t,s])}const Hn={};function cu(t,s,r){Hn[t]||(Hn[t]=!0)}function du(t,s){t?.v7_startTransition,t?.v7_relativeSplatPath}function _r(t){let{to:s,replace:r,state:n,relative:a}=t;cs()||ve(!1);let{future:i,static:o}=u.useContext(ls),{matches:l}=u.useContext(Pt),{pathname:c}=zt(),h=sn(),d=Pi(s,Ti(l,i.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(d);return u.useEffect(()=>h(JSON.parse(m),{replace:r,state:n,relative:a}),[h,m,a,r,n]),null}function Re(t){ve(!1)}function uu(t){let{basename:s="/",children:r=null,location:n,navigationType:a=ut.Pop,navigator:i,static:o=!1,future:l}=t;cs()&&ve(!1);let c=s.replace(/^\/*/,"/"),h=u.useMemo(()=>({basename:c,navigator:i,static:o,future:as({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Bt(n));let{pathname:d="/",search:m="",hash:f="",state:y=null,key:x="default"}=n,g=u.useMemo(()=>{let p=Ci(d,c);return p==null?null:{location:{pathname:p,search:m,hash:f,state:y,key:x},navigationType:a}},[c,d,m,f,y,x,a]);return g==null?null:u.createElement(ls.Provider,{value:h},u.createElement(Ys.Provider,{children:r,value:g}))}function hu(t){let{children:s,location:r}=t;return Yd(Or(s),r)}new Promise(()=>{});function Or(t,s){s===void 0&&(s=[]);let r=[];return u.Children.forEach(t,(n,a)=>{if(!u.isValidElement(n))return;let i=[...s,a];if(n.type===u.Fragment){r.push.apply(r,Or(n.props.children,i));return}n.type!==Re&&ve(!1),!n.props.index||!n.props.children||ve(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Or(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const mu="6";try{window.__reactRouterVersion=mu}catch{}const fu="startTransition",Wn=Al[fu];function pu(t){let{basename:s,children:r,future:n,window:a}=t,i=u.useRef();i.current==null&&(i.current=Nd({window:a,v5Compat:!0}));let o=i.current,[l,c]=u.useState({action:o.action,location:o.location}),{v7_startTransition:h}=n||{},d=u.useCallback(m=>{h&&Wn?Wn(()=>c(m)):c(m)},[c,h]);return u.useLayoutEffect(()=>o.listen(d),[o,d]),u.useEffect(()=>du(n),[n]),u.createElement(uu,{basename:s,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}var Gn;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Gn||(Gn={}));var Kn;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Kn||(Kn={}));const xu=u.createContext(void 0),gu=({children:t})=>{const[s,r]=u.useState([]),n=u.useCallback(d=>{const m={id:Date.now().toString()+Math.random().toString(36).substr(2,9),timestamp:new Date,read:!1,...d};r(f=>[m,...f]),d.priority==="low"&&setTimeout(()=>{r(f=>f.filter(y=>y.id!==m.id))},1e4)},[]),a=u.useCallback(d=>{r(m=>m.map(f=>f.id===d?{...f,read:!0}:f))},[]),i=u.useCallback(()=>{r(d=>d.map(m=>({...m,read:!0})))},[]),o=u.useCallback(d=>{r(m=>m.filter(f=>f.id!==d))},[]),l=u.useCallback(()=>{r([])},[]),c=s.filter(d=>!d.read).length,h={notifications:s,unreadCount:c,addNotification:n,markAsRead:a,markAllAsRead:i,removeNotification:o,clearAll:l};return e.jsx(xu.Provider,{value:h,children:t})},Xe=Object.create(null);Xe.open="0";Xe.close="1";Xe.ping="2";Xe.pong="3";Xe.message="4";Xe.upgrade="5";Xe.noop="6";const ws=Object.create(null);Object.keys(Xe).forEach(t=>{ws[Xe[t]]=t});const Dr={type:"error",data:"parser error"},Li=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Mi=typeof ArrayBuffer=="function",Fi=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,rn=({type:t,data:s},r,n)=>Li&&s instanceof Blob?r?n(s):Jn(s,n):Mi&&(s instanceof ArrayBuffer||Fi(s))?r?n(s):Jn(new Blob([s]),n):n(Xe[t]+(s||"")),Jn=(t,s)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];s("b"+(n||""))},r.readAsDataURL(t)};function Qn(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let pr;function yu(t,s){if(Li&&t.data instanceof Blob)return t.data.arrayBuffer().then(Qn).then(s);if(Mi&&(t.data instanceof ArrayBuffer||Fi(t.data)))return s(Qn(t.data));rn(t,!1,r=>{pr||(pr=new TextEncoder),s(pr.encode(r))})}const Yn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",es=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Yn.length;t++)es[Yn.charCodeAt(t)]=t;const ju=t=>{let s=t.length*.75,r=t.length,n,a=0,i,o,l,c;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);const h=new ArrayBuffer(s),d=new Uint8Array(h);for(n=0;n<r;n+=4)i=es[t.charCodeAt(n)],o=es[t.charCodeAt(n+1)],l=es[t.charCodeAt(n+2)],c=es[t.charCodeAt(n+3)],d[a++]=i<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return h},bu=typeof ArrayBuffer=="function",nn=(t,s)=>{if(typeof t!="string")return{type:"message",data:Ii(t,s)};const r=t.charAt(0);return r==="b"?{type:"message",data:vu(t.substring(1),s)}:ws[r]?t.length>1?{type:ws[r],data:t.substring(1)}:{type:ws[r]}:Dr},vu=(t,s)=>{if(bu){const r=ju(t);return Ii(r,s)}else return{base64:!0,data:t}},Ii=(t,s)=>{switch(s){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Ui="",wu=(t,s)=>{const r=t.length,n=new Array(r);let a=0;t.forEach((i,o)=>{rn(i,!1,l=>{n[o]=l,++a===r&&s(n.join(Ui))})})},Nu=(t,s)=>{const r=t.split(Ui),n=[];for(let a=0;a<r.length;a++){const i=nn(r[a],s);if(n.push(i),i.type==="error")break}return n};function Su(){return new TransformStream({transform(t,s){yu(t,r=>{const n=r.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(a[0]|=128),s.enqueue(a),s.enqueue(r)})}})}let xr;function ys(t){return t.reduce((s,r)=>s+r.length,0)}function js(t,s){if(t[0].length===s)return t.shift();const r=new Uint8Array(s);let n=0;for(let a=0;a<s;a++)r[a]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),r}function ku(t,s){xr||(xr=new TextDecoder);const r=[];let n=0,a=-1,i=!1;return new TransformStream({transform(o,l){for(r.push(o);;){if(n===0){if(ys(r)<1)break;const c=js(r,1);i=(c[0]&128)===128,a=c[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(ys(r)<2)break;const c=js(r,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(ys(r)<8)break;const c=js(r,8),h=new DataView(c.buffer,c.byteOffset,c.length),d=h.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(Dr);break}a=d*Math.pow(2,32)+h.getUint32(4),n=3}else{if(ys(r)<a)break;const c=js(r,a);l.enqueue(nn(i?c:xr.decode(c),s)),n=0}if(a===0||a>t){l.enqueue(Dr);break}}}})}const $i=4;function je(t){if(t)return Cu(t)}function Cu(t){for(var s in je.prototype)t[s]=je.prototype[s];return t}je.prototype.on=je.prototype.addEventListener=function(t,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(s),this};je.prototype.once=function(t,s){function r(){this.off(t,r),s.apply(this,arguments)}return r.fn=s,this.on(t,r),this};je.prototype.off=je.prototype.removeListener=je.prototype.removeAllListeners=je.prototype.removeEventListener=function(t,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,a=0;a<r.length;a++)if(n=r[a],n===s||n.fn===s){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+t],this};je.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)s[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,a=r.length;n<a;++n)r[n].apply(this,s)}return this};je.prototype.emitReserved=je.prototype.emit;je.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};je.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Xs=typeof Promise=="function"&&typeof Promise.resolve=="function"?s=>Promise.resolve().then(s):(s,r)=>r(s,0),ze=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Tu="arraybuffer";function Bi(t,...s){return s.reduce((r,n)=>(t.hasOwnProperty(n)&&(r[n]=t[n]),r),{})}const Pu=ze.setTimeout,Eu=ze.clearTimeout;function Zs(t,s){s.useNativeTimers?(t.setTimeoutFn=Pu.bind(ze),t.clearTimeoutFn=Eu.bind(ze)):(t.setTimeoutFn=ze.setTimeout.bind(ze),t.clearTimeoutFn=ze.clearTimeout.bind(ze))}const Ru=1.33;function Au(t){return typeof t=="string"?_u(t):Math.ceil((t.byteLength||t.size)*Ru)}function _u(t){let s=0,r=0;for(let n=0,a=t.length;n<a;n++)s=t.charCodeAt(n),s<128?r+=1:s<2048?r+=2:s<55296||s>=57344?r+=3:(n++,r+=4);return r}function zi(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ou(t){let s="";for(let r in t)t.hasOwnProperty(r)&&(s.length&&(s+="&"),s+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return s}function Du(t){let s={},r=t.split("&");for(let n=0,a=r.length;n<a;n++){let i=r[n].split("=");s[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return s}class Lu extends Error{constructor(s,r,n){super(s),this.description=r,this.context=n,this.type="TransportError"}}class an extends je{constructor(s){super(),this.writable=!1,Zs(this,s),this.opts=s,this.query=s.query,this.socket=s.socket,this.supportsBinary=!s.forceBase64}onError(s,r,n){return super.emitReserved("error",new Lu(s,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(s){this.readyState==="open"&&this.write(s)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(s){const r=nn(s,this.socket.binaryType);this.onPacket(r)}onPacket(s){super.emitReserved("packet",s)}onClose(s){this.readyState="closed",super.emitReserved("close",s)}pause(s){}createUri(s,r={}){return s+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const s=this.opts.hostname;return s.indexOf(":")===-1?s:"["+s+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(s){const r=Ou(s);return r.length?"?"+r:""}}class Mu extends an{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(s){this.readyState="pausing";const r=()=>{this.readyState="paused",s()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(s){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Nu(s,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const s=()=>{this.write([{type:"close"}])};this.readyState==="open"?s():this.once("open",s)}write(s){this.writable=!1,wu(s,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const s=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=zi()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(s,r)}}let qi=!1;try{qi=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Fu=qi;function Iu(){}class Uu extends Mu{constructor(s){if(super(s),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&s.hostname!==location.hostname||n!==s.port}}doWrite(s,r){const n=this.request({method:"POST",data:s});n.on("success",r),n.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const s=this.request();s.on("data",this.onData.bind(this)),s.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=s}}let Ot=class Ns extends je{constructor(s,r,n){super(),this.createRequest=s,Zs(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var s;const r=Bi(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(s=this._opts.cookieJar)===null||s===void 0||s.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Ns.requestsCount++,Ns.requests[this._index]=this)}_onError(s){this.emitReserved("error",s,this._xhr),this._cleanup(!0)}_cleanup(s){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Iu,s)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ns.requests[this._index],this._xhr=null}}_onLoad(){const s=this._xhr.responseText;s!==null&&(this.emitReserved("data",s),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Ot.requestsCount=0;Ot.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Xn);else if(typeof addEventListener=="function"){const t="onpagehide"in ze?"pagehide":"unload";addEventListener(t,Xn,!1)}}function Xn(){for(let t in Ot.requests)Ot.requests.hasOwnProperty(t)&&Ot.requests[t].abort()}const $u=function(){const t=Vi({xdomain:!1});return t&&t.responseType!==null}();class Bu extends Uu{constructor(s){super(s);const r=s&&s.forceBase64;this.supportsBinary=$u&&!r}request(s={}){return Object.assign(s,{xd:this.xd},this.opts),new Ot(Vi,this.uri(),s)}}function Vi(t){const s=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!s||Fu))return new XMLHttpRequest}catch{}if(!s)try{return new ze[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Hi=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class zu extends an{get name(){return"websocket"}doOpen(){const s=this.uri(),r=this.opts.protocols,n=Hi?{}:Bi(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(s,r,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=s=>this.onClose({description:"websocket connection closed",context:s}),this.ws.onmessage=s=>this.onData(s.data),this.ws.onerror=s=>this.onError("websocket error",s)}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const n=s[r],a=r===s.length-1;rn(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}a&&Xs(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const s=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=zi()),this.supportsBinary||(r.b64=1),this.createUri(s,r)}}const gr=ze.WebSocket||ze.MozWebSocket;class qu extends zu{createSocket(s,r,n){return Hi?new gr(s,r,n):r?new gr(s,r):new gr(s)}doWrite(s,r){this.ws.send(r)}}class Vu extends an{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(s){return this.emitReserved("error",s)}this._transport.closed.then(()=>{this.onClose()}).catch(s=>{this.onError("webtransport error",s)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(s=>{const r=ku(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=s.readable.pipeThrough(r).getReader(),a=Su();a.readable.pipeTo(s.writable),this._writer=a.writable.getWriter();const i=()=>{n.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const n=s[r],a=r===s.length-1;this._writer.write(n).then(()=>{a&&Xs(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var s;(s=this._transport)===null||s===void 0||s.close()}}const Hu={websocket:qu,webtransport:Vu,polling:Bu},Wu=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Gu=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Lr(t){if(t.length>8e3)throw"URI too long";const s=t,r=t.indexOf("["),n=t.indexOf("]");r!=-1&&n!=-1&&(t=t.substring(0,r)+t.substring(r,n).replace(/:/g,";")+t.substring(n,t.length));let a=Wu.exec(t||""),i={},o=14;for(;o--;)i[Gu[o]]=a[o]||"";return r!=-1&&n!=-1&&(i.source=s,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Ku(i,i.path),i.queryKey=Ju(i,i.query),i}function Ku(t,s){const r=/\/{2,9}/g,n=s.replace(r,"/").split("/");return(s.slice(0,1)=="/"||s.length===0)&&n.splice(0,1),s.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Ju(t,s){const r={};return s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,i){a&&(r[a]=i)}),r}const Mr=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ss=[];Mr&&addEventListener("offline",()=>{Ss.forEach(t=>t())},!1);class ht extends je{constructor(s,r){if(super(),this.binaryType=Tu,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,s&&typeof s=="object"&&(r=s,s=null),s){const n=Lr(s);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=Lr(r.host).host);Zs(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Du(this.opts.query)),Mr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ss.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(s){const r=Object.assign({},this.opts.query);r.EIO=$i,r.transport=s,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[s]);return new this._transportsByName[s](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const s=this.opts.rememberUpgrade&&ht.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(s);r.open(),this.setTransport(r)}setTransport(s){this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",ht.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",s),this.emitReserved("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=s.data,this._onError(r);break;case"message":this.emitReserved("data",s.data),this.emitReserved("message",s.data);break}}onHandshake(s){this.emitReserved("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this._pingInterval=s.pingInterval,this._pingTimeout=s.pingTimeout,this._maxPayload=s.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const s=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+s,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},s),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const s=this._getWritablePackets();this.transport.send(s),this._prevBufferLen=s.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(r+=Au(a)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const s=Date.now()>this._pingTimeoutTime;return s&&(this._pingTimeoutTime=0,Xs(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),s}write(s,r,n){return this._sendPacket("message",s,r,n),this}send(s,r,n){return this._sendPacket("message",s,r,n),this}_sendPacket(s,r,n,a){if(typeof r=="function"&&(a=r,r=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:s,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const s=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),s()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():s()}):this.upgrading?n():s()),this}_onError(s){if(ht.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",s),this._onClose("transport error",s)}_onClose(s,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Mr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Ss.indexOf(this._offlineEventListener);n!==-1&&Ss.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",s,r),this.writeBuffer=[],this._prevBufferLen=0}}}ht.protocol=$i;class Qu extends ht{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let s=0;s<this._upgrades.length;s++)this._probe(this._upgrades[s])}_probe(s){let r=this.createTransport(s),n=!1;ht.priorWebsocketSuccess=!1;const a=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",m=>{if(!n)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;ht.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(d(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=r.name,this.emitReserved("upgradeError",f)}}))};function i(){n||(n=!0,d(),r.close(),r=null)}const o=m=>{const f=new Error("probe error: "+m);f.transport=r.name,i(),this.emitReserved("upgradeError",f)};function l(){o("transport closed")}function c(){o("socket closed")}function h(m){r&&m.name!==r.name&&i()}const d=()=>{r.removeListener("open",a),r.removeListener("error",o),r.removeListener("close",l),this.off("close",c),this.off("upgrading",h)};r.once("open",a),r.once("error",o),r.once("close",l),this.once("close",c),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&s!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(s){this._upgrades=this._filterUpgrades(s.upgrades),super.onHandshake(s)}_filterUpgrades(s){const r=[];for(let n=0;n<s.length;n++)~this.transports.indexOf(s[n])&&r.push(s[n]);return r}}let Yu=class extends Qu{constructor(s,r={}){const n=typeof s=="object"?s:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>Hu[a]).filter(a=>!!a)),super(s,n)}};function Xu(t,s="",r){let n=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),n=Lr(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+s,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const Zu=typeof ArrayBuffer=="function",eh=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Wi=Object.prototype.toString,th=typeof Blob=="function"||typeof Blob<"u"&&Wi.call(Blob)==="[object BlobConstructor]",sh=typeof File=="function"||typeof File<"u"&&Wi.call(File)==="[object FileConstructor]";function on(t){return Zu&&(t instanceof ArrayBuffer||eh(t))||th&&t instanceof Blob||sh&&t instanceof File}function ks(t,s){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(ks(t[r]))return!0;return!1}if(on(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return ks(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&ks(t[r]))return!0;return!1}function rh(t){const s=[],r=t.data,n=t;return n.data=Fr(r,s),n.attachments=s.length,{packet:n,buffers:s}}function Fr(t,s){if(!t)return t;if(on(t)){const r={_placeholder:!0,num:s.length};return s.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=Fr(t[n],s);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Fr(t[n],s));return r}return t}function nh(t,s){return t.data=Ir(t.data,s),delete t.attachments,t}function Ir(t,s){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<s.length)return s[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=Ir(t[r],s);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Ir(t[r],s));return t}const ah=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ih=5;var Z;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Z||(Z={}));class oh{constructor(s){this.replacer=s}encode(s){return(s.type===Z.EVENT||s.type===Z.ACK)&&ks(s)?this.encodeAsBinary({type:s.type===Z.EVENT?Z.BINARY_EVENT:Z.BINARY_ACK,nsp:s.nsp,data:s.data,id:s.id}):[this.encodeAsString(s)]}encodeAsString(s){let r=""+s.type;return(s.type===Z.BINARY_EVENT||s.type===Z.BINARY_ACK)&&(r+=s.attachments+"-"),s.nsp&&s.nsp!=="/"&&(r+=s.nsp+","),s.id!=null&&(r+=s.id),s.data!=null&&(r+=JSON.stringify(s.data,this.replacer)),r}encodeAsBinary(s){const r=rh(s),n=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(n),a}}function Zn(t){return Object.prototype.toString.call(t)==="[object Object]"}class ln extends je{constructor(s){super(),this.reviver=s}add(s){let r;if(typeof s=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(s);const n=r.type===Z.BINARY_EVENT;n||r.type===Z.BINARY_ACK?(r.type=n?Z.EVENT:Z.ACK,this.reconstructor=new lh(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(on(s)||s.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(s),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+s)}decodeString(s){let r=0;const n={type:Number(s.charAt(0))};if(Z[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Z.BINARY_EVENT||n.type===Z.BINARY_ACK){const i=r+1;for(;s.charAt(++r)!=="-"&&r!=s.length;);const o=s.substring(i,r);if(o!=Number(o)||s.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(s.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(s.charAt(r)===","||r===s.length););n.nsp=s.substring(i,r)}else n.nsp="/";const a=s.charAt(r+1);if(a!==""&&Number(a)==a){const i=r+1;for(;++r;){const o=s.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===s.length)break}n.id=Number(s.substring(i,r+1))}if(s.charAt(++r)){const i=this.tryParse(s.substr(r));if(ln.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(s){try{return JSON.parse(s,this.reviver)}catch{return!1}}static isPayloadValid(s,r){switch(s){case Z.CONNECT:return Zn(r);case Z.DISCONNECT:return r===void 0;case Z.CONNECT_ERROR:return typeof r=="string"||Zn(r);case Z.EVENT:case Z.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&ah.indexOf(r[0])===-1);case Z.ACK:case Z.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class lh{constructor(s){this.packet=s,this.buffers=[],this.reconPack=s}takeBinaryData(s){if(this.buffers.push(s),this.buffers.length===this.reconPack.attachments){const r=nh(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const ch=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ln,Encoder:oh,get PacketType(){return Z},protocol:ih},Symbol.toStringTag,{value:"Module"}));function Je(t,s,r){return t.on(s,r),function(){t.off(s,r)}}const dh=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Gi extends je{constructor(s,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[Je(s,"open",this.onopen.bind(this)),Je(s,"packet",this.onpacket.bind(this)),Je(s,"error",this.onerror.bind(this)),Je(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...r){var n,a,i;if(dh.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(r.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:Z.EVENT,data:r};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const d=this.ids++,m=r.pop();this._registerAckCallback(d,m),o.id=d}const l=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(s,r){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[s]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===s&&this.sendBuffer.splice(l,1);r.call(this,new Error("operation has timed out"))},a),o=(...l)=>{this.io.clearTimeoutFn(i),r.apply(this,l)};o.withError=!0,this.acks[s]=o}emitWithAck(s,...r){return new Promise((n,a)=>{const i=(o,l)=>o?a(o):n(l);i.withError=!0,r.push(i),this.emit(s,...r)})}_addToQueue(s){let r;typeof s[s.length-1]=="function"&&(r=s.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((a,...i)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(s=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!s||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:Z.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",s,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(n=>String(n.id)===s)){const n=this.acks[s];delete this.acks[s],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case Z.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Z.EVENT:case Z.BINARY_EVENT:this.onevent(s);break;case Z.ACK:case Z.BINARY_ACK:this.onack(s);break;case Z.DISCONNECT:this.ondisconnect();break;case Z.CONNECT_ERROR:this.destroy();const n=new Error(s.data.message);n.data=s.data.data,this.emitReserved("connect_error",n);break}}onevent(s){const r=s.data||[];s.id!=null&&r.push(this.ack(s.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const r=this;let n=!1;return function(...a){n||(n=!0,r.packet({type:Z.ACK,id:s,data:a}))}}onack(s){const r=this.acks[s.id];typeof r=="function"&&(delete this.acks[s.id],r.withError&&s.data.unshift(null),r.apply(this,s.data))}onconnect(s,r){this.id=s,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Z.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(s===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(s===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,s.data)}}}function qt(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}qt.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var s=Math.random(),r=Math.floor(s*this.jitter*t);t=(Math.floor(s*10)&1)==0?t-r:t+r}return Math.min(t,this.max)|0};qt.prototype.reset=function(){this.attempts=0};qt.prototype.setMin=function(t){this.ms=t};qt.prototype.setMax=function(t){this.max=t};qt.prototype.setJitter=function(t){this.jitter=t};class Ur extends je{constructor(s,r){var n;super(),this.nsps={},this.subs=[],s&&typeof s=="object"&&(r=s,s=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Zs(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new qt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=s;const a=r.parser||ch;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(s){return arguments.length?(this._reconnection=!!s,s||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(s){return s===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=s,this)}reconnectionDelay(s){var r;return s===void 0?this._reconnectionDelay:(this._reconnectionDelay=s,(r=this.backoff)===null||r===void 0||r.setMin(s),this)}randomizationFactor(s){var r;return s===void 0?this._randomizationFactor:(this._randomizationFactor=s,(r=this.backoff)===null||r===void 0||r.setJitter(s),this)}reconnectionDelayMax(s){var r;return s===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=s,(r=this.backoff)===null||r===void 0||r.setMax(s),this)}timeout(s){return arguments.length?(this._timeout=s,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(s){if(~this._readyState.indexOf("open"))return this;this.engine=new Yu(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=Je(r,"open",function(){n.onopen(),s&&s()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),s?s(l):this.maybeReconnectOnOpen()},o=Je(r,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),r.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(o),this}connect(s){return this.open(s)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const s=this.engine;this.subs.push(Je(s,"ping",this.onping.bind(this)),Je(s,"data",this.ondata.bind(this)),Je(s,"error",this.onerror.bind(this)),Je(s,"close",this.onclose.bind(this)),Je(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(s){try{this.decoder.add(s)}catch(r){this.onclose("parse error",r)}}ondecoded(s){Xs(()=>{this.emitReserved("packet",s)},this.setTimeoutFn)}onerror(s){this.emitReserved("error",s)}socket(s,r){let n=this.nsps[s];return n?this._autoConnect&&!n.active&&n.connect():(n=new Gi(this,s,r),this.nsps[s]=n),n}_destroy(s){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(s){const r=this.encoder.encode(s);for(let n=0;n<r.length;n++)this.engine.write(r[n],s.options)}cleanup(){this.subs.forEach(s=>s()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(s,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",s,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const s=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{s.skipReconnect||(this.emitReserved("reconnect_attempt",s.backoff.attempts),!s.skipReconnect&&s.open(a=>{a?(s._reconnecting=!1,s.reconnect(),this.emitReserved("reconnect_error",a)):s.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const s=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",s)}}const Qt={};function Cs(t,s){typeof t=="object"&&(s=t,t=void 0),s=s||{};const r=Xu(t,s.path||"/socket.io"),n=r.source,a=r.id,i=r.path,o=Qt[a]&&i in Qt[a].nsps,l=s.forceNew||s["force new connection"]||s.multiplex===!1||o;let c;return l?c=new Ur(n,s):(Qt[a]||(Qt[a]=new Ur(n,s)),c=Qt[a]),r.query&&!s.query&&(s.query=r.queryKey),c.socket(r.path,s)}Object.assign(Cs,{Manager:Ur,Socket:Gi,io:Cs,connect:Cs});let uh={data:""},hh=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||uh,mh=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,fh=/\/\*[^]*?\*\/|  +/g,ea=/\n+/g,dt=(t,s)=>{let r="",n="",a="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?dt(o,i):i+"{"+dt(o,i[1]=="k"?"":s)+"}":typeof o=="object"?n+=dt(o,s?s.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=dt.p?dt.p(i,o):i+":"+o+";")}return r+(s&&a?s+"{"+a+"}":a)+n},rt={},Ki=t=>{if(typeof t=="object"){let s="";for(let r in t)s+=r+Ki(t[r]);return s}return t},ph=(t,s,r,n,a)=>{let i=Ki(t),o=rt[i]||(rt[i]=(c=>{let h=0,d=11;for(;h<c.length;)d=101*d+c.charCodeAt(h++)>>>0;return"go"+d})(i));if(!rt[o]){let c=i!==t?t:(h=>{let d,m,f=[{}];for(;d=mh.exec(h.replace(fh,""));)d[4]?f.shift():d[3]?(m=d[3].replace(ea," ").trim(),f.unshift(f[0][m]=f[0][m]||{})):f[0][d[1]]=d[2].replace(ea," ").trim();return f[0]})(t);rt[o]=dt(a?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&rt.g?rt.g:null;return r&&(rt.g=rt[o]),((c,h,d,m)=>{m?h.data=h.data.replace(m,c):h.data.indexOf(c)===-1&&(h.data=d?c+h.data:h.data+c)})(rt[o],s,n,l),o},xh=(t,s,r)=>t.reduce((n,a,i)=>{let o=s[i];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":dt(l,""):l===!1?"":l}return n+a+(o??"")},"");function er(t){let s=this||{},r=t.call?t(s.p):t;return ph(r.unshift?r.raw?xh(r,[].slice.call(arguments,1),s.p):r.reduce((n,a)=>Object.assign(n,a&&a.call?a(s.p):a),{}):r,hh(s.target),s.g,s.o,s.k)}let Ji,$r,Br;er.bind({g:1});let it=er.bind({k:1});function gh(t,s,r,n){dt.p=s,Ji=t,$r=r,Br=n}function gt(t,s){let r=this||{};return function(){let n=arguments;function a(i,o){let l=Object.assign({},i),c=l.className||a.className;r.p=Object.assign({theme:$r&&$r()},l),r.o=/ *go\d+/.test(c),l.className=er.apply(r,n)+(c?" "+c:"");let h=t;return t[0]&&(h=l.as||t,delete l.as),Br&&h[0]&&Br(l),Ji(h,l)}return a}}var yh=t=>typeof t=="function",Ls=(t,s)=>yh(t)?t(s):t,jh=(()=>{let t=0;return()=>(++t).toString()})(),Qi=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let s=matchMedia("(prefers-reduced-motion: reduce)");t=!s||s.matches}return t}})(),bh=20,Yi=(t,s)=>{switch(s.type){case 0:return{...t,toasts:[s.toast,...t.toasts].slice(0,bh)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===s.toast.id?{...i,...s.toast}:i)};case 2:let{toast:r}=s;return Yi(t,{type:t.toasts.find(i=>i.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=s;return{...t,toasts:t.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==s.toastId)};case 5:return{...t,pausedAt:s.time};case 6:let a=s.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+a}))}}},Ts=[],jt={toasts:[],pausedAt:void 0},Et=t=>{jt=Yi(jt,t),Ts.forEach(s=>{s(jt)})},vh={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},wh=(t={})=>{let[s,r]=u.useState(jt),n=u.useRef(jt);u.useEffect(()=>(n.current!==jt&&r(jt),Ts.push(r),()=>{let i=Ts.indexOf(r);i>-1&&Ts.splice(i,1)}),[]);let a=s.toasts.map(i=>{var o,l,c;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((o=t[i.type])==null?void 0:o.removeDelay)||t?.removeDelay,duration:i.duration||((l=t[i.type])==null?void 0:l.duration)||t?.duration||vh[i.type],style:{...t.style,...(c=t[i.type])==null?void 0:c.style,...i.style}}});return{...s,toasts:a}},Nh=(t,s="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:s,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:r?.id||jh()}),ds=t=>(s,r)=>{let n=Nh(s,t,r);return Et({type:2,toast:n}),n.id},Fe=(t,s)=>ds("blank")(t,s);Fe.error=ds("error");Fe.success=ds("success");Fe.loading=ds("loading");Fe.custom=ds("custom");Fe.dismiss=t=>{Et({type:3,toastId:t})};Fe.remove=t=>Et({type:4,toastId:t});Fe.promise=(t,s,r)=>{let n=Fe.loading(s.loading,{...r,...r?.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let i=s.success?Ls(s.success,a):void 0;return i?Fe.success(i,{id:n,...r,...r?.success}):Fe.dismiss(n),a}).catch(a=>{let i=s.error?Ls(s.error,a):void 0;i?Fe.error(i,{id:n,...r,...r?.error}):Fe.dismiss(n)}),t};var Sh=(t,s)=>{Et({type:1,toast:{id:t,height:s}})},kh=()=>{Et({type:5,time:Date.now()})},ts=new Map,Ch=1e3,Th=(t,s=Ch)=>{if(ts.has(t))return;let r=setTimeout(()=>{ts.delete(t),Et({type:4,toastId:t})},s);ts.set(t,r)},Ph=t=>{let{toasts:s,pausedAt:r}=wh(t);u.useEffect(()=>{if(r)return;let i=Date.now(),o=s.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(c<0){l.visible&&Fe.dismiss(l.id);return}return setTimeout(()=>Fe.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[s,r]);let n=u.useCallback(()=>{r&&Et({type:6,time:Date.now()})},[r]),a=u.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:h}=o||{},d=s.filter(y=>(y.position||h)===(i.position||h)&&y.height),m=d.findIndex(y=>y.id===i.id),f=d.filter((y,x)=>x<m&&y.visible).length;return d.filter(y=>y.visible).slice(...l?[f+1]:[0,f]).reduce((y,x)=>y+(x.height||0)+c,0)},[s]);return u.useEffect(()=>{s.forEach(i=>{if(i.dismissed)Th(i.id,i.removeDelay);else{let o=ts.get(i.id);o&&(clearTimeout(o),ts.delete(i.id))}})},[s]),{toasts:s,handlers:{updateHeight:Sh,startPause:kh,endPause:n,calculateOffset:a}}},Eh=it`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Rh=it`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ah=it`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,_h=gt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Eh} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Rh} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Ah} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Oh=it`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Dh=gt("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Oh} 1s linear infinite;
`,Lh=it`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Mh=it`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Fh=gt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Lh} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Mh} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Ih=gt("div")`
  position: absolute;
`,Uh=gt("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,$h=it`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Bh=gt("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${$h} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,zh=({toast:t})=>{let{icon:s,type:r,iconTheme:n}=t;return s!==void 0?typeof s=="string"?u.createElement(Bh,null,s):s:r==="blank"?null:u.createElement(Uh,null,u.createElement(Dh,{...n}),r!=="loading"&&u.createElement(Ih,null,r==="error"?u.createElement(_h,{...n}):u.createElement(Fh,{...n})))},qh=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Vh=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Hh="0%{opacity:0;} 100%{opacity:1;}",Wh="0%{opacity:1;} 100%{opacity:0;}",Gh=gt("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Kh=gt("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Jh=(t,s)=>{let r=t.includes("top")?1:-1,[n,a]=Qi()?[Hh,Wh]:[qh(r),Vh(r)];return{animation:s?`${it(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${it(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Qh=u.memo(({toast:t,position:s,style:r,children:n})=>{let a=t.height?Jh(t.position||s||"top-center",t.visible):{opacity:0},i=u.createElement(zh,{toast:t}),o=u.createElement(Kh,{...t.ariaProps},Ls(t.message,t));return u.createElement(Gh,{className:t.className,style:{...a,...r,...t.style}},typeof n=="function"?n({icon:i,message:o}):u.createElement(u.Fragment,null,i,o))});gh(u.createElement);var Yh=({id:t,className:s,style:r,onHeightUpdate:n,children:a})=>{let i=u.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(t,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return u.createElement("div",{ref:i,className:s,style:r},a)},Xh=(t,s)=>{let r=t.includes("top"),n=r?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Qi()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${s*(r?1:-1)}px)`,...n,...a}},Zh=er`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,bs=16,em=({reverseOrder:t,position:s="top-center",toastOptions:r,gutter:n,children:a,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:c}=Ph(r);return u.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:bs,left:bs,right:bs,bottom:bs,pointerEvents:"none",...i},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(h=>{let d=h.position||s,m=c.calculateOffset(h,{reverseOrder:t,gutter:n,defaultPosition:s}),f=Xh(d,m);return u.createElement(Yh,{id:h.id,key:h.id,onHeightUpdate:c.updateHeight,className:h.visible?Zh:"",style:f},h.type==="custom"?Ls(h.message,h):a?a(h):u.createElement(Qh,{toast:h,position:d}))}))},V=Fe;const tm={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"https://cosmicproject-backend-1.onrender.com/api",VITE_FILE_BASE_URL:"https://cosmicproject-backend-1.onrender.com",VITE_SOCKET_URL:"https://cosmicproject-backend-1.onrender.com"},Dt=(t,s)=>tm[t]||s,sm={API_BASE_URL:Dt("VITE_API_BASE_URL","http://localhost:5000/api"),SOCKET_URL:Dt("VITE_SOCKET_URL","http://localhost:5000"),FILE_BASE_URL:Dt("VITE_FILE_BASE_URL","http://localhost:5000"),NODE_ENV:"development"},rm={API_BASE_URL:Dt("VITE_API_BASE_URL","https://cosmicproject-backend-1.onrender.com/api"),SOCKET_URL:Dt("VITE_SOCKET_URL","https://cosmicproject-backend-1.onrender.com"),FILE_BASE_URL:Dt("VITE_FILE_BASE_URL","https://cosmicproject-backend-1.onrender.com"),NODE_ENV:"production"},nm=()=>{switch("production"){case"production":return rm;case"development":default:return sm}},tr=nm(),ta=tr.API_BASE_URL,am=tr.SOCKET_URL;tr.FILE_BASE_URL;tr.NODE_ENV;const Xi=u.createContext({socket:null,notifications:[],unreadCount:0,markAsRead:()=>{},markAllAsRead:()=>{},clearNotifications:()=>{}}),Rt=()=>u.useContext(Xi),im=({children:t})=>{const[s,r]=u.useState(null),[n,a]=u.useState([]),[i,o]=u.useState(0);u.useEffect(()=>{const d=localStorage.getItem("token");if(!d)return;const m=Cs(am,{auth:{token:d},transports:["websocket"],withCredentials:!0});return m.on("connect",()=>{V.success("Connected to real-time updates")}),m.on("disconnect",()=>{V.error("Lost connection to real-time updates")}),m.on("notification:new",f=>{switch(a(y=>[f,...y]),o(y=>y+1),f.type){case"success":V.success(f.message,{duration:5e3,icon:""});break;case"error":V.error(f.message,{duration:6e3,icon:""});break;case"warning":V(f.message,{duration:5e3,icon:"",style:{background:"#fbbf24",color:"#1f2937"}});break;case"info":V(f.message,{duration:4e3,icon:""});break;default:V(f.message,{duration:4e3})}}),m.on("project:created",f=>{V.success(`New project "${f.project.siteName}" created!`,{duration:5e3,icon:""})}),m.on("project:updated",f=>{V.success(`Project "${f.project.siteName}" updated!`,{duration:4e3,icon:""})}),m.on("project:status_changed",f=>{V(`Project "${f.project.siteName}" status changed to ${f.status}`,{duration:4e3,icon:""})}),m.on("task:assigned",f=>{V.success(`New task "${f.task.title}" assigned to you!`,{duration:5e3,icon:""})}),m.on("task:updated",f=>{V(`Task "${f.task.title}" updated!`,{duration:4e3,icon:""})}),m.on("task:status_changed",f=>{V(`Task "${f.task.title}" status changed to ${f.status}`,{duration:4e3,icon:""})}),m.on("task:completed",f=>{V.success(`Task "${f.task.title}" completed!`,{duration:5e3,icon:""})}),m.on("report:submitted",f=>{V.success(`Report submitted for task "${f.report.task}"!`,{duration:5e3,icon:""})}),m.on("user:login",f=>{V(`User ${f.user.name} logged in`,{duration:3e3,icon:""})}),m.on("user:logout",f=>{V(`User ${f.user.name} logged out`,{duration:3e3,icon:""})}),m.on("system:maintenance",f=>{V(f.message,{duration:8e3,icon:"",style:{background:"#f59e0b",color:"#1f2937"}})}),m.on("system:alert",f=>{V.error(f.message,{duration:1e4,icon:""})}),r(m),()=>{m.disconnect()}},[]);const l=async d=>{try{const m=localStorage.getItem("token");(await fetch(`${ta}/notifications/${d}/read`,{method:"PATCH",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}})).ok&&(a(y=>y.map(x=>x.id===d?{...x,isRead:!0}:x)),o(y=>Math.max(0,y-1)))}catch{}},c=async()=>{try{const d=localStorage.getItem("token");(await fetch(`${ta}/notifications/mark-all-read`,{method:"PATCH",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}})).ok&&(a(f=>f.map(y=>({...y,isRead:!0}))),o(0))}catch{}},h=()=>{a([]),o(0)};return e.jsx(Xi.Provider,{value:{socket:s,notifications:n,unreadCount:i,markAsRead:l,markAllAsRead:c,clearNotifications:h},children:t})},cn=()=>{const t=u.useContext(Xa);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},sa=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ra=ci,dn=(t,s)=>r=>{var n;if(s?.variants==null)return ra(t,r?.class,r?.className);const{variants:a,defaultVariants:i}=s,o=Object.keys(a).map(h=>{const d=r?.[h],m=i?.[h];if(d===null)return null;const f=sa(d)||sa(m);return a[h][f]}),l=r&&Object.entries(r).reduce((h,d)=>{let[m,f]=d;return f===void 0||(h[m]=f),h},{}),c=s==null||(n=s.compoundVariants)===null||n===void 0?void 0:n.reduce((h,d)=>{let{class:m,className:f,...y}=d;return Object.entries(y).every(x=>{let[g,p]=x;return Array.isArray(p)?p.includes({...i,...l}[g]):{...i,...l}[g]===p})?[...h,m,f]:h},[]);return ra(t,o,c,r?.class,r?.className)},om=dn("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_=u.forwardRef(({className:t,variant:s,size:r,asChild:n=!1,...a},i)=>{const o=n?_l:"button";return e.jsx(o,{className:U(om({variant:s,size:r,className:t})),ref:i,...a})});_.displayName="Button";const se=u.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:U("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));se.displayName="Card";const ae=u.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:U("flex flex-col space-y-1.5 p-6",t),...s}));ae.displayName="CardHeader";const ie=u.forwardRef(({className:t,...s},r)=>e.jsx("h3",{ref:r,className:U("text-2xl font-semibold leading-none tracking-tight",t),...s}));ie.displayName="CardTitle";const Le=u.forwardRef(({className:t,...s},r)=>e.jsx("p",{ref:r,className:U("text-sm text-muted-foreground",t),...s}));Le.displayName="CardDescription";const re=u.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:U("p-6 pt-0",t),...s}));re.displayName="CardContent";const lm=u.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:U("flex items-center p-6 pt-0",t),...s}));lm.displayName="CardFooter";const ee=u.forwardRef(({className:t,type:s,...r},n)=>e.jsx("input",{type:s,className:U("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));ee.displayName="Input";var cm="Label",Zi=u.forwardRef((t,s)=>e.jsx(Ee.label,{...t,ref:s,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Zi.displayName=cm;var eo=Zi;const dm=dn("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),F=u.forwardRef(({className:t,...s},r)=>e.jsx(eo,{ref:r,className:U(dm(),t),...s}));F.displayName=eo.displayName;var um={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hm=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mm=(t,s)=>{const r=u.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},h)=>u.createElement("svg",{ref:h,...um,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:`lucide lucide-${hm(t)}`,...c},[...s.map(([d,m])=>u.createElement(d,m)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${t}`,r};var J=mm;const fm=J("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),to=J("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ms=J("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),na=J("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),pm=J("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]),Fs=J("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),ot=J("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),xm=J("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),qe=J("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),un=J("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),so=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),gm=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ym=J("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),jm=J("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ke=J("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Mt=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),sr=J("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ft=J("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ie=J("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),hn=J("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),yr=J("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),bm=J("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),vm=J("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),wm=J("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ft=J("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Nm=J("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),aa=J("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),ia=J("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Ps=J("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),wt=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),At=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Nt=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),mn=J("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Sm=J("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),It=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ro=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),nt=J("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),fn=J("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),at=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),no=J("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),kt=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Oe=Il,De=Ul,Te=u.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(Ra,{ref:n,className:U("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[s,e.jsx(Ol,{asChild:!0,children:e.jsx(so,{className:"h-4 w-4 opacity-50"})})]}));Te.displayName=Ra.displayName;const ao=u.forwardRef(({className:t,...s},r)=>e.jsx(Aa,{ref:r,className:U("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ym,{className:"h-4 w-4"})}));ao.displayName=Aa.displayName;const io=u.forwardRef(({className:t,...s},r)=>e.jsx(_a,{ref:r,className:U("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(so,{className:"h-4 w-4"})}));io.displayName=_a.displayName;const Pe=u.forwardRef(({className:t,children:s,position:r="popper",...n},a)=>e.jsx(Dl,{children:e.jsxs(Oa,{ref:a,className:U("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[e.jsx(ao,{}),e.jsx(Ll,{className:U("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(io,{})]})}));Pe.displayName=Oa.displayName;const km=u.forwardRef(({className:t,...s},r)=>e.jsx(Da,{ref:r,className:U("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));km.displayName=Da.displayName;const q=u.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(La,{ref:n,className:U("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ml,{children:e.jsx(un,{className:"h-4 w-4"})})}),e.jsx(Fl,{children:s})]}));q.displayName=La.displayName;const Cm=u.forwardRef(({className:t,...s},r)=>e.jsx(Ma,{ref:r,className:U("-mx-1 my-1 h-px bg-muted",t),...s}));Cm.displayName=Ma.displayName;const Tm=dn("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function te({className:t,variant:s,...r}){return e.jsx("div",{className:U(Tm({variant:s}),t),...r})}const Pm=()=>{const[t,s]=u.useState("superadmin"),[r,n]=u.useState(""),[a,i]=u.useState(""),[o,l]=u.useState(!1);sn();const{login:c}=cn(),h=async m=>{if(m.preventDefault(),l(!0),!r||!a||!t){alert("Please fill in all fields including role selection"),l(!1);return}if(!r.includes("@")){alert("Please enter a valid email address"),l(!1);return}try{const f=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:a,role:t})});if(!f.ok){let x="Login failed";try{x=(await f.json()).message||"Invalid credentials"}catch{x=`Server error: ${f.status} ${f.statusText}`}alert(` Login failed!

${x}`);return}const y=await f.json();if(y.status==="success"){localStorage.setItem("token",y.data.token),sessionStorage.setItem("currentUser",JSON.stringify(y.data.user));const x={superadmin:"/superadmin","super-admin":"/superadmin",manager:"/manager",technician:"/technician"},g=y.data.user.role;alert(` Login successful!

Welcome, ${y.data.user.name}!`),window.location.href=x[g]||"/login"}else alert(` Login failed!

${y.message||"Invalid credentials"}`)}catch{alert(` Connection error!

Please make sure the backend server is running.`)}finally{l(!1)}},d={superadmin:{icon:mn,title:"Super Admin",description:"Full system control and oversight",color:"bg-primary text-primary-foreground"},manager:{icon:Nt,title:"Manager",description:"Task assignment and team management",color:"bg-success text-success-foreground"},technician:{icon:no,title:"Technician",description:"Field operations and task execution",color:"bg-pending text-pending-foreground"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center mobile-padding",children:e.jsxs("div",{className:"w-full max-w-md mobile-space-y",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fdf520b57241b409c97fe8b1702f73e79%2Fce826268d92b499a98eeb82a92fb89e5?format=webp&width=800",alt:"Cosmic Solutions",className:"h-12 sm:h-16 w-auto"})}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground mt-2",children:"Site Engineer & CCTV Management System"})]}),e.jsxs(se,{className:"shadow-xl border-0",children:[e.jsxs(ae,{className:"mobile-space-y",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(ie,{className:"mobile-text-2xl",children:"Welcome Back"}),e.jsx(Le,{className:"mobile-text-base",children:"Sign in to your account"})]}),e.jsxs("div",{className:"mobile-form-group",children:[e.jsx(F,{className:"mobile-text-sm",children:"Select your role"}),e.jsxs(Oe,{value:t,onValueChange:m=>s(m),children:[e.jsx(Te,{className:"mobile-select",children:e.jsx(De,{})}),e.jsx(Pe,{children:Object.entries(d).map(([m,f])=>{const y=f.icon;return e.jsx(q,{value:m,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx("span",{className:"mobile-text-sm",children:f.title})]})},m)})})]}),e.jsx("div",{className:"flex justify-center pt-2",children:e.jsxs(te,{variant:"outline",className:`${d[t].color} border-0 mobile-text-sm`,children:[kr.createElement(d[t].icon,{className:"h-3 w-3 mr-1"}),d[t].description]})})]})]}),e.jsxs(re,{children:[e.jsxs("form",{onSubmit:h,className:"mobile-form",children:[e.jsxs("div",{className:"mobile-form-group",children:[e.jsx(F,{htmlFor:"email",className:"mobile-text-sm",children:"Email"}),e.jsx(ee,{id:"email",type:"email",placeholder:"Enter your email",value:r,onChange:m=>n(m.target.value),required:!0,disabled:o,className:"mobile-input"})]}),e.jsxs("div",{className:"mobile-form-group",children:[e.jsx(F,{htmlFor:"password",className:"mobile-text-sm",children:"Password"}),e.jsx(ee,{id:"password",type:"password",placeholder:"Enter your password",value:a,onChange:m=>i(m.target.value),required:!0,disabled:o,className:"mobile-input"})]}),e.jsx(_,{type:"submit",className:"mobile-button h-11 mobile-text-base font-medium",disabled:o,children:o?"Signing in...":`Sign In as ${d[t].title}`})]}),e.jsxs("div",{className:"mt-6 mobile-padding bg-muted rounded-lg",children:[e.jsx("p",{className:"mobile-text-sm font-medium text-muted-foreground mb-3",children:"Available Login Credentials:"}),e.jsxs("div",{className:"mobile-space-y",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mobile-text-sm font-medium text-primary",children:"Super Admin:"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:"admin@cosmicsolutions.com / Admin@123"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mobile-text-sm font-medium text-success",children:"Managers:"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:"manager@cosmicsolutions.com / Manager@123"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:"sarah.johnson@cosmicsolutions.com / Sarah@123"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:"david.kim@cosmicsolutions.com / David@123"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mobile-text-sm font-medium text-pending",children:"Technicians:"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:"technician@cosmicsolutions.com / Tech@123"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:"mike.chen@cosmicsolutions.com / Mike@123"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:"lisa.rodriguez@cosmicsolutions.com / Lisa@123"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:"james.wilson@cosmicsolutions.com / James@123"})]})]})]})]})]}),e.jsx("p",{className:"text-center mobile-text-sm text-muted-foreground",children:" 2025 Cosmic Solutions. All rights reserved."})]})})};var jr={exports:{}},br={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oa;function Em(){if(oa)return br;oa=1;var t=Xl();function s(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var r=typeof Object.is=="function"?Object.is:s,n=t.useState,a=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function l(m,f){var y=f(),x=n({inst:{value:y,getSnapshot:f}}),g=x[0].inst,p=x[1];return i(function(){g.value=y,g.getSnapshot=f,c(g)&&p({inst:g})},[m,y,f]),a(function(){return c(g)&&p({inst:g}),m(function(){c(g)&&p({inst:g})})},[m]),o(y),y}function c(m){var f=m.getSnapshot;m=m.value;try{var y=f();return!r(m,y)}catch{return!0}}function h(m,f){return f()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return br.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,br}var la;function Rm(){return la||(la=1,jr.exports=Em()),jr.exports}var Am=Rm();function _m(){return Am.useSyncExternalStore(Om,()=>!0,()=>!1)}function Om(){return()=>{}}var pn="Avatar",[Dm,cg]=os(pn),[Lm,oo]=Dm(pn),lo=u.forwardRef((t,s)=>{const{__scopeAvatar:r,...n}=t,[a,i]=u.useState("idle");return e.jsx(Lm,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:e.jsx(Ee.span,{...n,ref:s})})});lo.displayName=pn;var co="AvatarImage",uo=u.forwardRef((t,s)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=t,o=oo(co,r),l=Mm(n,i),c=ct(h=>{a(h),o.onImageLoadingStatusChange(h)});return Os(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?e.jsx(Ee.img,{...i,ref:s,src:n}):null});uo.displayName=co;var ho="AvatarFallback",mo=u.forwardRef((t,s)=>{const{__scopeAvatar:r,delayMs:n,...a}=t,i=oo(ho,r),[o,l]=u.useState(n===void 0);return u.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?e.jsx(Ee.span,{...a,ref:s}):null});mo.displayName=ho;function ca(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Mm(t,{referrerPolicy:s,crossOrigin:r}){const n=_m(),a=u.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[o,l]=u.useState(()=>ca(i,t));return Os(()=>{l(ca(i,t))},[i,t]),Os(()=>{const c=m=>()=>{l(m)};if(!i)return;const h=c("loaded"),d=c("error");return i.addEventListener("load",h),i.addEventListener("error",d),s&&(i.referrerPolicy=s),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",h),i.removeEventListener("error",d)}},[i,r,s]),o}var fo=lo,po=uo,xo=mo;const Is=u.forwardRef(({className:t,...s},r)=>e.jsx(fo,{ref:r,className:U("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));Is.displayName=fo.displayName;const Us=u.forwardRef(({className:t,...s},r)=>e.jsx(po,{ref:r,className:U("aspect-square h-full w-full",t),...s}));Us.displayName=po.displayName;const $s=u.forwardRef(({className:t,...s},r)=>e.jsx(xo,{ref:r,className:U("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));$s.displayName=xo.displayName;const be=zl,Fm=ql,Im=$l,go=u.forwardRef(({className:t,...s},r)=>e.jsx(Fa,{ref:r,className:U("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));go.displayName=Fa.displayName;const fe=u.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(Im,{children:[e.jsx(go,{}),e.jsxs(Ia,{ref:n,className:U("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[s,e.jsxs(Bl,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(kt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));fe.displayName=Ia.displayName;const pe=({className:t,...s})=>e.jsx("div",{className:U("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});pe.displayName="DialogHeader";const xe=u.forwardRef(({className:t,...s},r)=>e.jsx(Ua,{ref:r,className:U("text-lg font-semibold leading-none tracking-tight",t),...s}));xe.displayName=Ua.displayName;const ge=u.forwardRef(({className:t,...s},r)=>e.jsx($a,{ref:r,className:U("text-sm text-muted-foreground",t),...s}));ge.displayName=$a.displayName;const Um=({currentImage:t,userName:s,onImageUpload:r,size:n="md"})=>{const[a,i]=u.useState(!1),[o,l]=u.useState(null),[c,h]=u.useState(!1),d=u.useRef(null),m={sm:"h-8 w-8",md:"h-10 w-10",lg:"h-16 w-16"},f=p=>{const w=p.target.files?.[0];if(w){if(!w.type.startsWith("image/")){V.error("Please select an image file");return}if(w.size>5*1024*1024){V.error("Image size should be less than 5MB");return}const E=new FileReader;E.onload=N=>{l(N.target?.result)},E.readAsDataURL(w)}},y=async()=>{const p=d.current?.files?.[0];if(!p){V.error("Please select an image");return}i(!0);try{await r(p),V.success("Profile picture updated successfully!"),h(!1),l(null),d.current&&(d.current.value="")}catch{V.error("Failed to upload profile picture")}finally{i(!1)}},x=()=>{l(null),d.current&&(d.current.value="")},g=p=>p.split(" ").map(w=>w[0]).join("").toUpperCase();return e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs(be,{open:c,onOpenChange:h,children:[e.jsx(Fm,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"relative p-0 h-auto w-auto rounded-full hover:opacity-80 transition-opacity",children:[e.jsxs(Is,{className:m[n],children:[e.jsx(Us,{src:t||o,alt:s}),e.jsx($s,{className:"bg-primary text-primary-foreground",children:g(s)})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-full opacity-0 hover:opacity-100 transition-opacity",children:e.jsx(xm,{className:"h-4 w-4 text-white"})})]})}),e.jsxs(fe,{className:"sm:max-w-md",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"Update Profile Picture"}),e.jsx(ge,{children:"Upload a new profile picture. Supported formats: JPG, PNG, GIF. Max size: 5MB."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs(Is,{className:"h-24 w-24",children:[e.jsx(Us,{src:o||t,alt:s}),e.jsx($s,{className:"bg-primary text-primary-foreground text-lg",children:g(s)})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"profile-picture",children:"Select Image"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{id:"profile-picture",type:"file",accept:"image/*",ref:d,onChange:f,className:"flex-1"}),o&&e.jsx(_,{variant:"outline",size:"icon",onClick:x,className:"h-10 w-10",children:e.jsx(kt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(_,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(_,{onClick:y,disabled:!o||a,children:a?"Uploading...":"Upload"})]})]})]})]})})},yo=Hl,jo=Wl,$m=u.forwardRef(({className:t,inset:s,children:r,...n},a)=>e.jsxs(Ba,{ref:a,className:U("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",t),...n,children:[r,e.jsx(gm,{className:"ml-auto h-4 w-4"})]}));$m.displayName=Ba.displayName;const Bm=u.forwardRef(({className:t,...s},r)=>e.jsx(za,{ref:r,className:U("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));Bm.displayName=za.displayName;const xn=u.forwardRef(({className:t,sideOffset:s=4,...r},n)=>e.jsx(Vl,{children:e.jsx(qa,{ref:n,sideOffset:s,className:U("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));xn.displayName=qa.displayName;const zr=u.forwardRef(({className:t,inset:s,...r},n)=>e.jsx(Va,{ref:n,className:U("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",t),...r}));zr.displayName=Va.displayName;const zm=u.forwardRef(({className:t,children:s,checked:r,...n},a)=>e.jsxs(Ha,{ref:a,className:U("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Wa,{children:e.jsx(un,{className:"h-4 w-4"})})}),s]}));zm.displayName=Ha.displayName;const qm=u.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(Ga,{ref:n,className:U("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Wa,{children:e.jsx(jm,{className:"h-2 w-2 fill-current"})})}),s]}));qm.displayName=Ga.displayName;const gn=u.forwardRef(({className:t,inset:s,...r},n)=>e.jsx(Ka,{ref:n,className:U("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...r}));gn.displayName=Ka.displayName;const Bs=u.forwardRef(({className:t,...s},r)=>e.jsx(Ja,{ref:r,className:U("-mx-1 my-1 h-px bg-muted",t),...s}));Bs.displayName=Ja.displayName;function Vm(t,[s,r]){return Math.min(r,Math.max(s,t))}function Hm(t,s){return u.useReducer((r,n)=>s[r][n]??r,t)}var yn="ScrollArea",[bo,dg]=os(yn),[Wm,He]=bo(yn),vo=u.forwardRef((t,s)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=t,[l,c]=u.useState(null),[h,d]=u.useState(null),[m,f]=u.useState(null),[y,x]=u.useState(null),[g,p]=u.useState(null),[w,E]=u.useState(0),[N,T]=u.useState(0),[L,M]=u.useState(!1),[C,z]=u.useState(!1),W=xt(s,A=>c(A)),K=Qa(a);return e.jsx(Wm,{scope:r,type:n,dir:K,scrollHideDelay:i,scrollArea:l,viewport:h,onViewportChange:d,content:m,onContentChange:f,scrollbarX:y,onScrollbarXChange:x,scrollbarXEnabled:L,onScrollbarXEnabledChange:M,scrollbarY:g,onScrollbarYChange:p,scrollbarYEnabled:C,onScrollbarYEnabledChange:z,onCornerWidthChange:E,onCornerHeightChange:T,children:e.jsx(Ee.div,{dir:K,...o,ref:W,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":N+"px",...t.style}})})});vo.displayName=yn;var wo="ScrollAreaViewport",No=u.forwardRef((t,s)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=t,o=He(wo,r),l=u.useRef(null),c=xt(s,l,o.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(Ee.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});No.displayName=wo;var st="ScrollAreaScrollbar",jn=u.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=He(st,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=t.orientation==="horizontal";return u.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?e.jsx(Gm,{...n,ref:s,forceMount:r}):a.type==="scroll"?e.jsx(Km,{...n,ref:s,forceMount:r}):a.type==="auto"?e.jsx(So,{...n,ref:s,forceMount:r}):a.type==="always"?e.jsx(bn,{...n,ref:s}):null});jn.displayName=st;var Gm=u.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=He(st,t.__scopeScrollArea),[i,o]=u.useState(!1);return u.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const h=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),e.jsx($t,{present:r||i,children:e.jsx(So,{"data-state":i?"visible":"hidden",...n,ref:s})})}),Km=u.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=He(st,t.__scopeScrollArea),i=t.orientation==="horizontal",o=nr(()=>c("SCROLL_END"),100),[l,c]=Hm("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return u.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,a.scrollHideDelay,c]),u.useEffect(()=>{const h=a.viewport,d=i?"scrollLeft":"scrollTop";if(h){let m=h[d];const f=()=>{const y=h[d];m!==y&&(c("SCROLL"),o()),m=y};return h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[a.viewport,i,c,o]),e.jsx($t,{present:r||l!=="hidden",children:e.jsx(bn,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:s,onPointerEnter:Ae(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ae(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),So=u.forwardRef((t,s)=>{const r=He(st,t.__scopeScrollArea),{forceMount:n,...a}=t,[i,o]=u.useState(!1),l=t.orientation==="horizontal",c=nr(()=>{if(r.viewport){const h=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?h:d)}},10);return Ut(r.viewport,c),Ut(r.content,c),e.jsx($t,{present:n||i,children:e.jsx(bn,{"data-state":i?"visible":"hidden",...a,ref:s})})}),bn=u.forwardRef((t,s)=>{const{orientation:r="vertical",...n}=t,a=He(st,t.__scopeScrollArea),i=u.useRef(null),o=u.useRef(0),[l,c]=u.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=Eo(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:h>0&&h<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function m(f,y){return ef(f,o.current,l,y)}return r==="horizontal"?e.jsx(Jm,{...d,ref:s,onThumbPositionChange:()=>{if(a.viewport&&i.current){const f=a.viewport.scrollLeft,y=da(f,l,a.dir);i.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:f=>{a.viewport&&(a.viewport.scrollLeft=f)},onDragScroll:f=>{a.viewport&&(a.viewport.scrollLeft=m(f,a.dir))}}):r==="vertical"?e.jsx(Qm,{...d,ref:s,onThumbPositionChange:()=>{if(a.viewport&&i.current){const f=a.viewport.scrollTop,y=da(f,l);i.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:f=>{a.viewport&&(a.viewport.scrollTop=f)},onDragScroll:f=>{a.viewport&&(a.viewport.scrollTop=m(f))}}):null}),Jm=u.forwardRef((t,s)=>{const{sizes:r,onSizesChange:n,...a}=t,i=He(st,t.__scopeScrollArea),[o,l]=u.useState(),c=u.useRef(null),h=xt(s,c,i.onScrollbarXChange);return u.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),e.jsx(Co,{"data-orientation":"horizontal",...a,ref:h,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":rr(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,m)=>{if(i.viewport){const f=i.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),Ao(f,m)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:qs(o.paddingLeft),paddingEnd:qs(o.paddingRight)}})}})}),Qm=u.forwardRef((t,s)=>{const{sizes:r,onSizesChange:n,...a}=t,i=He(st,t.__scopeScrollArea),[o,l]=u.useState(),c=u.useRef(null),h=xt(s,c,i.onScrollbarYChange);return u.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),e.jsx(Co,{"data-orientation":"vertical",...a,ref:h,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":rr(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,m)=>{if(i.viewport){const f=i.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),Ao(f,m)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:qs(o.paddingTop),paddingEnd:qs(o.paddingBottom)}})}})}),[Ym,ko]=bo(st),Co=u.forwardRef((t,s)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:h,onWheelScroll:d,onResize:m,...f}=t,y=He(st,r),[x,g]=u.useState(null),p=xt(s,W=>g(W)),w=u.useRef(null),E=u.useRef(""),N=y.viewport,T=n.content-n.viewport,L=ct(d),M=ct(c),C=nr(m,10);function z(W){if(w.current){const K=W.clientX-w.current.left,A=W.clientY-w.current.top;h({x:K,y:A})}}return u.useEffect(()=>{const W=K=>{const A=K.target;x?.contains(A)&&L(K,T)};return document.addEventListener("wheel",W,{passive:!1}),()=>document.removeEventListener("wheel",W,{passive:!1})},[N,x,T,L]),u.useEffect(M,[n,M]),Ut(x,C),Ut(y.content,C),e.jsx(Ym,{scope:r,scrollbar:x,hasThumb:a,onThumbChange:ct(i),onThumbPointerUp:ct(o),onThumbPositionChange:M,onThumbPointerDown:ct(l),children:e.jsx(Ee.div,{...f,ref:p,style:{position:"absolute",...f.style},onPointerDown:Ae(t.onPointerDown,W=>{W.button===0&&(W.target.setPointerCapture(W.pointerId),w.current=x.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),z(W))}),onPointerMove:Ae(t.onPointerMove,z),onPointerUp:Ae(t.onPointerUp,W=>{const K=W.target;K.hasPointerCapture(W.pointerId)&&K.releasePointerCapture(W.pointerId),document.body.style.webkitUserSelect=E.current,y.viewport&&(y.viewport.style.scrollBehavior=""),w.current=null})})})}),zs="ScrollAreaThumb",To=u.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=ko(zs,t.__scopeScrollArea);return e.jsx($t,{present:r||a.hasThumb,children:e.jsx(Xm,{ref:s,...n})})}),Xm=u.forwardRef((t,s)=>{const{__scopeScrollArea:r,style:n,...a}=t,i=He(zs,r),o=ko(zs,r),{onThumbPositionChange:l}=o,c=xt(s,m=>o.onThumbChange(m)),h=u.useRef(void 0),d=nr(()=>{h.current&&(h.current(),h.current=void 0)},100);return u.useEffect(()=>{const m=i.viewport;if(m){const f=()=>{if(d(),!h.current){const y=tf(m,l);h.current=y,l()}};return l(),m.addEventListener("scroll",f),()=>m.removeEventListener("scroll",f)}},[i.viewport,d,l]),e.jsx(Ee.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Ae(t.onPointerDownCapture,m=>{const y=m.target.getBoundingClientRect(),x=m.clientX-y.left,g=m.clientY-y.top;o.onThumbPointerDown({x,y:g})}),onPointerUp:Ae(t.onPointerUp,o.onThumbPointerUp)})});To.displayName=zs;var vn="ScrollAreaCorner",Po=u.forwardRef((t,s)=>{const r=He(vn,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?e.jsx(Zm,{...t,ref:s}):null});Po.displayName=vn;var Zm=u.forwardRef((t,s)=>{const{__scopeScrollArea:r,...n}=t,a=He(vn,r),[i,o]=u.useState(0),[l,c]=u.useState(0),h=!!(i&&l);return Ut(a.scrollbarX,()=>{const d=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(d),c(d)}),Ut(a.scrollbarY,()=>{const d=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(d),o(d)}),h?e.jsx(Ee.div,{...n,ref:s,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function qs(t){return t?parseInt(t,10):0}function Eo(t,s){const r=t/s;return isNaN(r)?0:r}function rr(t){const s=Eo(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*s;return Math.max(n,18)}function ef(t,s,r,n="ltr"){const a=rr(r),i=a/2,o=s||i,l=a-o,c=r.scrollbar.paddingStart+o,h=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,m=n==="ltr"?[0,d]:[d*-1,0];return Ro([c,h],m)(t)}function da(t,s,r="ltr"){const n=rr(s),a=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,i=s.scrollbar.size-a,o=s.content-s.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],h=Vm(t,c);return Ro([0,o],[0,l])(h)}function Ro(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const n=(s[1]-s[0])/(t[1]-t[0]);return s[0]+n*(r-t[0])}}function Ao(t,s){return t>0&&t<s}var tf=(t,s=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function a(){const i={left:t.scrollLeft,top:t.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&s(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function nr(t,s){const r=ct(t),n=u.useRef(0);return u.useEffect(()=>()=>window.clearTimeout(n.current),[]),u.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,s)},[r,s])}function Ut(t,s){const r=ct(s);Os(()=>{let n=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(t),()=>{window.cancelAnimationFrame(n),a.unobserve(t)}}},[t,r])}var _o=vo,sf=No,rf=Po;const Oo=u.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(_o,{ref:n,className:U("relative overflow-hidden",t),...r,children:[e.jsx(sf,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(Do,{}),e.jsx(rf,{})]}));Oo.displayName=_o.displayName;const Do=u.forwardRef(({className:t,orientation:s="vertical",...r},n)=>e.jsx(jn,{ref:n,orientation:s,className:U("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(To,{className:"relative flex-1 rounded-full bg-border"})}));Do.displayName=jn.displayName;const vs=43200,ua=1440,ha=Symbol.for("constructDateFrom");function wn(t,s){return typeof t=="function"?t(s):t&&typeof t=="object"&&ha in t?t[ha](s):t instanceof Date?new t.constructor(s):new Date(s)}function pt(t,s){return wn(t,t)}let nf={};function af(){return nf}function ma(t){const s=pt(t),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+t-+r}function Nn(t,...s){const r=wn.bind(null,t||s.find(n=>typeof n=="object"));return s.map(r)}function Es(t,s){const r=+pt(t)-+pt(s);return r<0?-1:r>0?1:r}function of(t){return wn(t,Date.now())}function lf(t,s,r){const[n,a]=Nn(r?.in,t,s),i=n.getFullYear()-a.getFullYear(),o=n.getMonth()-a.getMonth();return i*12+o}function cf(t){return s=>{const n=(t?Math[t]:Math.trunc)(s);return n===0?0:n}}function df(t,s){return+pt(t)-+pt(s)}function uf(t,s){const r=pt(t);return r.setHours(23,59,59,999),r}function hf(t,s){const r=pt(t),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function mf(t,s){const r=pt(t);return+uf(r)==+hf(r)}function ff(t,s,r){const[n,a,i]=Nn(r?.in,t,t,s),o=Es(a,i),l=Math.abs(lf(a,i));if(l<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*l);let c=Es(a,i)===-o;mf(n)&&l===1&&Es(n,i)===1&&(c=!1);const h=o*(l-+c);return h===0?0:h}function pf(t,s,r){const n=df(t,s)/1e3;return cf(r?.roundingMethod)(n)}const xf={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},gf=(t,s,r)=>{let n;const a=xf[t];return typeof a=="string"?n=a:s===1?n=a.one:n=a.other.replace("{{count}}",s.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function vr(t){return(s={})=>{const r=s.width?String(s.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const yf={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jf={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},bf={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vf={date:vr({formats:yf,defaultWidth:"full"}),time:vr({formats:jf,defaultWidth:"full"}),dateTime:vr({formats:bf,defaultWidth:"full"})},wf={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Nf=(t,s,r,n)=>wf[t];function Yt(t){return(s,r)=>{const n=r?.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r?.width?String(r.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r?.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(s):s;return a[i]}}const Sf={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},kf={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Cf={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Tf={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Pf={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ef={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Rf=(t,s)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Af={ordinalNumber:Rf,era:Yt({values:Sf,defaultWidth:"wide"}),quarter:Yt({values:kf,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Yt({values:Cf,defaultWidth:"wide"}),day:Yt({values:Tf,defaultWidth:"wide"}),dayPeriod:Yt({values:Pf,defaultWidth:"wide",formattingValues:Ef,defaultFormattingWidth:"wide"})};function Xt(t){return(s,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=s.match(a);if(!i)return null;const o=i[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?Of(l,m=>m.test(o)):_f(l,m=>m.test(o));let h;h=t.valueCallback?t.valueCallback(c):c,h=r.valueCallback?r.valueCallback(h):h;const d=s.slice(o.length);return{value:h,rest:d}}}function _f(t,s){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&s(t[r]))return r}function Of(t,s){for(let r=0;r<t.length;r++)if(s(t[r]))return r}function Df(t){return(s,r={})=>{const n=s.match(t.matchPattern);if(!n)return null;const a=n[0],i=s.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=s.slice(a.length);return{value:o,rest:l}}}const Lf=/^(\d+)(th|st|nd|rd)?/i,Mf=/\d+/i,Ff={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},If={any:[/^b/i,/^(a|c)/i]},Uf={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},$f={any:[/1/i,/2/i,/3/i,/4/i]},Bf={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},zf={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},qf={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Vf={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Hf={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Wf={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Gf={ordinalNumber:Df({matchPattern:Lf,parsePattern:Mf,valueCallback:t=>parseInt(t,10)}),era:Xt({matchPatterns:Ff,defaultMatchWidth:"wide",parsePatterns:If,defaultParseWidth:"any"}),quarter:Xt({matchPatterns:Uf,defaultMatchWidth:"wide",parsePatterns:$f,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Xt({matchPatterns:Bf,defaultMatchWidth:"wide",parsePatterns:zf,defaultParseWidth:"any"}),day:Xt({matchPatterns:qf,defaultMatchWidth:"wide",parsePatterns:Vf,defaultParseWidth:"any"}),dayPeriod:Xt({matchPatterns:Hf,defaultMatchWidth:"any",parsePatterns:Wf,defaultParseWidth:"any"})},Kf={code:"en-US",formatDistance:gf,formatLong:vf,formatRelative:Nf,localize:Af,match:Gf,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Jf(t,s,r){const n=af(),a=r?.locale??n.locale??Kf,i=2520,o=Es(t,s);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:o}),[c,h]=Nn(r?.in,...o>0?[s,t]:[t,s]),d=pf(h,c),m=(ma(h)-ma(c))/1e3,f=Math.round((d-m)/60);let y;if(f<2)return r?.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,l):d<10?a.formatDistance("lessThanXSeconds",10,l):d<20?a.formatDistance("lessThanXSeconds",20,l):d<40?a.formatDistance("halfAMinute",0,l):d<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):f===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",f,l);if(f<45)return a.formatDistance("xMinutes",f,l);if(f<90)return a.formatDistance("aboutXHours",1,l);if(f<ua){const x=Math.round(f/60);return a.formatDistance("aboutXHours",x,l)}else{if(f<i)return a.formatDistance("xDays",1,l);if(f<vs){const x=Math.round(f/ua);return a.formatDistance("xDays",x,l)}else if(f<vs*2)return y=Math.round(f/vs),a.formatDistance("aboutXMonths",y,l)}if(y=ff(h,c),y<12){const x=Math.round(f/vs);return a.formatDistance("xMonths",x,l)}else{const x=y%12,g=Math.trunc(y/12);return x<3?a.formatDistance("aboutXYears",g,l):x<9?a.formatDistance("overXYears",g,l):a.formatDistance("almostXYears",g+1,l)}}function Qf(t,s){return Jf(t,of(t),s)}const Yf=t=>{switch(t){case"success":return e.jsx(qe,{className:"h-4 w-4 text-success"});case"error":return e.jsx(Ms,{className:"h-4 w-4 text-destructive"});case"warning":return e.jsx(Ms,{className:"h-4 w-4 text-warning"});case"info":return e.jsx(Fs,{className:"h-4 w-4 text-primary"});case"system":return e.jsx(Nt,{className:"h-4 w-4 text-muted-foreground"});default:return e.jsx(Fs,{className:"h-4 w-4 text-muted-foreground"})}},Xf=t=>{switch(t){case"urgent":return"bg-destructive text-destructive-foreground";case"high":return"bg-orange-500 text-white";case"medium":return"bg-primary text-primary-foreground";case"low":return"bg-muted text-muted-foreground";default:return"bg-muted text-muted-foreground"}},Zf=({className:t})=>{const{notifications:s,unreadCount:r,markAsRead:n,markAllAsRead:a,clearNotifications:i}=Rt(),o=s.slice(0,10);return e.jsxs(yo,{children:[e.jsx(jo,{asChild:!0,children:e.jsxs(_,{variant:"ghost",size:"icon",className:U("relative",t),children:[r>0?e.jsx(pm,{className:"h-5 w-5"}):e.jsx(Fs,{className:"h-5 w-5"}),r>0&&e.jsx(te,{className:"absolute -top-1 -right-1 h-5 w-5 p-0 flex items-center justify-center bg-destructive text-destructive-foreground text-xs",children:r>99?"99+":r})]})}),e.jsxs(xn,{className:"w-80 max-h-[600px]",align:"end",forceMount:!0,children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx(gn,{className:"text-base font-semibold",children:"Notifications"}),s.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[r>0&&e.jsxs(_,{variant:"ghost",size:"sm",onClick:a,className:"h-6 px-2 text-xs",children:[e.jsx(un,{className:"h-3 w-3 mr-1"}),"Mark all read"]}),e.jsxs(_,{variant:"ghost",size:"sm",onClick:i,className:"h-6 px-2 text-xs",children:[e.jsx(It,{className:"h-3 w-3 mr-1"}),"Clear all"]})]})]}),e.jsx(Bs,{}),s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(Fs,{className:"h-8 w-8 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"You're all caught up!"})]}):e.jsx(Oo,{className:"max-h-[400px]",children:e.jsx("div",{className:"space-y-1",children:o.map(l=>e.jsx("div",{className:U("p-3 hover:bg-muted/50 transition-colors cursor-pointer border-l-4",l.read?"border-l-transparent":"bg-primary/5 border-l-primary"),onClick:()=>n(l.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:Yf(l.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:U("text-sm leading-tight",!l.isRead&&"font-medium"),children:l.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:l.message})]}),e.jsx("div",{className:"flex flex-col items-end gap-1",children:e.jsx(te,{variant:"outline",className:U("text-xs",Xf(l.priority)),children:l.priority})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:Qf(new Date(l.createdAt),{addSuffix:!0})}),!l.isRead&&e.jsx("div",{className:"h-2 w-2 bg-primary rounded-full"})]})]})]})},l.id))})}),s.length>10&&e.jsxs(e.Fragment,{children:[e.jsx(Bs,{}),e.jsx("div",{className:"p-2",children:e.jsx(_,{variant:"ghost",className:"w-full text-sm",children:"View all notifications"})})]})]})]})},Ve=({children:t,userRole:s,userName:r="User",userEmail:n="user@cosmicsolutions.com",userProfilePicture:a,onProfilePictureUpload:i})=>{const o=sn(),l=zt(),{logout:c}=cn(),[h,d]=kr.useState(!1),[m,f]=kr.useState(a),y=i||(async T=>{try{const L=localStorage.getItem("token"),M=new FormData;M.append("profilePicture",T);const z=await(await fetch("http://localhost:5000/api/profile/picture",{method:"POST",headers:{Authorization:`Bearer ${L}`},body:M})).json();if(z.status==="success")f(`http://localhost:5000/${z.data.profilePicture}`);else throw new Error(z.message||"Failed to upload profile picture")}catch(L){throw L}}),x=T=>T==="super-admin"?"superadmin":T,g={superadmin:{title:"Super Admin",icon:mn,color:"bg-primary text-primary-foreground",navigation:[{title:"Dashboard",href:"/superadmin",icon:yr},{title:"Projects",href:"/superadmin/projects",icon:ke},{title:"Reports",href:"/superadmin/reports",icon:Ie},{title:"Settings",href:"/superadmin/settings",icon:Nt}]},manager:{title:"Manager",icon:Nt,color:"bg-success text-success-foreground",navigation:[{title:"Dashboard",href:"/manager",icon:yr},{title:"My Projects",href:"/manager/projects",icon:ke},{title:"Technicians",href:"/manager/technicians",icon:at},{title:"Tasks",href:"/manager/tasks",icon:Ie}]},technician:{title:"Technician",icon:no,color:"bg-pending text-pending-foreground",navigation:[{title:"Dashboard",href:"/technician",icon:yr},{title:"My Tasks",href:"/technician/tasks",icon:ke}]}},p=x(s),w=g[p];if(!w)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"Invalid User Role"}),e.jsxs("p",{className:"text-muted-foreground mt-2",children:['Role: "',s,'" (type: ',typeof s,")"]}),e.jsxs("p",{className:"text-muted-foreground",children:["Available roles: ",Object.keys(g).join(", ")]}),e.jsx("button",{onClick:()=>window.location.href="/login",className:"mt-4 px-4 py-2 bg-primary text-primary-foreground rounded",children:"Return to Login"})]})});const E=w.icon,N=async()=>{try{await c(),o("/login")}catch{o("/login")}};return e.jsxs("div",{className:"flex h-screen bg-background",children:[h&&e.jsx("div",{className:"mobile-sidebar-overlay",onClick:()=>d(!1)}),e.jsxs("div",{className:U("mobile-sidebar lg:static lg:w-64 lg:transform-none flex flex-col",h?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[e.jsxs("div",{className:"flex items-center justify-between mobile-padding border-b border-sidebar-border",children:[e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fdf520b57241b409c97fe8b1702f73e79%2Fce826268d92b499a98eeb82a92fb89e5?format=webp&width=800",alt:"Cosmic Solutions",className:"h-8 sm:h-10 w-auto max-w-full"}),e.jsx(_,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>d(!1),children:e.jsx(kt,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"mobile-padding border-b border-sidebar-border",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Um,{currentImage:m,userName:r,onImageUpload:y,size:"md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"mobile-text-sm font-medium text-sidebar-foreground truncate",children:r}),e.jsxs(te,{variant:"outline",className:`${w.color} border-0 mobile-text-sm`,children:[e.jsx(E,{className:"h-3 w-3 mr-1"}),w.title]})]})]})}),e.jsx("nav",{className:"flex-1 mobile-padding mobile-space-y",children:w.navigation.map(T=>{const L=T.icon,M=l.pathname===T.href;return e.jsxs(_,{variant:M?"secondary":"ghost",className:U("w-full justify-start mobile-text-sm text-sidebar-foreground hover:text-sidebar-accent-foreground hover:bg-sidebar-accent",M&&"bg-sidebar-accent text-sidebar-accent-foreground"),onClick:()=>{o(T.href),d(!1)},children:[e.jsx(L,{className:"h-4 w-4 mr-3"}),T.title]},T.href)})}),e.jsx("div",{className:"mobile-padding border-t border-sidebar-border",children:e.jsxs(_,{variant:"ghost",className:"w-full justify-start mobile-text-sm text-sidebar-foreground hover:text-sidebar-accent-foreground hover:bg-sidebar-accent",onClick:N,children:[e.jsx(wm,{className:"h-4 w-4 mr-3"}),"Sign Out"]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"mobile-header",children:[e.jsxs("div",{className:"flex items-center mobile-space-x",children:[e.jsx(_,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>d(!0),children:e.jsx(Nm,{className:"h-5 w-5"})}),e.jsx("h1",{className:"mobile-header-title",children:w.navigation.find(T=>T.href===l.pathname)?.title||"Dashboard"})]}),e.jsxs("div",{className:"flex items-center mobile-space-x",children:[e.jsx(Zf,{className:"text-muted-foreground"}),e.jsxs(yo,{children:[e.jsx(jo,{asChild:!0,children:e.jsx(_,{variant:"ghost",className:"relative mobile-avatar rounded-full",children:e.jsxs(Is,{className:"mobile-avatar",children:[e.jsx(Us,{src:m}),e.jsx($s,{children:r.split(" ").map(T=>T[0]).join("")})]})})}),e.jsxs(xn,{className:"w-56",align:"end",forceMount:!0,children:[e.jsx(gn,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"mobile-text-sm font-medium leading-none",children:r}),e.jsx("p",{className:"mobile-text-sm leading-none text-muted-foreground",children:n})]})}),e.jsx(Bs,{}),e.jsx(zr,{onClick:()=>o(`/${p}/settings`),children:"Settings"}),e.jsx(zr,{onClick:N,children:"Sign out"})]})]})]})]}),e.jsxs("main",{className:"mobile-content",children:[e.jsx("div",{className:"lg:hidden h-0 w-0",onClick:()=>d(!1)}),t]})]})]})},Sn=({stats:t,className:s})=>e.jsx("div",{className:U("grid gap-4 md:grid-cols-2 lg:grid-cols-4",s),children:t.map((r,n)=>{const a=r.icon;return e.jsxs(se,{className:"relative overflow-hidden",children:[e.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium text-muted-foreground",children:r.title}),e.jsx(a,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:r.value}),r.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:r.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[r.trend&&e.jsxs("div",{className:U("flex items-center text-xs",r.trend.positive?"text-success":"text-destructive"),children:[e.jsx("span",{className:U("mr-1",r.trend.positive?"text-success":"text-destructive"),children:r.trend.positive?"":""}),r.trend.value,"% ",r.trend.label]}),r.badge&&e.jsx(te,{variant:r.badge.variant||"outline",className:U("text-xs",r.badge.className),children:r.badge.text})]})]})})]},n)})}),Be=u.forwardRef(({className:t,...s},r)=>e.jsx("textarea",{className:U("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s}));Be.displayName="Textarea";const Ze=u.forwardRef(({className:t,...s},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:U("w-full caption-bottom text-sm",t),...s})}));Ze.displayName="Table";const et=u.forwardRef(({className:t,...s},r)=>e.jsx("thead",{ref:r,className:U("[&_tr]:border-b",t),...s}));et.displayName="TableHeader";const tt=u.forwardRef(({className:t,...s},r)=>e.jsx("tbody",{ref:r,className:U("[&_tr:last-child]:border-0",t),...s}));tt.displayName="TableBody";const ep=u.forwardRef(({className:t,...s},r)=>e.jsx("tfoot",{ref:r,className:U("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));ep.displayName="TableFooter";const Ne=u.forwardRef(({className:t,...s},r)=>e.jsx("tr",{ref:r,className:U("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));Ne.displayName="TableRow";const $=u.forwardRef(({className:t,...s},r)=>e.jsx("th",{ref:r,className:U("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));$.displayName="TableHead";const B=u.forwardRef(({className:t,...s},r)=>e.jsx("td",{ref:r,className:U("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s}));B.displayName="TableCell";const tp=u.forwardRef(({className:t,...s},r)=>e.jsx("caption",{ref:r,className:U("mt-4 text-sm text-muted-foreground",t),...s}));tp.displayName="TableCaption";const sp=()=>{const[t,s]=u.useState({managersCount:0,projectsCount:0,completedTasks:0,pendingTasks:0}),[r,n]=u.useState([]),[a,i]=u.useState([]),[o,l]=u.useState(""),[c,h]=u.useState(!1),[d,m]=u.useState(null),[f,y]=u.useState({clientName:"",siteName:"",location:"",mapLink:"",priority:"",deadline:"",description:"",notes:"",assignedManager:"",files:[]}),[x,g]=u.useState({name:"",email:"",password:"",role:""}),[p,w]=u.useState(null),[E,N]=u.useState(!1),[T,L]=u.useState(null),M=S=>{w(S),N(!0)},{socket:C}=Rt(),z=async()=>{const P={Authorization:`Bearer ${localStorage.getItem("token")}`},H=await(await fetch("http://localhost:5000/api/profile",{headers:P})).json();H.status==="success"&&L(H.data)},W=async S=>{const P=localStorage.getItem("token"),j=new FormData;j.append("profilePicture",S),await fetch("http://localhost:5000/api/profile/picture",{method:"POST",headers:{Authorization:`Bearer ${P}`},body:j}),await z()};u.useEffect(()=>{z();const P={Authorization:`Bearer ${localStorage.getItem("token")}`};fetch("http://localhost:5000/api/superadmin/stats",{headers:P}).then(j=>j.json()).then(j=>{j.status==="success"&&s(j.data)}).catch(console.error),fetch("http://localhost:5000/api/superadmin/projects",{headers:P}).then(j=>j.json()).then(j=>{j.status==="success"&&n(Array.isArray(j.data.projects)?j.data.projects:[])}).catch(console.error),fetch("http://localhost:5000/api/superadmin/managers",{headers:P}).then(j=>j.json()).then(j=>{j.status==="success"&&i(j.data)}).catch(console.error),fetch("http://localhost:5000/api/reports/overview",{headers:P}).then(j=>j.json()).then(j=>{j.status==="success"&&m(j.data)}).catch(console.error)},[]),u.useEffect(()=>{if(C)return C.on("project_created",S=>{V.success(`New project "${S.project.siteName}" created and assigned.`)}),C.on("task_assigned",S=>{V.success(`Task "${S.task.title}" assigned to technician.`)}),C.on("task_status_updated",S=>{V(`Task "${S.task.title}" status updated to "${S.task.status}".`),S.project&&n(j=>{const H=j.findIndex(ue=>ue._id===S.project._id||ue.id===S.project._id);if(H!==-1){const ue=[...j];return ue[H]={...ue[H],...S.project},ue}return j});const P=localStorage.getItem("token");fetch("http://localhost:5000/api/superadmin/projects",{headers:{Authorization:`Bearer ${P}`}}).then(j=>j.json()).then(j=>{j.status==="success"&&n(Array.isArray(j.data.projects)?j.data.projects:[])}).catch(console.error),fetch("http://localhost:5000/api/superadmin/stats",{headers:{Authorization:`Bearer ${P}`}}).then(j=>j.json()).then(j=>{j.status==="success"&&s(j.data)}).catch(console.error)}),C.on("report_submitted",S=>{V.success(`Report submitted for task "${S.report.task}".`)}),C.on("project_status_updated",S=>{n(P=>P.map(j=>j._id===S.projectId?{...j,status:S.status}:j)),V.success(`Project status updated to ${S.status}`)}),()=>{C.off("project_created"),C.off("task_assigned"),C.off("task_status_updated"),C.off("report_submitted"),C.off("project_status_updated")}},[C]);const K=r.filter(S=>S.siteName?.toLowerCase().includes(o.toLowerCase())),A=async()=>{if(!f.clientName||!f.siteName||!f.location||!f.assignedManager){alert("Please fill in all required fields.");return}const S=localStorage.getItem("token");let P,j;if(f.files&&f.files.length>0){const H=new FormData;Object.entries(f).forEach(([ue,Ce])=>{ue==="files"?Ce.forEach(v=>H.append("files",v)):H.append(ue,Ce)}),P=await fetch("http://localhost:5000/api/superadmin/projects",{method:"POST",headers:{Authorization:`Bearer ${S}`},body:H})}else P=await fetch("http://localhost:5000/api/superadmin/projects",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify(f)});j=await P.json(),P.ok&&j.status==="success"?(n([...r,j.data]),y({clientName:"",siteName:"",location:"",mapLink:"",priority:"",deadline:"",description:"",notes:"",assignedManager:"",files:[]}),h(!1),alert(" Project created successfully!")):alert(`Failed to create project: ${j.message||"Unknown error"}`)},k=S=>{const P=Array.from(S.target.files||[]);y({...f,files:[...f.files,...P]})},R=S=>{y({...f,files:f.files.filter((P,j)=>j!==S)})},Q=[{title:"Active Managers",value:t.managersCount,description:"Currently managing projects",icon:at,badge:t.managersCount>0?{text:"Online",variant:"outline",className:"bg-success text-success-foreground"}:void 0},{title:"Total Projects",value:t.projectsCount,description:"Across all locations",icon:ke},{title:"Completed Tasks",value:t.completedTasks,description:"Successfully finished",icon:qe},{title:"Pending Tasks",value:t.pendingTasks,description:"In progress or assigned",icon:Ms}],[he,Y]=u.useState(!1),[Se,ne]=u.useState(!1),[oe,ye]=u.useState(null),D=async()=>{if(!oe)return;const S=localStorage.getItem("token"),P=r.flatMap(j=>j.tasks||[]).find(j=>(j._id||j.id)===oe);if(P)try{const j=await fetch("http://localhost:5000/api/reports/task-pdf",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({tasks:[P._id]})});if(!j.ok)throw new Error("Failed to generate PDF");const H=await j.blob(),ue=window.URL.createObjectURL(H),Ce=document.createElement("a");Ce.href=ue,Ce.setAttribute("download",`${P.title.replace(/\s+/g,"_")}_report.pdf`),document.body.appendChild(Ce),Ce.click(),Ce.remove(),window.URL.revokeObjectURL(ue)}catch(j){alert("Failed to download task report: "+j.message)}};return e.jsx(Ve,{userRole:"superadmin",userName:T?.name||"System Administrator",userEmail:T?.email||"admin@cosmicsolutions.com",userProfilePicture:T?.profilePicture?`http://localhost:5000/${T.profilePicture}`:void 0,onProfilePictureUpload:W,children:e.jsxs("div",{className:"mobile-container mobile-space-y max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mobile-text-2xl font-bold text-foreground",children:"System Overview"}),e.jsx("p",{className:"text-muted-foreground mt-1 mobile-text-base",children:"Manage your entire organization from this central dashboard."})]}),e.jsx("div",{className:"mobile-button-group",children:e.jsxs(_,{onClick:()=>h(!0),className:"mobile-button",children:[e.jsx(wt,{className:"mr-2 h-4 w-4"}),"New Project"]})})]}),e.jsx("div",{className:"mobile-button-group",children:e.jsxs(_,{variant:"outline",onClick:()=>ne(!0),className:"mobile-button",children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"})," Task Report"]})}),e.jsx(Sn,{stats:Q}),e.jsxs("div",{className:"mobile-grid-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(se,{children:[e.jsx(ae,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(ie,{className:"mobile-text-lg",children:"Project Management"}),e.jsx(Le,{className:"mobile-text-sm",children:"All projects across the organization"})]}),e.jsxs("div",{className:"mobile-action-buttons",children:[e.jsxs("div",{className:"mobile-search",children:[e.jsx(At,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ee,{placeholder:"Search projects...",value:o,onChange:S=>l(S.target.value),className:"mobile-search-input"})]}),e.jsx(_,{variant:"outline",size:"sm",children:e.jsx(hn,{className:"h-4 w-4"})})]})]})}),e.jsx(re,{children:K.length===0?e.jsxs("div",{className:"mobile-empty-state",children:[e.jsx(ke,{className:"mobile-empty-state-icon text-muted-foreground"}),e.jsx("h3",{className:"mobile-empty-state-title",children:"No projects yet"}),e.jsx("p",{className:"mobile-empty-state-description",children:"Create your first project to get started."}),e.jsxs(_,{onClick:()=>h(!0),className:"mt-4 mobile-button",children:[e.jsx(wt,{className:"mr-2 h-4 w-4"}),"Create Project"]})]}):e.jsx("div",{className:"responsive-table",children:e.jsxs(Ze,{className:"min-w-[700px]",children:[e.jsx(et,{children:e.jsxs(Ne,{children:[e.jsx($,{children:"Project"}),e.jsx($,{children:"Client"}),e.jsx($,{children:"Location"}),e.jsx($,{children:"Priority"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Actions"})]})}),e.jsx(tt,{children:K.map(S=>e.jsxs(Ne,{children:[e.jsx(B,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:S.siteName}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Created"," ",new Date(S.createdAt).toLocaleDateString()]})]})}),e.jsx(B,{children:S.clientName}),e.jsx(B,{className:"max-w-32 truncate",children:S.location}),e.jsx(B,{children:e.jsx(te,{variant:"outline",className:S.priority==="urgent"?"bg-destructive text-destructive-foreground":S.priority==="high"?"bg-orange-500 text-white":S.priority==="medium"?"bg-pending text-pending-foreground":"bg-muted text-muted-foreground",children:S.priority?.toUpperCase()})}),e.jsx(B,{children:e.jsx(te,{variant:"outline",className:"bg-blue-500 text-white",children:S.status})}),e.jsx(B,{children:e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>M(S),children:[e.jsx(ft,{className:"h-3 w-3 mr-1"}),"View"]})})]},S._id))})]})})})]})}),e.jsx("div",{className:"lg:col-span-2 mt-6",children:e.jsxs(se,{children:[e.jsx(ae,{children:e.jsx(ie,{children:"All Tasks"})}),e.jsx(re,{children:r.length===0?e.jsx("div",{children:"No tasks available yet."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ze,{className:"min-w-[700px]",children:[e.jsx(et,{children:e.jsxs(Ne,{children:[e.jsx($,{children:"Title"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Technician"}),e.jsx($,{children:"Project"}),e.jsx($,{children:"Deadline"}),e.jsx($,{children:"Status Timeline"})]})}),e.jsx(tt,{children:r.flatMap(S=>(S.tasks||[]).map(P=>e.jsxs(Ne,{children:[e.jsx(B,{children:P.title}),e.jsx(B,{children:P.status}),e.jsx(B,{children:P.assignedTo?.name||"N/A"}),e.jsx(B,{children:S.siteName||"N/A"}),e.jsx(B,{children:P.deadline?new Date(P.deadline).toLocaleDateString():"No deadline"}),e.jsx(B,{children:P.statusLog&&P.statusLog.length>0?e.jsx("ul",{className:"text-xs space-y-1",children:P.statusLog.map((j,H)=>e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:j.status}),j.timestamp&&e.jsxs("span",{children:[" (",new Date(j.timestamp).toLocaleString(),")"]}),j.comment&&e.jsxs("span",{children:[": ",j.comment]})]},H))}):e.jsx("span",{children:"No history"})})]},P._id||P.id)))})]})})})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs(se,{children:[e.jsx(ae,{children:e.jsxs(ie,{className:"flex items-center space-x-2",children:[e.jsx(ro,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Quick Actions"})]})}),e.jsx(re,{children:e.jsx("div",{className:"grid gap-3",children:e.jsxs(_,{variant:"outline",className:"justify-start h-12 w-full",onClick:()=>h(!0),children:[e.jsx(wt,{className:"mr-2 h-4 w-4"}),"Create New Project"]})})})]})})]}),e.jsx(be,{open:c,onOpenChange:h,children:e.jsxs(fe,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"Create New Project"}),e.jsx(ge,{children:"Add a comprehensive project with all necessary details."})]}),e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"client-name",children:"Client Name *"}),e.jsx(ee,{id:"client-name",placeholder:"Enter client company name",value:f.clientName,onChange:S=>y({...f,clientName:S.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"site-name",children:"Site Name *"}),e.jsx(ee,{id:"site-name",placeholder:"Enter project/site name",value:f.siteName,onChange:S=>y({...f,siteName:S.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"location",children:"Location (Address) *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ee,{id:"location",placeholder:"Enter complete address",value:f.location,onChange:S=>y({...f,location:S.target.value}),className:"flex-1"}),e.jsx(_,{type:"button",variant:"outline",disabled:!f.location,children:e.jsx(Ft,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"map-link",children:"Map Link (Optional)"}),e.jsx(ee,{id:"map-link",placeholder:"Paste Google Maps link or coordinates",value:f.mapLink,onChange:S=>y({...f,mapLink:S.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"assigned-manager",children:"Assign Manager *"}),e.jsxs(Oe,{value:f.assignedManager,onValueChange:S=>y({...f,assignedManager:S}),children:[e.jsx(Te,{children:e.jsx(De,{placeholder:"Select manager to assign this project"})}),e.jsx(Pe,{children:a.map(S=>e.jsxs(q,{value:S._id||S.id,children:[S.name," - ",S.department||""]},S._id||S.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"priority",children:"Priority"}),e.jsxs(Oe,{value:f.priority,onValueChange:S=>y({...f,priority:S}),children:[e.jsx(Te,{children:e.jsx(De,{placeholder:"Select priority level"})}),e.jsxs(Pe,{children:[e.jsx(q,{value:"low",children:"Low"}),e.jsx(q,{value:"medium",children:"Medium"}),e.jsx(q,{value:"high",children:"High"}),e.jsx(q,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"deadline",children:"Deadline"}),e.jsx(ee,{id:"deadline",type:"date",value:f.deadline,onChange:S=>y({...f,deadline:S.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"description",children:"Task Description"}),e.jsx(Be,{id:"description",placeholder:"Detailed description of the project requirements and scope",value:f.description,onChange:S=>y({...f,description:S.target.value}),rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"notes",children:"Notes"}),e.jsx(Be,{id:"notes",placeholder:"Additional notes, special instructions, or requirements",value:f.notes,onChange:S=>y({...f,notes:S.target.value}),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Project Files"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(_,{type:"button",variant:"outline",onClick:()=>document.getElementById("project-files")?.click(),className:"w-full",children:[e.jsx(nt,{className:"mr-2 h-4 w-4"}),"Upload Files (Plans, Specifications, etc.)"]}),e.jsx("input",{id:"project-files",type:"file",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.dwg",onChange:k,className:"hidden"}),f.files.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"text-sm",children:"Uploaded Files:"}),f.files.map((S,P)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded-md",children:[e.jsx("span",{className:"text-sm truncate",children:S.name}),e.jsx(_,{type:"button",variant:"ghost",size:"sm",onClick:()=>R(P),children:""})]},P))]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end",children:[e.jsx(_,{variant:"outline",onClick:()=>h(!1),className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(_,{onClick:A,className:"w-full sm:w-auto",children:"Create Project"})]})]})}),e.jsx(be,{open:E,onOpenChange:N,children:e.jsxs(fe,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"Project Details"}),e.jsx(ge,{children:"Detailed information about the selected project."})]}),p&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Site Name:"})," ",p.siteName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Client Name:"})," ",p.clientName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Location:"})," ",p.location]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Manager:"})," ",p.assignedManagerName||"Unassigned"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Priority:"})," ",p.priority]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Status:"})," ",p.status]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Deadline:"})," ",p.deadline?new Date(p.deadline).toLocaleDateString():"No deadline"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Description:"})," ",p.description]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Notes:"})," ",p.notes]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Created At:"})," ",p.createdAt?new Date(p.createdAt).toLocaleDateString():""]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",p.updatedAt?new Date(p.updatedAt).toLocaleDateString():""]})]})]})}),d&&e.jsxs("div",{className:"mt-8 p-4 bg-muted rounded-md",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Project Report Overview"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Total Projects:"})," ",d.totalProjects]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Completion Rate:"})," ",(d.completionRate*100).toFixed(2),"%"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Average Duration:"})," ",d.averageDuration," ","days"]})]})})]}),e.jsx(be,{open:Se,onOpenChange:ne,children:e.jsxs(fe,{className:"mobile-dialog-content max-w-[95vw] sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(xe,{className:"mobile-text-lg",children:"Task Report"}),e.jsx(ge,{className:"mobile-text-sm",children:"View all tasks updated by technicians, including attachments and descriptions. You can also download this report as a PDF."})]}),e.jsx("div",{className:"mobile-space-y",children:r.length===0?e.jsxs("div",{className:"mobile-empty-state",children:[e.jsx("div",{className:"mobile-empty-state-icon",children:""}),e.jsx("h3",{className:"mobile-empty-state-title",children:"No tasks available"}),e.jsx("p",{className:"mobile-empty-state-description",children:"There are no tasks to display in the report."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"hidden sm:block",children:e.jsx("div",{className:"responsive-table",children:e.jsxs("table",{className:"w-full border-collapse bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 text-center border-b border-gray-200 py-3 mobile-text-sm font-medium",children:"Select"}),e.jsx("th",{className:"border-b border-gray-200 py-3 mobile-text-sm font-medium text-left",children:"Title"}),e.jsx("th",{className:"border-b border-gray-200 py-3 mobile-text-sm font-medium text-left",children:"Status"}),e.jsx("th",{className:"border-b border-gray-200 py-3 mobile-text-sm font-medium text-left",children:"Attachments"}),e.jsx("th",{className:"border-b border-gray-200 py-3 mobile-text-sm font-medium text-left",children:"Description"})]})}),e.jsx("tbody",{children:r.flatMap(S=>(S.tasks||[]).map(P=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"text-center border-b border-gray-200 py-3",children:e.jsx("input",{type:"radio",name:"selectedTaskReport",checked:oe===(P._id||P.id),onChange:()=>ye(P._id||P.id),className:"w-4 h-4"})}),e.jsx("td",{className:"border-b border-gray-200 py-3 mobile-text-sm",children:P.title}),e.jsx("td",{className:"border-b border-gray-200 py-3 mobile-text-sm",children:e.jsx(te,{variant:"outline",className:"capitalize",children:P.status})}),e.jsx("td",{className:"border-b border-gray-200 py-3 mobile-text-sm",children:P.files&&P.files.length>0?e.jsx("ul",{className:"space-y-1",children:P.files.map((j,H)=>e.jsx("li",{children:e.jsx("a",{href:j.url||`http://localhost:5000/${j.path}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline text-xs",children:j.originalName||j.name||j.filename||"Attachment"})},H))}):e.jsx("span",{className:"text-gray-500 text-xs",children:"No attachments"})}),e.jsx("td",{className:"border-b border-gray-200 py-3 mobile-text-sm text-gray-600",children:P.description||"-"})]},P._id||P.id)))})]})})}),e.jsx("div",{className:"sm:hidden space-y-4",children:r.flatMap(S=>(S.tasks||[]).map(P=>e.jsx("div",{className:`mobile-card p-4 border-2 transition-colors ${oe===(P._id||P.id)?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>ye(P._id||P.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"radio",name:"selectedTaskReport",checked:oe===(P._id||P.id),onChange:()=>ye(P._id||P.id),className:"w-4 h-4 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"mobile-text-base font-medium text-gray-900 truncate",children:P.title}),e.jsx(te,{variant:"outline",className:"capitalize mobile-text-xs",children:P.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"mobile-text-xs font-medium text-gray-500",children:"Description:"}),e.jsx("p",{className:"mobile-text-sm text-gray-700 mt-1",children:P.description||"No description available"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"mobile-text-xs font-medium text-gray-500",children:"Attachments:"}),P.files&&P.files.length>0?e.jsx("div",{className:"mt-1 space-y-1",children:P.files.map((j,H)=>e.jsx("div",{children:e.jsx("a",{href:j.url||`http://localhost:5000/${j.path}`,target:"_blank",rel:"noopener noreferrer",className:"mobile-text-xs text-blue-600 hover:text-blue-800 underline break-all",children:j.originalName||j.name||j.filename||"Attachment"})},H))}):e.jsx("p",{className:"mobile-text-xs text-gray-500 mt-1",children:"No attachments"})]})]})]})]})},P._id||P.id)))})]})}),e.jsxs("div",{className:"mobile-button-group mt-6",children:[e.jsx(_,{variant:"outline",onClick:()=>ne(!1),className:"mobile-button",children:"Close"}),e.jsxs(_,{onClick:D,disabled:!oe,className:"mobile-button",children:[e.jsx(sr,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]})]})})]})})};var ar="Tabs",[rp,ug]=os(ar,[Ya]),Lo=Ya(),[np,kn]=rp(ar),Mo=u.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...h}=t,d=Qa(l),[m,f]=Jl({prop:n,onChange:a,defaultProp:i??"",caller:ar});return e.jsx(np,{scope:r,baseId:Ql(),value:m,onValueChange:f,orientation:o,dir:d,activationMode:c,children:e.jsx(Ee.div,{dir:d,"data-orientation":o,...h,ref:s})})});Mo.displayName=ar;var Fo="TabsList",Io=u.forwardRef((t,s)=>{const{__scopeTabs:r,loop:n=!0,...a}=t,i=kn(Fo,r),o=Lo(r);return e.jsx(Gl,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:e.jsx(Ee.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:s})})});Io.displayName=Fo;var Uo="TabsTrigger",$o=u.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=t,o=kn(Uo,r),l=Lo(r),c=qo(o.baseId,n),h=Vo(o.baseId,n),d=n===o.value;return e.jsx(Kl,{asChild:!0,...l,focusable:!a,active:d,children:e.jsx(Ee.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":h,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:s,onMouseDown:Ae(t.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?o.onValueChange(n):m.preventDefault()}),onKeyDown:Ae(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(n)}),onFocus:Ae(t.onFocus,()=>{const m=o.activationMode!=="manual";!d&&!a&&m&&o.onValueChange(n)})})})});$o.displayName=Uo;var Bo="TabsContent",zo=u.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=t,l=kn(Bo,r),c=qo(l.baseId,n),h=Vo(l.baseId,n),d=n===l.value,m=u.useRef(d);return u.useEffect(()=>{const f=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(f)},[]),e.jsx($t,{present:a||d,children:({present:f})=>e.jsx(Ee.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:h,tabIndex:0,...o,ref:s,style:{...t.style,animationDuration:m.current?"0s":void 0},children:f&&i})})});zo.displayName=Bo;function qo(t,s){return`${t}-trigger-${s}`}function Vo(t,s){return`${t}-content-${s}`}var ap=Mo,Ho=Io,Wo=$o,Go=zo;const ip=ap,Ko=u.forwardRef(({className:t,...s},r)=>e.jsx(Ho,{ref:r,className:U("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));Ko.displayName=Ho.displayName;const qr=u.forwardRef(({className:t,...s},r)=>e.jsx(Wo,{ref:r,className:U("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));qr.displayName=Wo.displayName;const Vr=u.forwardRef(({className:t,...s},r)=>e.jsx(Go,{ref:r,className:U("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Vr.displayName=Go.displayName;const op=()=>{const[t,s]=u.useState([]),[r,n]=u.useState([]),[a,i]=u.useState(!1),[o,l]=u.useState(""),[c,h]=u.useState({name:"",email:"",phone:"",department:"",role:"",password:""}),[d,m]=u.useState(!1),[f,y]=u.useState(null),[x,g]=u.useState(!1);u.useEffect(()=>{p()},[]);const p=async()=>{const N=localStorage.getItem("token");if(N){m(!0);try{const T=await fetch("http://localhost:5000/api/superadmin/managers",{headers:{Authorization:`Bearer ${N}`}});if(T.ok){const M=await T.json();M.status==="success"&&Array.isArray(M.data)?s(M.data):s([])}else s([]);const L=await fetch("http://localhost:5000/api/superadmin/technicians",{headers:{Authorization:`Bearer ${N}`}});if(L.ok){const M=await L.json();M.status==="success"&&Array.isArray(M.data)?n(M.data):n([])}else n([])}catch{s([]),n([])}finally{m(!1)}}},w=async()=>{if(!c.name||!c.email||!c.role||!c.password){alert("Please fill in all required fields");return}const N=localStorage.getItem("token");if(N){m(!0);try{const T=await fetch("http://localhost:5000/api/users",{method:"POST",headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"},body:JSON.stringify(c)}),L=await T.json();T.ok&&L.status==="success"?(i(!1),h({name:"",email:"",phone:"",department:"",role:"",password:""}),p(),y({email:c.email,role:c.role,password:c.password}),g(!0)):alert(`Failed to add user: ${L.message||"Unknown error"}`)}catch{alert("Failed to add user. Please try again.")}finally{m(!1)}}},E=async(N,T)=>{if(!window.confirm("Are you sure you want to delete this user?"))return;const L=localStorage.getItem("token");if(L){m(!0);try{const M=await fetch(`http://localhost:5000/api/users/${N}`,{method:"DELETE",headers:{Authorization:`Bearer ${L}`}}),C=await M.json();M.ok&&C.status==="success"?(p(),alert("User deleted successfully!")):alert(`Failed to delete user: ${C.message||"Unknown error"}`)}catch{alert("Failed to delete user. Please try again.")}finally{m(!1)}}};return e.jsxs(Ve,{userRole:"super-admin",userName:"System Administrator",userEmail:"admin@cosmicsolutions.com",children:[e.jsxs("div",{className:"p-4 lg:p-6 space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-foreground",children:"System Settings"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage users and system configurations."})]}),e.jsxs(ip,{defaultValue:"users",className:"space-y-6",children:[e.jsxs(Ko,{className:"grid w-full grid-cols-2",children:[e.jsx(qr,{value:"users",children:"Users"}),e.jsx(qr,{value:"permissions",children:"Permissions"})]}),e.jsxs(Vr,{value:"users",className:"space-y-6",children:[e.jsxs(se,{children:[e.jsx(ae,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(at,{className:"h-5 w-5"}),"Managers"]}),e.jsx(Le,{children:"Manage project managers and their access"})]}),e.jsxs(_,{onClick:()=>{l("manager"),h({...c,role:"manager"}),i(!0)},children:[e.jsx(wt,{className:"mr-2 h-4 w-4"}),"Add Manager"]})]})}),e.jsx(re,{children:t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(at,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No managers yet"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Add your first manager to get started."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ze,{children:[e.jsx(et,{children:e.jsxs(Ne,{children:[e.jsx($,{children:"Name"}),e.jsx($,{children:"Email"}),e.jsx($,{children:"Department"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Actions"})]})}),e.jsx(tt,{children:t.map(N=>e.jsxs(Ne,{children:[e.jsx(B,{className:"font-medium",children:N.name}),e.jsx(B,{children:N.email}),e.jsx(B,{children:N.department||"N/A"}),e.jsx(B,{children:e.jsx(te,{variant:"outline",className:"bg-success text-success-foreground",children:N.status})}),e.jsx(B,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",children:e.jsx(ia,{className:"h-3 w-3"})}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>E(N._id),children:e.jsx(It,{className:"h-3 w-3"})})]})})]},N._id))})]})})})]}),e.jsxs(se,{children:[e.jsx(ae,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"h-5 w-5"}),"Technicians"]}),e.jsx(Le,{children:"Manage field technicians and their access"})]}),e.jsxs(_,{onClick:()=>{l("technician"),h({...c,role:"technician"}),i(!0)},children:[e.jsx(wt,{className:"mr-2 h-4 w-4"}),"Add Technician"]})]})}),e.jsx(re,{children:r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Nt,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No technicians yet"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Add your first technician to get started."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ze,{children:[e.jsx(et,{children:e.jsxs(Ne,{children:[e.jsx($,{children:"Name"}),e.jsx($,{children:"Email"}),e.jsx($,{children:"Department"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Actions"})]})}),e.jsx(tt,{children:r.map(N=>e.jsxs(Ne,{children:[e.jsx(B,{className:"font-medium",children:N.name}),e.jsx(B,{children:N.email}),e.jsx(B,{children:N.department||"N/A"}),e.jsx(B,{children:e.jsx(te,{variant:"outline",className:"bg-success text-success-foreground",children:N.status})}),e.jsx(B,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",children:e.jsx(ia,{className:"h-3 w-3"})}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>E(N._id),children:e.jsx(It,{className:"h-3 w-3"})})]})})]},N._id))})]})})})]})]}),e.jsx(Vr,{value:"permissions",className:"space-y-6",children:e.jsxs(se,{children:[e.jsxs(ae,{children:[e.jsx(ie,{children:"Role Permissions"}),e.jsx(Le,{children:"Configure access controls for different user roles"})]}),e.jsx(re,{children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2 mb-3",children:[e.jsx(mn,{className:"h-4 w-4"}),"Super Admin Permissions"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:" Full system access and control"}),e.jsx("li",{children:" Create, edit, and delete projects"}),e.jsx("li",{children:" Manage all users (Managers & Technicians)"}),e.jsx("li",{children:" Configure system settings"}),e.jsx("li",{children:" Generate comprehensive reports"}),e.jsx("li",{children:" Role and permission management"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2 mb-3",children:[e.jsx(at,{className:"h-4 w-4"}),"Manager Permissions"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:" View assigned projects only"}),e.jsx("li",{children:" Create and assign tasks to technicians"}),e.jsx("li",{children:" Monitor team performance"}),e.jsx("li",{children:" Generate team reports"}),e.jsx("li",{children:" Update task status and progress"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2 mb-3",children:[e.jsx(Nt,{className:"h-4 w-4"}),"Technician Permissions"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:" View assigned tasks only"}),e.jsx("li",{children:" Update task status and progress"}),e.jsx("li",{children:" Upload completion proof and files"}),e.jsx("li",{children:" Submit comments and delay reports"}),e.jsx("li",{children:" Access task history and details"})]})]})]})})})]})})]}),e.jsx(be,{open:a,onOpenChange:i,children:e.jsxs(fe,{className:"sm:max-w-[500px]",children:[e.jsxs(pe,{children:[e.jsxs(xe,{children:["Add New ",o==="manager"?"Manager":"Technician"]}),e.jsxs(ge,{children:["Add a new ",o," to your organization."]})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"user-name",children:"Full Name *"}),e.jsx(ee,{id:"user-name",placeholder:"Enter full name",value:c.name,onChange:N=>h({...c,name:N.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"user-email",children:"Email Address *"}),e.jsx(ee,{id:"user-email",type:"email",placeholder:"Enter email address",value:c.email,onChange:N=>h({...c,email:N.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"user-password",children:"Password *"}),e.jsx(ee,{id:"user-password",type:"password",placeholder:"Enter password",value:c.password,onChange:N=>h({...c,password:N.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"user-department",children:"Department"}),e.jsx(ee,{id:"user-department",placeholder:"Enter department",value:c.department,onChange:N=>h({...c,department:N.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"user-phone",children:"Phone"}),e.jsx(ee,{id:"user-phone",placeholder:"Enter phone number",value:c.phone,onChange:N=>h({...c,phone:N.target.value})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end",children:[e.jsx(_,{variant:"outline",onClick:()=>i(!1),className:"w-full sm:w-auto",children:"Cancel"}),e.jsxs(_,{onClick:w,className:"w-full sm:w-auto",children:["Add ",o==="manager"?"Manager":"Technician"]})]})]})})]}),e.jsx(be,{open:x,onOpenChange:g,children:e.jsxs(fe,{className:"sm:max-w-[400px]",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"User Credentials"}),e.jsx(ge,{children:"Please copy and share these credentials with the new user. They can log in immediately."})]}),f&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",f.email]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Role:"})," ",f.role.charAt(0).toUpperCase()+f.role.slice(1)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Password:"})," ",f.password]})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx(_,{onClick:()=>g(!1),children:"Close"})})]})})]})};function Jo(t,s){return function(){return t.apply(s,arguments)}}const{toString:lp}=Object.prototype,{getPrototypeOf:Cn}=Object,{iterator:ir,toStringTag:Qo}=Symbol,or=(t=>s=>{const r=lp.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Qe=t=>(t=t.toLowerCase(),s=>or(s)===t),lr=t=>s=>typeof s===t,{isArray:Vt}=Array,is=lr("undefined");function us(t){return t!==null&&!is(t)&&t.constructor!==null&&!is(t.constructor)&&Ue(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Yo=Qe("ArrayBuffer");function cp(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Yo(t.buffer),s}const dp=lr("string"),Ue=lr("function"),Xo=lr("number"),hs=t=>t!==null&&typeof t=="object",up=t=>t===!0||t===!1,Rs=t=>{if(or(t)!=="object")return!1;const s=Cn(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Qo in t)&&!(ir in t)},hp=t=>{if(!hs(t)||us(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},mp=Qe("Date"),fp=Qe("File"),pp=Qe("Blob"),xp=Qe("FileList"),gp=t=>hs(t)&&Ue(t.pipe),yp=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||Ue(t.append)&&((s=or(t))==="formdata"||s==="object"&&Ue(t.toString)&&t.toString()==="[object FormData]"))},jp=Qe("URLSearchParams"),[bp,vp,wp,Np]=["ReadableStream","Request","Response","Headers"].map(Qe),Sp=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ms(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,a;if(typeof t!="object"&&(t=[t]),Vt(t))for(n=0,a=t.length;n<a;n++)s.call(null,t[n],n,t);else{if(us(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let l;for(n=0;n<o;n++)l=i[n],s.call(null,t[l],l,t)}}function Zo(t,s){if(us(t))return null;s=s.toLowerCase();const r=Object.keys(t);let n=r.length,a;for(;n-- >0;)if(a=r[n],s===a.toLowerCase())return a;return null}const bt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,el=t=>!is(t)&&t!==bt;function Hr(){const{caseless:t}=el(this)&&this||{},s={},r=(n,a)=>{const i=t&&Zo(s,a)||a;Rs(s[i])&&Rs(n)?s[i]=Hr(s[i],n):Rs(n)?s[i]=Hr({},n):Vt(n)?s[i]=n.slice():s[i]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&ms(arguments[n],r);return s}const kp=(t,s,r,{allOwnKeys:n}={})=>(ms(s,(a,i)=>{r&&Ue(a)?t[i]=Jo(a,r):t[i]=a},{allOwnKeys:n}),t),Cp=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Tp=(t,s,r,n)=>{t.prototype=Object.create(s.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},Pp=(t,s,r,n)=>{let a,i,o;const l={};if(s=s||{},t==null)return s;do{for(a=Object.getOwnPropertyNames(t),i=a.length;i-- >0;)o=a[i],(!n||n(o,t,s))&&!l[o]&&(s[o]=t[o],l[o]=!0);t=r!==!1&&Cn(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},Ep=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const n=t.indexOf(s,r);return n!==-1&&n===r},Rp=t=>{if(!t)return null;if(Vt(t))return t;let s=t.length;if(!Xo(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},Ap=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&Cn(Uint8Array)),_p=(t,s)=>{const n=(t&&t[ir]).call(t);let a;for(;(a=n.next())&&!a.done;){const i=a.value;s.call(t,i[0],i[1])}},Op=(t,s)=>{let r;const n=[];for(;(r=t.exec(s))!==null;)n.push(r);return n},Dp=Qe("HTMLFormElement"),Lp=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),fa=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),Mp=Qe("RegExp"),tl=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),n={};ms(r,(a,i)=>{let o;(o=s(a,i,t))!==!1&&(n[i]=o||a)}),Object.defineProperties(t,n)},Fp=t=>{tl(t,(s,r)=>{if(Ue(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Ue(n)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Ip=(t,s)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return Vt(t)?n(t):n(String(t).split(s)),r},Up=()=>{},$p=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function Bp(t){return!!(t&&Ue(t.append)&&t[Qo]==="FormData"&&t[ir])}const zp=t=>{const s=new Array(10),r=(n,a)=>{if(hs(n)){if(s.indexOf(n)>=0)return;if(us(n))return n;if(!("toJSON"in n)){s[a]=n;const i=Vt(n)?[]:{};return ms(n,(o,l)=>{const c=r(o,a+1);!is(c)&&(i[l]=c)}),s[a]=void 0,i}}return n};return r(t,0)},qp=Qe("AsyncFunction"),Vp=t=>t&&(hs(t)||Ue(t))&&Ue(t.then)&&Ue(t.catch),sl=((t,s)=>t?setImmediate:s?((r,n)=>(bt.addEventListener("message",({source:a,data:i})=>{a===bt&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),bt.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ue(bt.postMessage)),Hp=typeof queueMicrotask<"u"?queueMicrotask.bind(bt):typeof process<"u"&&process.nextTick||sl,Wp=t=>t!=null&&Ue(t[ir]),b={isArray:Vt,isArrayBuffer:Yo,isBuffer:us,isFormData:yp,isArrayBufferView:cp,isString:dp,isNumber:Xo,isBoolean:up,isObject:hs,isPlainObject:Rs,isEmptyObject:hp,isReadableStream:bp,isRequest:vp,isResponse:wp,isHeaders:Np,isUndefined:is,isDate:mp,isFile:fp,isBlob:pp,isRegExp:Mp,isFunction:Ue,isStream:gp,isURLSearchParams:jp,isTypedArray:Ap,isFileList:xp,forEach:ms,merge:Hr,extend:kp,trim:Sp,stripBOM:Cp,inherits:Tp,toFlatObject:Pp,kindOf:or,kindOfTest:Qe,endsWith:Ep,toArray:Rp,forEachEntry:_p,matchAll:Op,isHTMLForm:Dp,hasOwnProperty:fa,hasOwnProp:fa,reduceDescriptors:tl,freezeMethods:Fp,toObjectSet:Ip,toCamelCase:Lp,noop:Up,toFiniteNumber:$p,findKey:Zo,global:bt,isContextDefined:el,isSpecCompliantForm:Bp,toJSONObject:zp,isAsyncFn:qp,isThenable:Vp,setImmediate:sl,asap:Hp,isIterable:Wp};function G(t,s,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}b.inherits(G,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:b.toJSONObject(this.config),code:this.code,status:this.status}}});const rl=G.prototype,nl={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{nl[t]={value:t}});Object.defineProperties(G,nl);Object.defineProperty(rl,"isAxiosError",{value:!0});G.from=(t,s,r,n,a,i)=>{const o=Object.create(rl);return b.toFlatObject(t,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),G.call(o,t.message,s,r,n,a),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const Gp=null;function Wr(t){return b.isPlainObject(t)||b.isArray(t)}function al(t){return b.endsWith(t,"[]")?t.slice(0,-2):t}function pa(t,s,r){return t?t.concat(s).map(function(a,i){return a=al(a),!r&&i?"["+a+"]":a}).join(r?".":""):s}function Kp(t){return b.isArray(t)&&!t.some(Wr)}const Jp=b.toFlatObject(b,{},null,function(s){return/^is[A-Z]/.test(s)});function cr(t,s,r){if(!b.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=b.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,p){return!b.isUndefined(p[g])});const n=r.metaTokens,a=r.visitor||d,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&b.isSpecCompliantForm(s);if(!b.isFunction(a))throw new TypeError("visitor must be a function");function h(x){if(x===null)return"";if(b.isDate(x))return x.toISOString();if(b.isBoolean(x))return x.toString();if(!c&&b.isBlob(x))throw new G("Blob is not supported. Use a Buffer instead.");return b.isArrayBuffer(x)||b.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,g,p){let w=x;if(x&&!p&&typeof x=="object"){if(b.endsWith(g,"{}"))g=n?g:g.slice(0,-2),x=JSON.stringify(x);else if(b.isArray(x)&&Kp(x)||(b.isFileList(x)||b.endsWith(g,"[]"))&&(w=b.toArray(x)))return g=al(g),w.forEach(function(N,T){!(b.isUndefined(N)||N===null)&&s.append(o===!0?pa([g],T,i):o===null?g:g+"[]",h(N))}),!1}return Wr(x)?!0:(s.append(pa(p,g,i),h(x)),!1)}const m=[],f=Object.assign(Jp,{defaultVisitor:d,convertValue:h,isVisitable:Wr});function y(x,g){if(!b.isUndefined(x)){if(m.indexOf(x)!==-1)throw Error("Circular reference detected in "+g.join("."));m.push(x),b.forEach(x,function(w,E){(!(b.isUndefined(w)||w===null)&&a.call(s,w,b.isString(E)?E.trim():E,g,f))===!0&&y(w,g?g.concat(E):[E])}),m.pop()}}if(!b.isObject(t))throw new TypeError("data must be an object");return y(t),s}function xa(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return s[n]})}function Tn(t,s){this._pairs=[],t&&cr(t,this,s)}const il=Tn.prototype;il.append=function(s,r){this._pairs.push([s,r])};il.toString=function(s){const r=s?function(n){return s.call(this,n,xa)}:xa;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function Qp(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ol(t,s,r){if(!s)return t;const n=r&&r.encode||Qp;b.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(s,r):i=b.isURLSearchParams(s)?s.toString():new Tn(s,r).toString(n),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class ga{constructor(){this.handlers=[]}use(s,r,n){return this.handlers.push({fulfilled:s,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){b.forEach(this.handlers,function(n){n!==null&&s(n)})}}const ll={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Yp=typeof URLSearchParams<"u"?URLSearchParams:Tn,Xp=typeof FormData<"u"?FormData:null,Zp=typeof Blob<"u"?Blob:null,ex={isBrowser:!0,classes:{URLSearchParams:Yp,FormData:Xp,Blob:Zp},protocols:["http","https","file","blob","url","data"]},Pn=typeof window<"u"&&typeof document<"u",Gr=typeof navigator=="object"&&navigator||void 0,tx=Pn&&(!Gr||["ReactNative","NativeScript","NS"].indexOf(Gr.product)<0),sx=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",rx=Pn&&window.location.href||"http://localhost",nx=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Pn,hasStandardBrowserEnv:tx,hasStandardBrowserWebWorkerEnv:sx,navigator:Gr,origin:rx},Symbol.toStringTag,{value:"Module"})),_e={...nx,...ex};function ax(t,s){return cr(t,new _e.classes.URLSearchParams,{visitor:function(r,n,a,i){return _e.isNode&&b.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...s})}function ix(t){return b.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function ox(t){const s={},r=Object.keys(t);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],s[i]=t[i];return s}function cl(t){function s(r,n,a,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&b.isArray(a)?a.length:o,c?(b.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!l):((!a[o]||!b.isObject(a[o]))&&(a[o]=[]),s(r,n,a[o],i)&&b.isArray(a[o])&&(a[o]=ox(a[o])),!l)}if(b.isFormData(t)&&b.isFunction(t.entries)){const r={};return b.forEachEntry(t,(n,a)=>{s(ix(n),a,r,0)}),r}return null}function lx(t,s,r){if(b.isString(t))try{return(s||JSON.parse)(t),b.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const fs={transitional:ll,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=b.isObject(s);if(i&&b.isHTMLForm(s)&&(s=new FormData(s)),b.isFormData(s))return a?JSON.stringify(cl(s)):s;if(b.isArrayBuffer(s)||b.isBuffer(s)||b.isStream(s)||b.isFile(s)||b.isBlob(s)||b.isReadableStream(s))return s;if(b.isArrayBufferView(s))return s.buffer;if(b.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return ax(s,this.formSerializer).toString();if((l=b.isFileList(s))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return cr(l?{"files[]":s}:s,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),lx(s)):s}],transformResponse:[function(s){const r=this.transitional||fs.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(b.isResponse(s)||b.isReadableStream(s))return s;if(s&&b.isString(s)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(s)}catch(l){if(o)throw l.name==="SyntaxError"?G.from(l,G.ERR_BAD_RESPONSE,this,null,this.response):l}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_e.classes.FormData,Blob:_e.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};b.forEach(["delete","get","head","post","put","patch"],t=>{fs.headers[t]={}});const cx=b.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dx=t=>{const s={};let r,n,a;return t&&t.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||s[r]&&cx[r])&&(r==="set-cookie"?s[r]?s[r].push(n):s[r]=[n]:s[r]=s[r]?s[r]+", "+n:n)}),s},ya=Symbol("internals");function Zt(t){return t&&String(t).trim().toLowerCase()}function As(t){return t===!1||t==null?t:b.isArray(t)?t.map(As):String(t)}function ux(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)s[n[1]]=n[2];return s}const hx=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function wr(t,s,r,n,a){if(b.isFunction(n))return n.call(this,s,r);if(a&&(s=r),!!b.isString(s)){if(b.isString(n))return s.indexOf(n)!==-1;if(b.isRegExp(n))return n.test(s)}}function mx(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,n)=>r.toUpperCase()+n)}function fx(t,s){const r=b.toCamelCase(" "+s);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(a,i,o){return this[n].call(this,s,a,i,o)},configurable:!0})})}let $e=class{constructor(s){s&&this.set(s)}set(s,r,n){const a=this;function i(l,c,h){const d=Zt(c);if(!d)throw new Error("header name must be a non-empty string");const m=b.findKey(a,d);(!m||a[m]===void 0||h===!0||h===void 0&&a[m]!==!1)&&(a[m||c]=As(l))}const o=(l,c)=>b.forEach(l,(h,d)=>i(h,d,c));if(b.isPlainObject(s)||s instanceof this.constructor)o(s,r);else if(b.isString(s)&&(s=s.trim())&&!hx(s))o(dx(s),r);else if(b.isObject(s)&&b.isIterable(s)){let l={},c,h;for(const d of s){if(!b.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[h=d[0]]=(c=l[h])?b.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(l,r)}else s!=null&&i(r,s,n);return this}get(s,r){if(s=Zt(s),s){const n=b.findKey(this,s);if(n){const a=this[n];if(!r)return a;if(r===!0)return ux(a);if(b.isFunction(r))return r.call(this,a,n);if(b.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=Zt(s),s){const n=b.findKey(this,s);return!!(n&&this[n]!==void 0&&(!r||wr(this,this[n],n,r)))}return!1}delete(s,r){const n=this;let a=!1;function i(o){if(o=Zt(o),o){const l=b.findKey(n,o);l&&(!r||wr(n,n[l],l,r))&&(delete n[l],a=!0)}}return b.isArray(s)?s.forEach(i):i(s),a}clear(s){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!s||wr(this,this[i],i,s,!0))&&(delete this[i],a=!0)}return a}normalize(s){const r=this,n={};return b.forEach(this,(a,i)=>{const o=b.findKey(n,i);if(o){r[o]=As(a),delete r[i];return}const l=s?mx(i):String(i).trim();l!==i&&delete r[i],r[l]=As(a),n[l]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return b.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=s&&b.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const n=new this(s);return r.forEach(a=>n.set(a)),n}static accessor(s){const n=(this[ya]=this[ya]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=Zt(o);n[l]||(fx(a,o),n[l]=!0)}return b.isArray(s)?s.forEach(i):i(s),this}};$e.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);b.reduceDescriptors($e.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(n){this[r]=n}}});b.freezeMethods($e);function Nr(t,s){const r=this||fs,n=s||r,a=$e.from(n.headers);let i=n.data;return b.forEach(t,function(l){i=l.call(r,i,a.normalize(),s?s.status:void 0)}),a.normalize(),i}function dl(t){return!!(t&&t.__CANCEL__)}function Ht(t,s,r){G.call(this,t??"canceled",G.ERR_CANCELED,s,r),this.name="CanceledError"}b.inherits(Ht,G,{__CANCEL__:!0});function ul(t,s,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):s(new G("Request failed with status code "+r.status,[G.ERR_BAD_REQUEST,G.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function px(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function xx(t,s){t=t||10;const r=new Array(t),n=new Array(t);let a=0,i=0,o;return s=s!==void 0?s:1e3,function(c){const h=Date.now(),d=n[i];o||(o=h),r[a]=c,n[a]=h;let m=i,f=0;for(;m!==a;)f+=r[m++],m=m%t;if(a=(a+1)%t,a===i&&(i=(i+1)%t),h-o<s)return;const y=d&&h-d;return y?Math.round(f*1e3/y):void 0}}function gx(t,s){let r=0,n=1e3/s,a,i;const o=(h,d=Date.now())=>{r=d,a=null,i&&(clearTimeout(i),i=null),t(...h)};return[(...h)=>{const d=Date.now(),m=d-r;m>=n?o(h,d):(a=h,i||(i=setTimeout(()=>{i=null,o(a)},n-m)))},()=>a&&o(a)]}const Vs=(t,s,r=3)=>{let n=0;const a=xx(50,250);return gx(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,h=a(c),d=o<=l;n=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:h||void 0,estimated:h&&l&&d?(l-o)/h:void 0,event:i,lengthComputable:l!=null,[s?"download":"upload"]:!0};t(m)},r)},ja=(t,s)=>{const r=t!=null;return[n=>s[0]({lengthComputable:r,total:t,loaded:n}),s[1]]},ba=t=>(...s)=>b.asap(()=>t(...s)),yx=_e.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,_e.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(_e.origin),_e.navigator&&/(msie|trident)/i.test(_e.navigator.userAgent)):()=>!0,jx=_e.hasStandardBrowserEnv?{write(t,s,r,n,a,i){const o=[t+"="+encodeURIComponent(s)];b.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),b.isString(n)&&o.push("path="+n),b.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function bx(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function vx(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function hl(t,s,r){let n=!bx(s);return t&&(n||r==!1)?vx(t,s):s}const va=t=>t instanceof $e?{...t}:t;function Ct(t,s){s=s||{};const r={};function n(h,d,m,f){return b.isPlainObject(h)&&b.isPlainObject(d)?b.merge.call({caseless:f},h,d):b.isPlainObject(d)?b.merge({},d):b.isArray(d)?d.slice():d}function a(h,d,m,f){if(b.isUndefined(d)){if(!b.isUndefined(h))return n(void 0,h,m,f)}else return n(h,d,m,f)}function i(h,d){if(!b.isUndefined(d))return n(void 0,d)}function o(h,d){if(b.isUndefined(d)){if(!b.isUndefined(h))return n(void 0,h)}else return n(void 0,d)}function l(h,d,m){if(m in s)return n(h,d);if(m in t)return n(void 0,h)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(h,d,m)=>a(va(h),va(d),m,!0)};return b.forEach(Object.keys({...t,...s}),function(d){const m=c[d]||a,f=m(t[d],s[d],d);b.isUndefined(f)&&m!==l||(r[d]=f)}),r}const ml=t=>{const s=Ct({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=s;s.headers=o=$e.from(o),s.url=ol(hl(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(b.isFormData(r)){if(_e.hasStandardBrowserEnv||_e.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[h,...d]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([h||"multipart/form-data",...d].join("; "))}}if(_e.hasStandardBrowserEnv&&(n&&b.isFunction(n)&&(n=n(s)),n||n!==!1&&yx(s.url))){const h=a&&i&&jx.read(i);h&&o.set(a,h)}return s},wx=typeof XMLHttpRequest<"u",Nx=wx&&function(t){return new Promise(function(r,n){const a=ml(t);let i=a.data;const o=$e.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:h}=a,d,m,f,y,x;function g(){y&&y(),x&&x(),a.cancelToken&&a.cancelToken.unsubscribe(d),a.signal&&a.signal.removeEventListener("abort",d)}let p=new XMLHttpRequest;p.open(a.method.toUpperCase(),a.url,!0),p.timeout=a.timeout;function w(){if(!p)return;const N=$e.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),L={data:!l||l==="text"||l==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:N,config:t,request:p};ul(function(C){r(C),g()},function(C){n(C),g()},L),p=null}"onloadend"in p?p.onloadend=w:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(w)},p.onabort=function(){p&&(n(new G("Request aborted",G.ECONNABORTED,t,p)),p=null)},p.onerror=function(){n(new G("Network Error",G.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let T=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const L=a.transitional||ll;a.timeoutErrorMessage&&(T=a.timeoutErrorMessage),n(new G(T,L.clarifyTimeoutError?G.ETIMEDOUT:G.ECONNABORTED,t,p)),p=null},i===void 0&&o.setContentType(null),"setRequestHeader"in p&&b.forEach(o.toJSON(),function(T,L){p.setRequestHeader(L,T)}),b.isUndefined(a.withCredentials)||(p.withCredentials=!!a.withCredentials),l&&l!=="json"&&(p.responseType=a.responseType),h&&([f,x]=Vs(h,!0),p.addEventListener("progress",f)),c&&p.upload&&([m,y]=Vs(c),p.upload.addEventListener("progress",m),p.upload.addEventListener("loadend",y)),(a.cancelToken||a.signal)&&(d=N=>{p&&(n(!N||N.type?new Ht(null,t,p):N),p.abort(),p=null)},a.cancelToken&&a.cancelToken.subscribe(d),a.signal&&(a.signal.aborted?d():a.signal.addEventListener("abort",d)));const E=px(a.url);if(E&&_e.protocols.indexOf(E)===-1){n(new G("Unsupported protocol "+E+":",G.ERR_BAD_REQUEST,t));return}p.send(i||null)})},Sx=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let n=new AbortController,a;const i=function(h){if(!a){a=!0,l();const d=h instanceof Error?h:this.reason;n.abort(d instanceof G?d:new Ht(d instanceof Error?d.message:d))}};let o=s&&setTimeout(()=>{o=null,i(new G(`timeout ${s} of ms exceeded`,G.ETIMEDOUT))},s);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(i):h.removeEventListener("abort",i)}),t=null)};t.forEach(h=>h.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>b.asap(l),c}},kx=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let n=0,a;for(;n<r;)a=n+s,yield t.slice(n,a),n=a},Cx=async function*(t,s){for await(const r of Tx(t))yield*kx(r,s)},Tx=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:n}=await s.read();if(r)break;yield n}}finally{await s.cancel()}},wa=(t,s,r,n)=>{const a=Cx(t,s);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:h,value:d}=await a.next();if(h){l(),c.close();return}let m=d.byteLength;if(r){let f=i+=m;r(f)}c.enqueue(new Uint8Array(d))}catch(h){throw l(h),h}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},dr=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",fl=dr&&typeof ReadableStream=="function",Px=dr&&(typeof TextEncoder=="function"?(t=>s=>t.encode(s))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),pl=(t,...s)=>{try{return!!t(...s)}catch{return!1}},Ex=fl&&pl(()=>{let t=!1;const s=new Request(_e.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!s}),Na=64*1024,Kr=fl&&pl(()=>b.isReadableStream(new Response("").body)),Hs={stream:Kr&&(t=>t.body)};dr&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!Hs[s]&&(Hs[s]=b.isFunction(t[s])?r=>r[s]():(r,n)=>{throw new G(`Response type '${s}' is not supported`,G.ERR_NOT_SUPPORT,n)})})})(new Response);const Rx=async t=>{if(t==null)return 0;if(b.isBlob(t))return t.size;if(b.isSpecCompliantForm(t))return(await new Request(_e.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(b.isArrayBufferView(t)||b.isArrayBuffer(t))return t.byteLength;if(b.isURLSearchParams(t)&&(t=t+""),b.isString(t))return(await Px(t)).byteLength},Ax=async(t,s)=>{const r=b.toFiniteNumber(t.getContentLength());return r??Rx(s)},_x=dr&&(async t=>{let{url:s,method:r,data:n,signal:a,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:h,headers:d,withCredentials:m="same-origin",fetchOptions:f}=ml(t);h=h?(h+"").toLowerCase():"text";let y=Sx([a,i&&i.toAbortSignal()],o),x;const g=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let p;try{if(c&&Ex&&r!=="get"&&r!=="head"&&(p=await Ax(d,n))!==0){let L=new Request(s,{method:"POST",body:n,duplex:"half"}),M;if(b.isFormData(n)&&(M=L.headers.get("content-type"))&&d.setContentType(M),L.body){const[C,z]=ja(p,Vs(ba(c)));n=wa(L.body,Na,C,z)}}b.isString(m)||(m=m?"include":"omit");const w="credentials"in Request.prototype;x=new Request(s,{...f,signal:y,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:w?m:void 0});let E=await fetch(x,f);const N=Kr&&(h==="stream"||h==="response");if(Kr&&(l||N&&g)){const L={};["status","statusText","headers"].forEach(W=>{L[W]=E[W]});const M=b.toFiniteNumber(E.headers.get("content-length")),[C,z]=l&&ja(M,Vs(ba(l),!0))||[];E=new Response(wa(E.body,Na,C,()=>{z&&z(),g&&g()}),L)}h=h||"text";let T=await Hs[b.findKey(Hs,h)||"text"](E,t);return!N&&g&&g(),await new Promise((L,M)=>{ul(L,M,{data:T,headers:$e.from(E.headers),status:E.status,statusText:E.statusText,config:t,request:x})})}catch(w){throw g&&g(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new G("Network Error",G.ERR_NETWORK,t,x),{cause:w.cause||w}):G.from(w,w&&w.code,t,x)}}),Jr={http:Gp,xhr:Nx,fetch:_x};b.forEach(Jr,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Sa=t=>`- ${t}`,Ox=t=>b.isFunction(t)||t===null||t===!1,xl={getAdapter:t=>{t=b.isArray(t)?t:[t];const{length:s}=t;let r,n;const a={};for(let i=0;i<s;i++){r=t[i];let o;if(n=r,!Ox(r)&&(n=Jr[(o=String(r)).toLowerCase()],n===void 0))throw new G(`Unknown adapter '${o}'`);if(n)break;a[o||"#"+i]=n}if(!n){const i=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=s?i.length>1?`since :
`+i.map(Sa).join(`
`):" "+Sa(i[0]):"as no adapter specified";throw new G("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Jr};function Sr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ht(null,t)}function ka(t){return Sr(t),t.headers=$e.from(t.headers),t.data=Nr.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),xl.getAdapter(t.adapter||fs.adapter)(t).then(function(n){return Sr(t),n.data=Nr.call(t,t.transformResponse,n),n.headers=$e.from(n.headers),n},function(n){return dl(n)||(Sr(t),n&&n.response&&(n.response.data=Nr.call(t,t.transformResponse,n.response),n.response.headers=$e.from(n.response.headers))),Promise.reject(n)})}const gl="1.11.0",ur={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{ur[t]=function(n){return typeof n===t||"a"+(s<1?"n ":" ")+t}});const Ca={};ur.transitional=function(s,r,n){function a(i,o){return"[Axios v"+gl+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(s===!1)throw new G(a(o," has been removed"+(r?" in "+r:"")),G.ERR_DEPRECATED);return r&&!Ca[o]&&(Ca[o]=!0),s?s(i,o,l):!0}};ur.spelling=function(s){return(r,n)=>!0};function Dx(t,s,r){if(typeof t!="object")throw new G("options must be an object",G.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let a=n.length;for(;a-- >0;){const i=n[a],o=s[i];if(o){const l=t[i],c=l===void 0||o(l,i,t);if(c!==!0)throw new G("option "+i+" must be "+c,G.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new G("Unknown option "+i,G.ERR_BAD_OPTION)}}const _s={assertOptions:Dx,validators:ur},Ye=_s.validators;let St=class{constructor(s){this.defaults=s||{},this.interceptors={request:new ga,response:new ga}}async request(s,r){try{return await this._request(s,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=Ct(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&_s.assertOptions(n,{silentJSONParsing:Ye.transitional(Ye.boolean),forcedJSONParsing:Ye.transitional(Ye.boolean),clarifyTimeoutError:Ye.transitional(Ye.boolean)},!1),a!=null&&(b.isFunction(a)?r.paramsSerializer={serialize:a}:_s.assertOptions(a,{encode:Ye.function,serialize:Ye.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),_s.assertOptions(r,{baseUrl:Ye.spelling("baseURL"),withXsrfToken:Ye.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&b.merge(i.common,i[r.method]);i&&b.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),r.headers=$e.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const h=[];this.interceptors.response.forEach(function(g){h.push(g.fulfilled,g.rejected)});let d,m=0,f;if(!c){const x=[ka.bind(this),void 0];for(x.unshift(...l),x.push(...h),f=x.length,d=Promise.resolve(r);m<f;)d=d.then(x[m++],x[m++]);return d}f=l.length;let y=r;for(m=0;m<f;){const x=l[m++],g=l[m++];try{y=x(y)}catch(p){g.call(this,p);break}}try{d=ka.call(this,y)}catch(x){return Promise.reject(x)}for(m=0,f=h.length;m<f;)d=d.then(h[m++],h[m++]);return d}getUri(s){s=Ct(this.defaults,s);const r=hl(s.baseURL,s.url,s.allowAbsoluteUrls);return ol(r,s.params,s.paramsSerializer)}};b.forEach(["delete","get","head","options"],function(s){St.prototype[s]=function(r,n){return this.request(Ct(n||{},{method:s,url:r,data:(n||{}).data}))}});b.forEach(["post","put","patch"],function(s){function r(n){return function(i,o,l){return this.request(Ct(l||{},{method:s,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}St.prototype[s]=r(),St.prototype[s+"Form"]=r(!0)});let Lx=class yl{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},s(function(i,o,l){n.reason||(n.reason=new Ht(i,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=n=>{s.abort(n)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new yl(function(a){s=a}),cancel:s}}};function Mx(t){return function(r){return t.apply(null,r)}}function Fx(t){return b.isObject(t)&&t.isAxiosError===!0}const Qr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qr).forEach(([t,s])=>{Qr[s]=t});function jl(t){const s=new St(t),r=Jo(St.prototype.request,s);return b.extend(r,St.prototype,s,{allOwnKeys:!0}),b.extend(r,s,null,{allOwnKeys:!0}),r.create=function(a){return jl(Ct(t,a))},r}const de=jl(fs);de.Axios=St;de.CanceledError=Ht;de.CancelToken=Lx;de.isCancel=dl;de.VERSION=gl;de.toFormData=cr;de.AxiosError=G;de.Cancel=de.CanceledError;de.all=function(s){return Promise.all(s)};de.spread=Mx;de.isAxiosError=Fx;de.mergeConfig=Ct;de.AxiosHeaders=$e;de.formToJSON=t=>cl(b.isHTMLForm(t)?new FormData(t):t);de.getAdapter=xl.getAdapter;de.HttpStatusCode=Qr;de.default=de;const{Axios:fg,AxiosError:pg,CanceledError:xg,isCancel:gg,CancelToken:yg,VERSION:jg,all:bg,Cancel:vg,isAxiosError:wg,spread:Ng,toFormData:Sg,AxiosHeaders:kg,HttpStatusCode:Cg,formToJSON:Tg,getAdapter:Pg,mergeConfig:Eg}=de,Ix=()=>{const[t,s]=u.useState(""),[r,n]=u.useState("all"),[a,i]=u.useState("all"),[o,l]=u.useState([]),[c,h]=u.useState([]),[d,m]=u.useState(!1),[f,y]=u.useState(!0),[x,g]=u.useState({clientName:"",siteName:"",location:"",mapLink:"",priority:"",deadline:"",description:"",notes:"",assignedManager:"",files:[]}),[p,w]=u.useState(null),[E,N]=u.useState(!1),[T,L]=u.useState(null);u.useEffect(()=>{(async()=>{const Q=localStorage.getItem("token");if(!Q)return;const he={Authorization:`Bearer ${Q}`};try{const Y=await de.get("http://localhost:5000/api/profile",{headers:he});Y.data.status==="success"&&L(Y.data.data);const Se=await de.get("http://localhost:5000/api/superadmin/projects",{headers:he});if(Se.data.status==="success"){const oe=Se.data.data;l(Array.isArray(oe.projects)?oe.projects:[])}else l([]);const ne=await de.get("http://localhost:5000/api/superadmin/managers",{headers:he});if(ne.data.status==="success"){const oe=ne.data.data.map(ye=>({id:ye._id,name:ye.name,email:ye.email,department:ye.department||"General"}));h(oe)}}catch{}finally{y(!1)}})()},[]);const M=async()=>{if(!x.clientName||!x.siteName||!x.location||!x.assignedManager){alert("Please fill all required fields.");return}const R=c.find(Y=>Y.id===x.assignedManager),Q=new FormData;Q.append("clientName",x.clientName),Q.append("siteName",x.siteName),Q.append("location",x.location),Q.append("mapLink",x.mapLink),Q.append("priority",x.priority||"medium"),Q.append("deadline",x.deadline),Q.append("description",x.description),Q.append("notes",x.notes),Q.append("assignedManager",x.assignedManager),Q.append("assignedManagerName",R?.name||""),x.files.forEach(Y=>{Q.append("files",Y)});const he=localStorage.getItem("token");try{const Y=await de.post("http://localhost:5000/api/superadmin/projects",Q,{headers:{Authorization:`Bearer ${he}`}});Y.data.status==="success"?(l([Y.data.data,...o]),g({clientName:"",siteName:"",location:"",mapLink:"",priority:"",deadline:"",description:"",notes:"",assignedManager:"",files:[]}),m(!1),alert(" Project created successfully!")):alert(`Failed to create project: ${Y.data.message||"Unknown error"}`)}catch(Y){alert(`Failed to create project: ${Y.response?.data?.message||Y.message}`)}},C=R=>{const Q=Array.from(R.target.files||[]);g({...x,files:[...x.files,...Q]})},z=()=>{if(x.location){const R=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(x.location)}`;window.open(R,"_blank")}},W=R=>{w(R),N(!0)},K=Array.isArray(o)?o.filter(R=>{const Q=R.siteName?.toLowerCase().includes(t.toLowerCase())||R.clientName?.toLowerCase().includes(t.toLowerCase())||R.location?.toLowerCase().includes(t.toLowerCase()),he=r==="all"||R.status?.toLowerCase().replace(" ","_")===r,Y=a==="all"||R.priority===a;return Q&&he&&Y}):[],A=R=>{switch(R){case"urgent":return"bg-destructive text-destructive-foreground";case"high":return"bg-orange-500 text-white";case"medium":return"bg-pending text-pending-foreground";case"low":return"bg-muted text-muted-foreground";default:return"bg-muted text-muted-foreground"}},k=R=>{switch(R?.toLowerCase()){case"completed":return"bg-success text-success-foreground";case"in progress":return"bg-primary text-primary-foreground";case"planning":return"bg-blue-500 text-white";case"delayed":return"bg-destructive text-destructive-foreground";case"on hold":return"bg-orange-500 text-white";default:return"bg-muted text-muted-foreground"}};return f?e.jsx(Ve,{userRole:"super-admin",userName:T?.name||"System Administrator",userEmail:T?.email||"admin@cosmicsolutions.com",userProfilePicture:T?.profilePicture?`http://localhost:5000/${T.profilePicture}`:void 0,children:e.jsx("div",{className:"p-4 lg:p-6 space-y-6 max-w-7xl mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading projects..."})]})})}):e.jsxs(Ve,{userRole:"super-admin",userName:T?.name||"System Administrator",userEmail:T?.email||"admin@cosmicsolutions.com",userProfilePicture:T?.profilePicture?`http://localhost:5000/${T.profilePicture}`:void 0,children:[e.jsxs("div",{className:"p-4 lg:p-6 space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Project Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor and manage all projects."})]}),e.jsxs(_,{onClick:()=>m(!0),children:[e.jsx(wt,{className:"mr-2 h-4 w-4"})," New Project"]})]}),e.jsx(be,{open:d,onOpenChange:m,children:e.jsxs(fe,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"Create New Project"}),e.jsx(ge,{children:"Fill in the form to create a new project."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Client Name *"}),e.jsx(ee,{value:x.clientName,onChange:R=>g({...x,clientName:R.target.value})})]}),e.jsxs("div",{children:[e.jsx(F,{children:"Site Name *"}),e.jsx(ee,{value:x.siteName,onChange:R=>g({...x,siteName:R.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(F,{children:"Location *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ee,{value:x.location,onChange:R=>g({...x,location:R.target.value}),className:"flex-1"}),e.jsx(_,{type:"button",variant:"outline",onClick:z,disabled:!x.location,children:e.jsx(Ft,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(F,{children:"Map Link (Optional)"}),e.jsx(ee,{placeholder:"Paste Google Maps link or coordinates",value:x.mapLink,onChange:R=>g({...x,mapLink:R.target.value})})]}),e.jsxs("div",{children:[e.jsx(F,{children:"Assign Manager *"}),e.jsxs(Oe,{value:x.assignedManager,onValueChange:R=>g({...x,assignedManager:R}),children:[e.jsx(Te,{children:e.jsx(De,{placeholder:"Select manager"})}),e.jsx(Pe,{children:c.length===0?e.jsx(q,{value:"",disabled:!0,children:"No managers available"}):c.map(R=>e.jsxs(q,{value:R.id,children:[R.name," - ",R.department]},R.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Priority"}),e.jsxs(Oe,{value:x.priority,onValueChange:R=>g({...x,priority:R}),children:[e.jsx(Te,{children:e.jsx(De,{placeholder:"Priority"})}),e.jsxs(Pe,{children:[e.jsx(q,{value:"low",children:"Low"}),e.jsx(q,{value:"medium",children:"Medium"}),e.jsx(q,{value:"high",children:"High"}),e.jsx(q,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{children:[e.jsx(F,{children:"Deadline"}),e.jsx(ee,{type:"date",value:x.deadline,onChange:R=>g({...x,deadline:R.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(F,{children:"Description"}),e.jsx(Be,{rows:3,value:x.description,onChange:R=>g({...x,description:R.target.value})})]}),e.jsxs("div",{children:[e.jsx(F,{children:"Notes"}),e.jsx(Be,{rows:2,value:x.notes,onChange:R=>g({...x,notes:R.target.value})})]}),e.jsxs("div",{children:[e.jsx(F,{children:"Upload Files"}),e.jsxs(_,{type:"button",variant:"outline",onClick:()=>document.getElementById("project-files")?.click(),className:"w-full",children:[e.jsx(nt,{className:"mr-2 h-4 w-4"})," Upload"]}),e.jsx("input",{id:"project-files",type:"file",multiple:!0,onChange:C,className:"hidden"}),x.files.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:x.files.map((R,Q)=>e.jsx("div",{className:"text-sm text-muted-foreground",children:R.name},Q))})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(_,{onClick:M,children:"Create"})]})]})]})}),e.jsxs(se,{children:[e.jsxs(ae,{children:[e.jsx(ie,{children:"Projects Overview"}),e.jsx(Le,{children:"Search, filter, and manage all active projects"})]}),e.jsxs(re,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(At,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ee,{placeholder:"Search projects, clients, or locations...",value:t,onChange:R=>s(R.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Oe,{value:r,onValueChange:n,children:[e.jsx(Te,{className:"w-40",children:e.jsx(De,{placeholder:"Status"})}),e.jsxs(Pe,{children:[e.jsx(q,{value:"all",children:"All Status"}),e.jsx(q,{value:"planning",children:"Planning"}),e.jsx(q,{value:"in_progress",children:"In Progress"}),e.jsx(q,{value:"completed",children:"Completed"}),e.jsx(q,{value:"delayed",children:"Delayed"}),e.jsx(q,{value:"on_hold",children:"On Hold"})]})]}),e.jsxs(Oe,{value:a,onValueChange:i,children:[e.jsx(Te,{className:"w-40",children:e.jsx(De,{placeholder:"Priority"})}),e.jsxs(Pe,{children:[e.jsx(q,{value:"all",children:"All Priority"}),e.jsx(q,{value:"low",children:"Low"}),e.jsx(q,{value:"medium",children:"Medium"}),e.jsx(q,{value:"high",children:"High"}),e.jsx(q,{value:"urgent",children:"Urgent"})]})]})]})]}),K.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ke,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No projects found"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"No projects match your current filters."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ze,{children:[e.jsx(et,{children:e.jsxs(Ne,{children:[e.jsx($,{children:"Project"}),e.jsx($,{children:"Client"}),e.jsx($,{children:"Location"}),e.jsx($,{children:"Manager"}),e.jsx($,{children:"Priority"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Deadline"}),e.jsx($,{children:"Actions"})]})}),e.jsx(tt,{children:K.map(R=>e.jsxs(Ne,{children:[e.jsx(B,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:R.siteName}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Created ",R.createdAt?new Date(R.createdAt).toLocaleDateString():""]})]})}),e.jsx(B,{children:R.clientName}),e.jsx(B,{children:R.location}),e.jsx(B,{children:R.assignedManagerName||"Unassigned"}),e.jsx(B,{children:e.jsx(te,{variant:"outline",className:A(R.priority),children:R.priority?.toUpperCase()})}),e.jsx(B,{children:e.jsx(te,{variant:"outline",className:k(R.status),children:R.status||"Planning"})}),e.jsx(B,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ot,{className:"h-4 w-4 text-muted-foreground"}),R.deadline?new Date(R.deadline).toLocaleDateString():"No deadline"]})}),e.jsx(B,{children:e.jsx("div",{className:"flex gap-2",children:e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>W(R),children:[e.jsx(ft,{className:"h-3 w-3 mr-1"})," View"]})})})]},R._id))})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 p-6",children:[e.jsx(se,{children:e.jsx(re,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:o.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Projects"})]})]})})}),e.jsx(se,{children:e.jsx(re,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-primary rounded flex items-center justify-center text-primary-foreground font-bold",children:o.filter(R=>R.status==="In Progress").length}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:o.filter(R=>R.status==="In Progress").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"In Progress"})]})]})})}),e.jsx(se,{children:e.jsx(re,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-success rounded flex items-center justify-center text-success-foreground font-bold",children:o.filter(R=>R.status==="Completed").length}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:o.filter(R=>R.status==="Completed").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"})]})]})})}),e.jsx(se,{children:e.jsx(re,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-destructive rounded flex items-center justify-center text-destructive-foreground font-bold",children:o.filter(R=>R.status==="Delayed").length}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:o.filter(R=>R.status==="Delayed").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Delayed"})]})]})})})]})]})]}),e.jsx(be,{open:E,onOpenChange:N,children:e.jsxs(fe,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"Project Details"}),e.jsx(ge,{children:"Detailed information about the selected project."})]}),p&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Site Name:"})," ",p.siteName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Client Name:"})," ",p.clientName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Location:"})," ",p.location]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Manager:"})," ",p.assignedManagerName||"Unassigned"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Priority:"})," ",p.priority]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Status:"})," ",p.status]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Deadline:"})," ",p.deadline?new Date(p.deadline).toLocaleDateString():"No deadline"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Description:"})," ",p.description]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Notes:"})," ",p.notes]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Created At:"})," ",p.createdAt?new Date(p.createdAt).toLocaleDateString():""]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",p.updatedAt?new Date(p.updatedAt).toLocaleDateString():""]})]})]})})]})},Ux=()=>{const[t,s]=u.useState(null),[r,n]=u.useState(!1),[a,i]=u.useState([{title:"Reports Generated",value:"0",change:"+0%",icon:Ie,color:"text-primary"},{title:"Active Projects",value:"0",change:"+0%",icon:ke,color:"text-pending"}]),[o,l]=u.useState(!1),[c,h]=u.useState([]),[d,m]=u.useState(null),[f,y]=u.useState(!1),x=async(g,p)=>{const w=localStorage.getItem("token");if(!w){alert("Please log in to generate reports.");return}n(!0);const E={type:g,format:p};try{const N=await fetch("http://localhost:5000/api/reports/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${w}`},body:JSON.stringify(E)});if(!N.ok){const L=await N.text();throw new Error(`Failed to generate report: ${N.status} ${N.statusText}`)}const T=N.headers.get("content-type");if(T&&T.includes("application/pdf")){const L=await N.blob(),M=window.URL.createObjectURL(L),C=document.createElement("a");C.href=M,C.setAttribute("download",`${g.replace(/\s+/g,"_")}_report.pdf`),document.body.appendChild(C),C.click(),C.remove(),window.URL.revokeObjectURL(M)}else{const L=await N.json();if(L.status==="error")throw new Error(L.message||"Failed to generate report")}}catch(N){alert(`Failed to generate report: ${N.message}`)}finally{n(!1)}};return u.useEffect(()=>{const g=localStorage.getItem("token");fetch("http://localhost:5000/api/profile",{headers:{Authorization:`Bearer ${g}`}}).then(p=>p.json()).then(p=>{p.status==="success"&&s(p.data)}).catch(console.error),fetch("http://localhost:5000/api/superadmin/stats",{headers:{Authorization:`Bearer ${g}`}}).then(p=>p.json()).then(p=>{p.status==="success"&&i([{title:"Reports Generated",value:p.data.reportsGenerated||"0",change:"+12%",icon:Ie,color:"text-primary"},{title:"Active Projects",value:p.data.inProgressProjects?.toString()||"0",change:"+3%",icon:ke,color:"text-pending"}])})},[]),u.useEffect(()=>{const g=localStorage.getItem("token");g&&fetch("http://localhost:5000/api/superadmin/projects",{headers:{Authorization:`Bearer ${g}`}}).then(p=>p.json()).then(p=>{if(p.status==="success"){const E=(Array.isArray(p.data.projects)?p.data.projects:[]).flatMap(N=>(N.tasks||[]).map(T=>({...T,projectName:N.siteName})));h(E)}})},[]),e.jsx(Ve,{userRole:"super-admin",userName:t?.name||"System Administrator",userEmail:t?.email||"admin@cosmicsolutions.com",userProfilePicture:t?.profilePicture?`http://localhost:5000/${t.profilePicture}`:void 0,children:e.jsxs("div",{className:"p-4 lg:p-6 space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-foreground",children:"Reports & Analytics"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Generate comprehensive reports and analyze system performance."})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:a.map((g,p)=>e.jsx(se,{children:e.jsx(re,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:g.value}),e.jsx("p",{className:"text-sm text-muted-foreground",children:g.title})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx(g.icon,{className:`h-6 w-6 ${g.color}`}),e.jsx("span",{className:"text-xs text-success font-medium",children:g.change})]})]})})},p))}),e.jsxs(se,{className:"max-w-2xl mx-auto",children:[e.jsxs(ae,{children:[e.jsxs(ie,{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"h-6 w-6 text-primary"}),"Project Summary Report"]}),e.jsx(Le,{children:"Comprehensive overview of all projects, their status, and progress."})]}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Key Metrics:"}),e.jsxs("ul",{className:"mt-2 space-y-1",children:[e.jsxs("li",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(qe,{className:"h-3 w-3 text-success"}),"Total Projects"]}),e.jsxs("li",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(qe,{className:"h-3 w-3 text-success"}),"Completion Rate"]}),e.jsxs("li",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(qe,{className:"h-3 w-3 text-success"}),"Average Duration"]}),e.jsxs("li",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(qe,{className:"h-3 w-3 text-success"}),"Budget Analysis"]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(_,{variant:"outline",size:"sm",onClick:()=>x("Project Summary","pdf"),disabled:r,className:"flex-1",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 mr-1 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(sr,{className:"h-3 w-3 mr-1"}),"PDF"]})})})]})})]})]})})},$x=()=>{const[t,s]=u.useState(""),[r,n]=u.useState(!1),[a,i]=u.useState(!1),[o,l]=u.useState(""),[c,h]=u.useState(""),[d,m]=u.useState(""),[f,y]=u.useState(""),[x,g]=u.useState(""),[p,w]=u.useState(""),[E,N]=u.useState(""),[T,L]=u.useState([]),[M,C]=u.useState([]),[z,W]=u.useState([]),[K,A]=u.useState([]),[k,R]=u.useState({assignedProjectsCount:0,techniciansCount:0,completedTasks:0,pendingTasks:0}),[Q,he]=u.useState([]),[Y,Se]=u.useState(null),{socket:ne}=Rt(),[oe,ye]=u.useState(null),D=[{title:"Assigned Projects",value:k.assignedProjectsCount,description:"Active projects from Super Admin",icon:ke},{title:"Team Members",value:k.techniciansCount,description:"Technicians under supervision",icon:at},{title:"Completed Tasks",value:k.completedTasks,description:"This month",icon:qe},{title:"Pending Tasks",value:k.pendingTasks,description:"Awaiting technician action",icon:Mt}],S=async()=>{const O={Authorization:`Bearer ${localStorage.getItem("token")}`},me=await(await fetch("http://localhost:5000/api/profile",{headers:O})).json();me.status==="success"&&Se(me.data)},P=async v=>{const O=localStorage.getItem("token"),I=new FormData;I.append("profilePicture",v),await fetch("http://localhost:5000/api/profile/picture",{method:"POST",headers:{Authorization:`Bearer ${O}`},body:I}),await S()};u.useEffect(()=>{const O={"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`};S(),fetch("http://localhost:5000/api/manager/projects",{headers:O}).then(I=>I.json()).then(I=>{I.status==="success"&&C(I.data)}).catch(console.error),fetch("http://localhost:5000/api/manager/technicians",{headers:O}).then(I=>I.json()).then(I=>{I.status==="success"&&W(I.data)}).catch(console.error),fetch("http://localhost:5000/api/manager/stats",{headers:O}).then(I=>I.json()).then(I=>{I.status==="success"&&R(I.data)}).catch(console.error)},[]),u.useEffect(()=>{if(ne)return ne.on("project_created",v=>{V.success(`New project "${v.project.siteName}" assigned to you.`)}),ne.on("task_assigned",v=>{V.success(`Task "${v.task.title}" assigned to technician.`)}),ne.on("task_status_updated",v=>{V(`Task "${v.task.title}" status updated to "${v.task.status}".`),A(I=>{const me=I.findIndex(le=>le._id===v.task._id||le.id===v.task._id);if(me!==-1){const le=[...I];return le[me]={...le[me],...v.task},le}return I}),v.project&&C(I=>{const me=I.findIndex(le=>le._id===v.project._id||le.id===v.project._id);if(me!==-1){const le=[...I];return le[me]={...le[me],...v.project},le}return I});const O=localStorage.getItem("token");fetch("http://localhost:5000/api/manager/tasks",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`}}).then(I=>I.json()).then(I=>{I.status==="success"&&A(I.data)}).catch(console.error),fetch("http://localhost:5000/api/manager/stats",{headers:{Authorization:`Bearer ${O}`}}).then(I=>I.json()).then(I=>{I.status==="success"&&R(I.data)}).catch(console.error)}),ne.on("report_submitted",v=>{V.success(`Report submitted for task "${v.report.task}".`)}),()=>{ne.off("project_created"),ne.off("task_assigned"),ne.off("task_status_updated"),ne.off("report_submitted")}},[ne]),u.useEffect(()=>{const v=localStorage.getItem("token");v&&fetch("http://localhost:5000/api/manager/tasks",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`}}).then(O=>O.json()).then(O=>{O.status==="success"&&A(O.data)}).catch(O=>{})},[]);const j=async()=>{if(M.length===0){alert("No projects available. Please wait for Super Admin to assign projects to you.");return}if(z.length===0){alert("No team members available. Please contact Super Admin to assign technicians to your team.");return}if(!o||!c||!d){alert("Please fill in all required fields (Project, Technician, Title)");return}try{const v=localStorage.getItem("token"),O=new FormData;O.append("title",d),O.append("description",f),O.append("projectId",o),O.append("technicianId",c),O.append("priority",x||"medium"),O.append("deadline",p),O.append("locationLink",E),T.forEach((we,Wt)=>{we.file&&!we.isProjectFile&&O.append("files",we.file)}),T.filter(we=>we.isProjectFile).map(we=>we.projectFilePath).forEach(we=>{O.append("projectFiles",we)});const le=await(await fetch("http://localhost:5000/api/manager/tasks",{method:"POST",headers:{Authorization:`Bearer ${v}`},body:O})).json();if(le.status==="success"){const Wt=await(await fetch("http://localhost:5000/api/manager/tasks",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`}})).json();Wt.status==="success"&&A(Wt.data);const Gt=M.find(hr=>hr._id===o),kl=z.find(hr=>hr._id===c);alert(` Task "${d}" has been successfully assigned to ${kl?.name||"Unknown"} for project "${Gt?.siteName||"Unknown"}"

The technician will be notified and can now view this task in their dashboard.`),m(""),y(""),l(""),h(""),g(""),w(""),N(""),L([]),n(!1)}else alert(` Failed to create task: ${le.message}`)}catch{alert(" Failed to create task. Please try again.")}},H=v=>{const O=M.find(I=>I._id===v);O&&alert(`Project Details:

Name: ${O.siteName}
Client: ${O.clientName}
Location: ${O.location}
Status: ${O.status||"Active"}
Progress: ${O.progress||0}%
Deadline: ${O.deadline?new Date(O.deadline).toLocaleDateString():"No deadline"}

Description: ${O.description||"No description"}
Priority: ${O.priority||"Medium"}`)},ue=()=>{i(!0)},Ce=async v=>{const O=localStorage.getItem("token");if(!O){alert("Please log in to download task report.");return}try{const I=await fetch("http://localhost:5000/api/reports/task-pdf",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify({tasks:[v]})});if(!I.ok)throw new Error("Failed to generate PDF");const me=await I.blob(),le=window.URL.createObjectURL(me),we=document.createElement("a");we.href=le,we.setAttribute("download",`${v.title.replace(/\s+/g,"_")}_report.pdf`),document.body.appendChild(we),we.click(),we.remove(),window.URL.revokeObjectURL(le)}catch(I){alert("Failed to download task report: "+I.message)}};return e.jsx(Ve,{userRole:"manager",userName:Y?.name||"Project Manager",userEmail:Y?.email||"manager@cosmicsolutions.com",userProfilePicture:Y?.profilePicture?`http://localhost:5000/${Y.profilePicture}`:void 0,onProfilePictureUpload:P,children:e.jsxs("div",{className:"mobile-container mobile-space-y max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mobile-text-2xl font-bold text-foreground",children:"Project Management"}),e.jsx("p",{className:"text-muted-foreground mt-1 mobile-text-base",children:"Manage your assigned projects and team members."})]}),e.jsxs("div",{className:"mobile-button-group",children:[e.jsxs(_,{onClick:()=>n(!0),className:"mobile-button",children:[e.jsx(wt,{className:"mr-2 h-4 w-4"}),"Create Task"]}),e.jsxs(_,{variant:"outline",onClick:ue,className:"mobile-button",children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),"Task Report"]})]})]}),e.jsx(Sn,{stats:D}),e.jsxs("div",{className:"mobile-grid-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(se,{className:"mobile-card",children:[e.jsx(ae,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(ie,{className:"mobile-text-lg",children:"Assigned Projects"}),e.jsx(Le,{className:"mobile-text-sm",children:"Projects assigned by Super Admin"})]}),e.jsxs("div",{className:"mobile-action-buttons",children:[e.jsxs("div",{className:"mobile-search",children:[e.jsx(At,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ee,{placeholder:"Search projects...",value:t,onChange:v=>s(v.target.value),className:"mobile-search-input"})]}),e.jsx(_,{variant:"outline",size:"sm",children:e.jsx(hn,{className:"h-4 w-4"})})]})]})}),e.jsx(re,{children:M.length===0?e.jsxs("div",{className:"mobile-empty-state",children:[e.jsx(ke,{className:"mobile-empty-state-icon text-muted-foreground"}),e.jsx("h3",{className:"mobile-empty-state-title",children:"No projects assigned yet"}),e.jsx("p",{className:"mobile-empty-state-description",children:"Projects assigned by Super Admin will appear here."})]}):e.jsx("div",{className:"mobile-space-y",children:M.map(v=>e.jsxs("div",{className:"mobile-card hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-3 mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mobile-text-base font-medium text-foreground mb-1",children:v.siteName}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mobile-text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(fn,{className:"h-3 w-3"}),e.jsx("span",{children:v.clientName})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ft,{className:"h-3 w-3"}),e.jsx("span",{children:v.location})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ot,{className:"h-3 w-3"}),e.jsxs("span",{children:["Due"," ",v.deadline?new Date(v.deadline).toLocaleDateString():"No deadline"]})]})]})]}),e.jsxs("div",{className:"mobile-action-buttons",children:[e.jsx(te,{variant:"outline",className:"bg-blue-500 text-white border-0 mobile-badge",children:v.status||"Active"}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>H(v._id),className:"mobile-button",children:[e.jsx(ft,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs("select",{value:v.status||"Planning",onChange:async O=>{const I=O.target.value;try{const me=localStorage.getItem("token"),we=await(await fetch(`http://localhost:5000/api/projects/${v._id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${me}`},body:JSON.stringify({status:I})})).json();we.status==="success"?(C(Wt=>Wt.map(Gt=>Gt._id===v._id?{...Gt,status:I}:Gt)),V.success("Project status updated!")):V.error(we.message||"Failed to update status")}catch{V.error("Failed to update status")}},className:"mobile-select border rounded px-2 py-1 mobile-text-sm",children:[e.jsx("option",{value:"Planning",children:"Planning"}),e.jsx("option",{value:"In Progress",children:"Start Working"}),e.jsx("option",{value:"Delayed",children:"Delayed"}),e.jsx("option",{value:"Completed",children:"Completed"})]})]})]}),v.files&&v.files.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Project Files:"}),e.jsx("ul",{className:"list-disc list-inside text-sm mt-1",children:v.files.map((O,I)=>e.jsx("li",{children:e.jsx("a",{href:`http://localhost:5000/${O.path.replace(/\\/g,"/")}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-800",children:O.originalName||O.filename})},I))})]})]},v._id))})})]}),e.jsxs(se,{className:"mb-6 p-2 sm:p-4 md:p-6",children:[e.jsx(ae,{children:e.jsx(ie,{children:"All Tasks"})}),e.jsx(re,{children:e.jsx("div",{className:"overflow-x-auto",children:K.length===0?e.jsx("div",{children:"No tasks assigned yet."}):e.jsxs(Ze,{className:"min-w-[700px]",children:[e.jsx(et,{children:e.jsxs(Ne,{children:[e.jsx($,{children:"Title"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Technician"}),e.jsx($,{children:"Project"}),e.jsx($,{children:"Deadline"}),e.jsx($,{children:"Status Timeline"}),e.jsx($,{children:"Project Files & Map"})]})}),e.jsx(tt,{children:K.map(v=>e.jsxs(Ne,{children:[e.jsx(B,{children:v.title}),e.jsx(B,{children:v.status}),e.jsx(B,{children:v.assignedTo?.name||"N/A"}),e.jsx(B,{children:v.project?.siteName||"N/A"}),e.jsx(B,{children:v.deadline?new Date(v.deadline).toLocaleDateString():"No deadline"}),e.jsx(B,{children:v.statusLog&&v.statusLog.length>0?e.jsx("ul",{className:"text-xs space-y-1",children:v.statusLog.map((O,I)=>e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:O.status}),O.timestamp&&e.jsxs("span",{children:[" (",new Date(O.timestamp).toLocaleString(),")"]}),O.comment&&e.jsxs("span",{children:[": ",O.comment]})]},I))}):e.jsx("span",{children:"No history"})}),e.jsxs(B,{children:[v.project?.mapLink&&e.jsx("div",{className:"mb-1",children:e.jsxs("a",{href:v.project.mapLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline font-medium flex items-center gap-1",children:[e.jsx("span",{role:"img","aria-label":"map",children:""})," Map"]})}),v.project?.files&&v.project.files.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-blue-700",children:"Project Files:"}),e.jsx("ul",{className:"space-y-1 mt-1",children:v.project.files.map((O,I)=>e.jsxs("li",{children:[e.jsx("a",{href:`http://localhost:5000/${O.path}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800 underline font-medium",children:O.originalName||O.filename}),O.size&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",(O.size/1024).toFixed(1)," KB)"]})]},I))})]})]})]},v._id||v.id))})]})})})]})]}),e.jsx("div",{className:"space-y-6"})]}),e.jsx(be,{open:r,onOpenChange:n,children:e.jsxs(fe,{className:"mobile-dialog-content max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(xe,{className:"mobile-text-lg",children:"Create New Task"}),e.jsx(ge,{className:"mobile-text-sm",children:"Assign a new task to one of your team members."})]}),e.jsxs("div",{className:"mobile-form py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"mobile-form-group w-full",children:[e.jsx(F,{htmlFor:"project",className:"mobile-text-sm",children:"Project *"}),e.jsxs(Oe,{value:o,onValueChange:l,children:[e.jsx(Te,{className:"mobile-select w-full",children:e.jsx(De,{placeholder:"Select project"})}),e.jsx(Pe,{children:M.length===0?e.jsx(q,{value:"",disabled:!0,children:"No projects available"}):M.map(v=>e.jsx(q,{value:v._id,children:v.siteName},v._id))})]})]}),e.jsxs("div",{className:"mobile-form-group w-full",children:[e.jsx(F,{htmlFor:"technician",className:"mobile-text-sm",children:"Assign to *"}),e.jsxs(Oe,{value:c,onValueChange:h,children:[e.jsx(Te,{className:"mobile-select w-full",children:e.jsx(De,{placeholder:"Select technician"})}),e.jsx(Pe,{children:z.length===0?e.jsx(q,{value:"",disabled:!0,children:"No team members available"}):z.map(v=>e.jsx(q,{value:v._id,children:v.name},v._id))})]})]})]}),o&&(()=>{const v=M.find(O=>O._id===o);return v?.mapLink?e.jsxs("div",{className:"text-xs text-blue-600 mt-2 p-2 bg-blue-50 rounded border",children:[e.jsx("div",{className:"font-medium mb-1",children:" Project Map Link:"}),e.jsx("a",{href:v.mapLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline break-all",children:v.mapLink})]}):null})(),o&&(()=>{const v=M.find(O=>O._id===o);return v?.files&&v.files.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Project Files"}),e.jsxs("div",{className:"text-xs text-blue-600 p-2 bg-blue-50 rounded border",children:[e.jsx("div",{className:"font-medium mb-2",children:" Project Files Available:"}),e.jsx("div",{className:"space-y-1",children:v.files.map((O,I)=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-1.5 rounded border",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ie,{className:"h-3 w-3 text-gray-500"}),e.jsx("span",{className:"text-gray-700 truncate",children:O.originalName||O.filename}),O.size&&e.jsxs("span",{className:"text-gray-500",children:["(",(O.size/1024).toFixed(1)," KB)"]})]}),e.jsx(_,{type:"button",variant:"outline",size:"sm",className:"text-xs",onClick:()=>{const me={name:O.originalName||O.filename,size:O.size||0,isProjectFile:!0,projectFilePath:O.path||O.filename};L([...T,me])},children:"Add to Task"})]},I))})]})]}):null})(),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"task-title",children:"Task Title *"}),e.jsx(ee,{id:"task-title",placeholder:"Enter task title",value:d,onChange:v=>m(v.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"task-description",children:"Description"}),e.jsx(Be,{id:"task-description",placeholder:"Enter task description and requirements",value:f,onChange:v=>y(v.target.value),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Upload Files"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_,{type:"button",variant:"outline",onClick:()=>document.getElementById("task-file-upload")?.click(),className:"flex items-center gap-2",children:[e.jsx(nt,{className:"h-4 w-4"}),"Choose Files"]}),e.jsx("input",{id:"task-file-upload",type:"file",multiple:!0,className:"hidden",onChange:v=>{const I=Array.from(v.target.files||[]).filter(le=>le.size>10*1024*1024?(alert(`File "${le.name}" is too large. Maximum size is 10MB.`),!1):!0);if(T.length+I.length>10){alert("Maximum 10 files allowed. Please remove some files first.");return}const me=I.map(le=>({name:le.name,size:le.size,file:le,isProjectFile:!1}));L([...T,...me])}}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Max 10 files, 10MB each"})]}),T.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"text-sm font-medium",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:T.map((v,O)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded border",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:v.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:[(v.size/1024).toFixed(1)," KB",v.isProjectFile&&" (Project File)"]})]})]}),e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:()=>{L(T.filter((I,me)=>me!==O))},className:"text-red-600 hover:text-red-700",children:e.jsx(kt,{className:"h-3 w-3"})})]},O))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"task-location-link",children:"Location Link (Google Maps)"}),e.jsx(ee,{id:"task-location-link",placeholder:"Enter Google Maps link or coordinates",value:E,onChange:v=>N(v.target.value)}),o&&(()=>{const v=M.find(O=>O._id===o);return v?.mapLink?e.jsxs("div",{className:"text-xs text-green-600 mt-2 p-2 bg-green-50 rounded border",children:[e.jsx("div",{className:"font-medium mb-1",children:" Tip:"}),e.jsx("div",{children:"This project has a map link. You can copy it from above or use your own link."}),e.jsx(_,{type:"button",variant:"outline",size:"sm",className:"mt-2 text-xs",onClick:()=>N(v.mapLink),children:"Use Project's Map Link"})]}):null})()]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"priority",children:"Priority"}),e.jsxs(Oe,{value:x,onValueChange:g,children:[e.jsx(Te,{className:"w-full",children:e.jsx(De,{placeholder:"Select priority"})}),e.jsxs(Pe,{children:[e.jsx(q,{value:"low",children:"Low"}),e.jsx(q,{value:"medium",children:"Medium"}),e.jsx(q,{value:"high",children:"High"}),e.jsx(q,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"deadline",children:"Deadline"}),e.jsx(ee,{id:"deadline",type:"date",value:p,onChange:v=>w(v.target.value)})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end",children:[e.jsx(_,{variant:"outline",onClick:()=>{n(!1),m(""),y(""),l(""),h(""),g(""),w(""),N(""),L([]);const v=document.getElementById("task-file-upload");v&&(v.value="")},className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(_,{onClick:j,className:"w-full sm:w-auto",children:"Create Task"})]})]})}),e.jsx(be,{open:a,onOpenChange:i,children:e.jsxs(fe,{className:"mobile-dialog-content max-w-[95vw] sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(xe,{className:"mobile-text-lg",children:"Task Report"}),e.jsx(ge,{className:"mobile-text-sm",children:"View all tasks updated by technicians, including attachments and descriptions. You can also download this report as a PDF."})]}),e.jsx("div",{className:"mobile-space-y",children:K.length===0?e.jsxs("div",{className:"mobile-empty-state",children:[e.jsx("div",{className:"mobile-empty-state-icon",children:""}),e.jsx("h3",{className:"mobile-empty-state-title",children:"No tasks available"}),e.jsx("p",{className:"mobile-empty-state-description",children:"There are no tasks to display in the report."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"hidden sm:block",children:e.jsx("div",{className:"responsive-table",children:e.jsxs("table",{className:"w-full border-collapse bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 text-center border-b border-gray-200 py-3 mobile-text-sm font-medium",children:"Select"}),e.jsx("th",{className:"border-b border-gray-200 py-3 mobile-text-sm font-medium text-left",children:"Title"}),e.jsx("th",{className:"border-b border-gray-200 py-3 mobile-text-sm font-medium text-left",children:"Status"}),e.jsx("th",{className:"border-b border-gray-200 py-3 mobile-text-sm font-medium text-left",children:"Attachments"}),e.jsx("th",{className:"border-b border-gray-200 py-3 mobile-text-sm font-medium text-left",children:"Description"})]})}),e.jsx("tbody",{children:K.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"text-center border-b border-gray-200 py-3",children:e.jsx("input",{type:"radio",name:"selectedTaskReport",checked:oe===(v._id||v.id),onChange:()=>ye(v._id||v.id),className:"w-4 h-4"})}),e.jsx("td",{className:"border-b border-gray-200 py-3 mobile-text-sm",children:v.title}),e.jsx("td",{className:"border-b border-gray-200 py-3 mobile-text-sm",children:e.jsx(te,{variant:"outline",className:"capitalize",children:v.status})}),e.jsx("td",{className:"border-b border-gray-200 py-3 mobile-text-sm",children:v.files&&v.files.length>0?e.jsx("ul",{className:"space-y-1",children:v.files.map((O,I)=>e.jsx("li",{children:e.jsx("a",{href:O.url||`http://localhost:5000/${O.path}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline text-xs",children:O.originalName||O.name||O.filename||"Attachment"})},I))}):e.jsx("span",{className:"text-gray-500 text-xs",children:"No attachments"})}),e.jsx("td",{className:"border-b border-gray-200 py-3 mobile-text-sm text-gray-600",children:v.description||"-"})]},v._id||v.id))})]})})}),e.jsx("div",{className:"sm:hidden space-y-4",children:K.map(v=>e.jsx("div",{className:`mobile-card p-4 border-2 transition-colors ${oe===(v._id||v.id)?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>ye(v._id||v.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"radio",name:"selectedTaskReport",checked:oe===(v._id||v.id),onChange:()=>ye(v._id||v.id),className:"w-4 h-4 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"mobile-text-base font-medium text-gray-900 truncate",children:v.title}),e.jsx(te,{variant:"outline",className:"capitalize mobile-text-xs",children:v.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"mobile-text-xs font-medium text-gray-500",children:"Description:"}),e.jsx("p",{className:"mobile-text-sm text-gray-700 mt-1",children:v.description||"No description available"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"mobile-text-xs font-medium text-gray-500",children:"Attachments:"}),v.files&&v.files.length>0?e.jsx("div",{className:"mt-1 space-y-1",children:v.files.map((O,I)=>e.jsx("div",{children:e.jsx("a",{href:O.url||`http://localhost:5000/${O.path}`,target:"_blank",rel:"noopener noreferrer",className:"mobile-text-xs text-blue-600 hover:text-blue-800 underline break-all",children:O.originalName||O.name||O.filename||"Attachment"})},I))}):e.jsx("p",{className:"mobile-text-xs text-gray-500 mt-1",children:"No attachments"})]})]})]})]})},v._id||v.id))})]})}),e.jsxs("div",{className:"mobile-button-group mt-6",children:[e.jsx(_,{variant:"outline",onClick:()=>i(!1),className:"mobile-button",children:"Close"}),e.jsxs(_,{onClick:()=>{const v=K.find(O=>(O._id||O.id)===oe);v&&Ce(v)},disabled:!oe,className:"mobile-button",children:[e.jsx(sr,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]})]})})]})})};var En="Progress",Bx=100,[zx,Rg]=os(En),[qx,Vx]=zx(En),bl=u.forwardRef((t,s)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=Hx,...o}=t;(a||a===0)&&Ta(a);const l=Ta(a)?a:Bx;n!==null&&Pa(n,l);const c=Pa(n,l)?n:null,h=Ws(c)?i(c,l):void 0;return e.jsx(qx,{scope:r,value:c,max:l,children:e.jsx(Ee.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Ws(c)?c:void 0,"aria-valuetext":h,role:"progressbar","data-state":Nl(c,l),"data-value":c??void 0,"data-max":l,...o,ref:s})})});bl.displayName=En;var vl="ProgressIndicator",wl=u.forwardRef((t,s)=>{const{__scopeProgress:r,...n}=t,a=Vx(vl,r);return e.jsx(Ee.div,{"data-state":Nl(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:s})});wl.displayName=vl;function Hx(t,s){return`${Math.round(t/s*100)}%`}function Nl(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function Ws(t){return typeof t=="number"}function Ta(t){return Ws(t)&&!isNaN(t)&&t>0}function Pa(t,s){return Ws(t)&&!isNaN(t)&&t<=s&&t>=0}var Sl=bl,Wx=wl;const mt=u.forwardRef(({className:t,value:s,...r},n)=>e.jsx(Sl,{ref:n,className:U("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:e.jsx(Wx,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));mt.displayName=Sl.displayName;const Gx=()=>{const[t,s]=u.useState(""),[r,n]=u.useState("all"),[a,i]=u.useState(null),[o,l]=u.useState(!1),[c,h]=u.useState(!1),[d,m]=u.useState(""),[f,y]=u.useState(""),[x,g]=u.useState([]),[p,w]=u.useState(""),[E,N]=u.useState([]),[T,L]=u.useState(null),{socket:M}=Rt(),C=async()=>{const S={Authorization:`Bearer ${localStorage.getItem("token")}`},j=await(await fetch("http://localhost:5000/api/profile",{headers:S})).json();j.status==="success"&&L(j.data)},z=async D=>{const S=localStorage.getItem("token"),P=new FormData;P.append("profilePicture",D),await fetch("http://localhost:5000/api/profile/picture",{method:"POST",headers:{Authorization:`Bearer ${S}`},body:P}),await C()};u.useEffect(()=>{C();const S={"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`};fetch("http://localhost:5000/api/technician/tasks",{headers:S}).then(P=>P.json()).then(P=>{P.status==="success"&&N(P.data)}).catch(console.error)},[]),u.useEffect(()=>{if(M)return M.on("project_created",D=>{V.success(`New project "${D.project.siteName}" created.`)}),M.on("task_assigned",D=>{V.success(`You have been assigned a new task: "${D.task.title}".`)}),M.on("task_status_updated",D=>{V(`Task "${D.task.title}" status updated to "${D.task.status}".`),N(S=>{const P=S.findIndex(j=>j._id===D.task._id||j.id===D.task._id);if(P!==-1){const j=[...S];return j[P]={...j[P],...D.task},j}return S})}),M.on("report_submitted",D=>{V.success(`A report was submitted for task "${D.report.task}".`)}),()=>{M.off("project_created"),M.off("task_assigned"),M.off("task_status_updated"),M.off("report_submitted")}},[M]);const W=E.filter(D=>D.status==="assigned").length,K=E.filter(D=>D.status==="in_progress").length,A=E.filter(D=>D.status==="completed").length,k=E.filter(D=>D.status==="delayed").length,R=[{title:"Assigned Tasks",value:W,description:"Current active assignments",icon:ke},{title:"In Progress",value:K,description:"Currently working on",icon:Mt},{title:"Completed",value:A,description:"This month",icon:qe},{title:"Delayed",value:k,description:"Require attention",icon:Ms}],Q=E.filter(D=>{const S=D.title.toLowerCase().includes(t.toLowerCase())||D.project.toLowerCase().includes(t.toLowerCase())||D.location.toLowerCase().includes(t.toLowerCase()),P=r==="all"||D.status===r;return S&&P}),he=D=>{switch(D){case"urgent":return"bg-destructive text-destructive-foreground";case"high":return"bg-orange-500 text-white";case"medium":return"bg-pending text-pending-foreground";case"low":return"bg-muted text-muted-foreground";default:return"bg-muted text-muted-foreground"}},Y=D=>{switch(D){case"assigned":return"bg-blue-500 text-white";case"in_progress":return"bg-pending text-pending-foreground";case"completed":return"bg-success text-success-foreground";case"delayed":return"bg-destructive text-destructive-foreground";default:return"bg-muted text-muted-foreground"}},Se=(D,S)=>{i(D),S==="view"?l(!0):S==="update"&&(m(D.status),h(!0))},ne=async()=>{if(!a||!d){alert("Please select a status");return}if(d==="delayed"&&(!p||p.trim()==="")){alert("Please provide a delay reason when reporting delay.");return}try{const D=localStorage.getItem("token"),P=await(await fetch(`http://localhost:5000/api/technician/tasks/${a.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify({status:d,comment:f,files:x.map(j=>j.name),...d==="delayed"?{delayReason:p}:{}})})).json();if(P.status==="success"){const H=await(await fetch("http://localhost:5000/api/technician/tasks",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`}})).json();H.status==="success"&&N(H.data),alert(` Task "${a.title}" status updated to "${d.replace("_"," ")}"${f?` with comment: "${f}"`:""}`),y(""),g([]),h(!1),i(null),w("")}else alert(` Failed to update task status: ${P.message}`)}catch{alert(" Failed to update task status. Please try again.")}},oe=D=>{const S=Array.from(D.target.files||[]);g(P=>[...P,...S])},ye=D=>{g(S=>S.filter((P,j)=>j!==D))};return e.jsx(Ve,{userRole:"technician",userName:T?.name||"Technician",userEmail:T?.email||"technician@cosmicsolutions.com",userProfilePicture:T?.profilePicture?`http://localhost:5000/${T.profilePicture}`:void 0,onProfilePictureUpload:z,children:e.jsxs("div",{className:"mobile-container mobile-space-y max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"mobile-text-2xl font-bold text-foreground",children:"Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-1 mobile-text-base",children:"Welcome to your technician dashboard. Access your tasks and reports from the navigation menu."})]})}),e.jsx(Sn,{stats:R}),e.jsxs(se,{className:"mobile-card",children:[e.jsx(ae,{children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(ie,{className:"mobile-text-lg",children:"Task Management"}),e.jsx(Le,{className:"mobile-text-sm",children:"View, update, and manage your assigned tasks"})]}),e.jsxs("div",{className:"mobile-action-buttons",children:[e.jsxs("div",{className:"mobile-search",children:[e.jsx(At,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ee,{placeholder:"Search tasks...",value:t,onChange:D=>s(D.target.value),className:"mobile-search-input"})]}),e.jsxs(Oe,{value:r,onValueChange:n,children:[e.jsx(Te,{className:"mobile-select w-full sm:w-40",children:e.jsx(De,{})}),e.jsxs(Pe,{children:[e.jsx(q,{value:"all",children:"All Tasks"}),e.jsx(q,{value:"assigned",children:"Assigned"}),e.jsx(q,{value:"in_progress",children:"In Progress"}),e.jsx(q,{value:"completed",children:"Completed"}),e.jsx(q,{value:"delayed",children:"Delayed"})]})]})]})]})}),e.jsx(re,{children:e.jsx("div",{className:"mobile-space-y",children:Q.length===0?e.jsxs("div",{className:"mobile-empty-state",children:[e.jsx(ke,{className:"mobile-empty-state-icon text-muted-foreground"}),e.jsx("h3",{className:"mobile-empty-state-title",children:"No tasks found"}),e.jsx("p",{className:"mobile-empty-state-description",children:E.length===0?"No tasks have been assigned to you yet. You can view or submit your tasks and reports using the navigation menu.":"No tasks match your current filters."})]}):e.jsx("div",{className:"responsive-table",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2 bg-muted/50 mobile-text-sm font-medium text-muted-foreground",children:"Task Title"}),e.jsx("th",{className:"py-2 px-2 bg-muted/50 mobile-text-sm font-medium text-muted-foreground",children:"Project"}),e.jsx("th",{className:"py-2 px-2 bg-muted/50 mobile-text-sm font-medium text-muted-foreground",children:"Location"}),e.jsx("th",{className:"py-2 px-2 bg-muted/50 mobile-text-sm font-medium text-muted-foreground",children:"Priority"}),e.jsx("th",{className:"py-2 px-2 bg-muted/50 mobile-text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"py-2 px-2 bg-muted/50 mobile-text-sm font-medium text-muted-foreground",children:"Deadline"}),e.jsx("th",{className:"py-2 px-2 bg-muted/50 mobile-text-sm font-medium text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{children:Q.map(D=>e.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"py-2 px-2 mobile-text-sm text-foreground",children:e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:e.jsx("h4",{className:"font-medium",children:D.title})})}),e.jsx("td",{className:"py-2 px-2 mobile-text-sm text-foreground",children:D.project}),e.jsx("td",{className:"py-2 px-2 mobile-text-sm text-foreground",children:D.location}),e.jsx("td",{className:"py-2 px-2 mobile-text-sm text-foreground",children:e.jsx(te,{variant:"outline",className:he(D.priority),children:D.priority.toUpperCase()})}),e.jsx("td",{className:"py-2 px-2 mobile-text-sm text-foreground",children:e.jsx(te,{variant:"outline",className:Y(D.status),children:D.status.replace("_"," ").toUpperCase()})}),e.jsx("td",{className:"py-2 px-2 mobile-text-sm text-foreground",children:new Date(D.deadline).toLocaleDateString()}),e.jsx("td",{className:"py-2 px-2 mobile-text-sm text-foreground",children:e.jsxs("div",{className:"mobile-action-buttons",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>Se(D,"view"),children:[e.jsx(ft,{className:"h-3 w-3 mr-1"}),"View"]}),D.status!=="completed"&&e.jsx(_,{size:"sm",onClick:()=>Se(D,"update"),children:D.status==="assigned"?e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"h-3 w-3 mr-1"}),"Start"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"h-3 w-3 mr-1"}),"Update"]})})]})})]},D.id))})]})})})})]}),e.jsx(be,{open:o,onOpenChange:l,children:e.jsxs(fe,{className:"mobile-dialog-content max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(xe,{className:"mobile-text-lg",children:a?.title}),e.jsx(ge,{className:"mobile-text-sm",children:"Task details and information"})]}),a&&e.jsxs("div",{className:"mobile-space-y",children:[e.jsxs("div",{className:"mobile-grid-2",children:[e.jsxs("div",{children:[e.jsx(F,{className:"mobile-text-sm font-medium",children:"Project"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:a.project})]}),e.jsxs("div",{children:[e.jsx(F,{className:"mobile-text-sm font-medium",children:"Location"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:a.location})]}),e.jsxs("div",{children:[e.jsx(F,{className:"mobile-text-sm font-medium",children:"Assigned By"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:a.assignedBy})]}),e.jsxs("div",{children:[e.jsx(F,{className:"mobile-text-sm font-medium",children:"Deadline"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:new Date(a.deadline).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(F,{className:"mobile-text-sm font-medium",children:"Priority"}),e.jsx(te,{variant:"outline",className:he(a.priority),children:a.priority.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx(F,{className:"mobile-text-sm font-medium",children:"Status"}),e.jsx(te,{variant:"outline",className:Y(a.status),children:a.status.replace("_"," ").toUpperCase()})]})]}),e.jsxs("div",{children:[e.jsx(F,{className:"mobile-text-sm font-medium",children:"Description"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground mt-1",children:a.description})]}),a.locationLink&&e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Location Link"}),e.jsx("div",{className:"mt-1",children:e.jsxs("a",{href:a.locationLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline font-medium flex items-center gap-2",children:[e.jsx(Ft,{className:"h-4 w-4"}),"Open Location in Maps"]})})]}),a.files&&a.files.length>0||a.projectFiles&&a.projectFiles.length>0?e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Attached Files"}),e.jsxs("div",{className:"mt-2 space-y-3",children:[a.files&&a.files.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Task Files:"}),e.jsx("div",{className:"mt-2 space-y-2",children:a.files.map((D,S)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ie,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:D.originalName||D.name||D.filename}),D.size&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(D.size/1024).toFixed(1)," KB"]})]})]}),e.jsx("a",{href:D.url||`http://localhost:5000/${D.path}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 underline font-medium",children:"Download"})]},S))})]}),a.projectFiles&&a.projectFiles.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Project Files:"}),e.jsx("div",{className:"mt-2 space-y-2",children:a.projectFiles.map((D,S)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ie,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:D.originalName||D.name||D.filename}),D.size&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(D.size/1024).toFixed(1)," KB"]})]})]}),e.jsx("a",{href:D.url||`http://localhost:5000/${D.path}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 underline font-medium",children:"Download"})]},S))})]})]})]}):null,a.status!=="assigned"&&e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Progress"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Completion"}),e.jsxs("span",{className:"font-medium",children:[a.progress,"%"]})]}),e.jsx(mt,{value:a.progress,className:"h-2"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{variant:"outline",onClick:()=>l(!1),children:"Close"}),a.status!=="completed"&&e.jsx(_,{onClick:()=>{l(!1),Se(a,"update")},children:"Update Status"})]})]})]})}),e.jsx(be,{open:c,onOpenChange:h,children:e.jsxs(fe,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"Update Task Status"}),e.jsxs(ge,{children:['Update the status of "',a?.title,'"']})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(F,{htmlFor:"status",children:"New Status *"}),e.jsxs(Oe,{value:d,onValueChange:m,children:[e.jsx(Te,{className:"mt-2",children:e.jsx(De,{placeholder:"Select new status"})}),e.jsxs(Pe,{children:[e.jsx(q,{value:"in_progress",children:"Start Working"}),e.jsx(q,{value:"completed",children:"Mark Completed"}),e.jsx(q,{value:"delayed",children:"Report Delay"})]})]})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"comment",children:"Comments"}),e.jsx(Be,{id:"comment",placeholder:"Add comments about the task progress, issues, or completion details...",value:f,onChange:D=>y(D.target.value),className:"mt-2",rows:3})]}),e.jsxs("div",{children:[e.jsx(F,{children:"Upload Files"}),e.jsxs("div",{className:"mt-2 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(_,{variant:"outline",onClick:()=>document.getElementById("file-upload")?.click(),className:"w-full sm:w-auto",children:[e.jsx(nt,{className:"mr-2 h-4 w-4"}),"Upload Photos/Documents"]}),e.jsx("input",{id:"file-upload",type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx",onChange:oe,className:"hidden"})]}),x.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"text-sm",children:"Uploaded Files:"}),x.map((D,S)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded-md",children:[e.jsx("span",{className:"text-sm truncate",children:D.name}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>ye(S),children:""})]},S))]})]})]}),d==="delayed"&&e.jsxs("div",{children:[e.jsx(F,{htmlFor:"delayReason",children:"Delay Reason *"}),e.jsx(Be,{id:"delayReason",placeholder:"Enter the reason for the delay...",value:p,onChange:D=>w(D.target.value),className:"mt-2",rows:2,required:!0})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end",children:[e.jsx(_,{variant:"outline",onClick:()=>h(!1),className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(_,{onClick:ne,className:"w-full sm:w-auto",children:"Update Status"})]})]})]})})]})})},Kx=()=>{const t=zt();return u.useEffect(()=>{},[t.pathname]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Jx=()=>{const[t,s]=u.useState(""),[r,n]=u.useState("all"),[a,i]=u.useState("cards"),[o,l]=u.useState(null),[c,h]=u.useState(!1),[d,m]=u.useState(!1),[f,y]=u.useState([]),[x,g]=u.useState(""),[p,w]=u.useState(""),[E,N]=u.useState(null),{socket:T}=Rt();u.useEffect(()=>{const k={"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`};fetch("http://localhost:5000/api/manager/projects",{headers:k}).then(R=>R.json()).then(R=>{R.status==="success"&&y(R.data)}).catch(console.error),fetch("http://localhost:5000/api/reports/overview",{headers:k}).then(R=>R.json()).then(R=>{R.status==="success"&&N(R.data)}).catch(console.error)},[]),u.useEffect(()=>{if(T)return T.on("project_created",A=>{V.success(`New project "${A.project.siteName}" assigned to you.`)}),T.on("task_assigned",A=>{V.success(`Task "${A.task.title}" assigned to technician.`)}),T.on("task_status_updated",A=>{V(`Task "${A.task.title}" status updated to "${A.task.status}".`)}),T.on("report_submitted",A=>{V.success(`Report submitted for task "${A.report.task}".`)}),()=>{T.off("project_created"),T.off("task_assigned"),T.off("task_status_updated"),T.off("report_submitted")}},[T]);const L=f.filter(A=>{const k=A.siteName.toLowerCase().includes(t.toLowerCase())||A.clientName.toLowerCase().includes(t.toLowerCase())||A.location.toLowerCase().includes(t.toLowerCase()),R=r==="all"||(A.status||"active").toLowerCase()===r;return k&&R}),M=A=>{l(A),h(!0)},C=A=>{switch(A){case"Active":return e.jsx(Mt,{className:"h-4 w-4"});case"Completed":return e.jsx(qe,{className:"h-4 w-4"});case"On Hold":return e.jsx(aa,{className:"h-4 w-4"});default:return e.jsx(to,{className:"h-4 w-4"})}},z=A=>{switch(A){case"High":return"bg-red-500";case"Medium":return"bg-orange-500";case"Low":return"bg-green-500";default:return"bg-gray-500"}},W=({project:A})=>e.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-3 mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:A.siteName}),e.jsx(te,{className:`${z(A.priority)} text-white border-0 text-xs`,children:A.priority})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(fn,{className:"h-3 w-3"}),e.jsx("span",{children:A.clientName})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ft,{className:"h-3 w-3"}),e.jsx("span",{children:A.location})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ot,{className:"h-3 w-3"}),e.jsxs("span",{children:[new Date(A.startDate).toLocaleDateString()," -"," ",new Date(A.endDate).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(te,{className:`${A.statusColor} text-white border-0 flex items-center gap-1`,children:[C(A.status),A.status]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>M(A),children:[e.jsx(ft,{className:"h-3 w-3 mr-1"}),"View"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Budget:"}),e.jsx("span",{className:"font-medium ml-2",children:A.budget})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Team Size:"}),e.jsxs("span",{className:"font-medium ml-2",children:[A.teamSize," members"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Tasks: ",A.completedTasks,"/",A.tasksCount]}),e.jsxs("span",{className:"font-medium",children:[A.progress,"%"]})]}),e.jsx(mt,{value:A.progress,className:"h-2"})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-600",children:["Last updated: ",new Date(A.lastUpdated).toLocaleDateString()]})]}),K=({project:A})=>e.jsxs(Ne,{children:[e.jsx(B,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:A.name}),e.jsx("div",{className:"text-sm text-gray-600",children:A.client})]})}),e.jsx(B,{children:e.jsx("div",{className:"text-sm",children:e.jsx("div",{children:A.location})})}),e.jsx(B,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:new Date(A.startDate).toLocaleDateString()}),e.jsxs("div",{className:"text-gray-600",children:["to ",new Date(A.endDate).toLocaleDateString()]})]})}),e.jsx(B,{children:e.jsxs(te,{className:`${A.statusColor} text-white border-0 flex items-center gap-1 w-fit`,children:[C(A.status),A.status]})}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[A.completedTasks,"/",A.tasksCount]}),e.jsxs("span",{children:[A.progress,"%"]})]}),e.jsx(mt,{value:A.progress,className:"h-2"})]})}),e.jsx(B,{children:e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>M(A),children:[e.jsx(ft,{className:"h-3 w-3 mr-1"}),"View"]})})]},A.id);return e.jsx(Ve,{userRole:"manager",userName:"Project Manager",userEmail:"manager@cosmicsolutions.com",children:e.jsxs("div",{className:"p-4 lg:p-6 space-y-4 lg:space-y-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"My Projects"}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm lg:text-base",children:"Manage and track all your assigned projects."})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"Total Projects"}),e.jsx(ke,{className:"h-4 w-4 text-gray-600"})]}),e.jsxs(re,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f.length}),e.jsx("p",{className:"text-xs text-gray-600",children:"All assigned projects"})]})]}),e.jsxs(se,{children:[e.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"Active Projects"}),e.jsx(Mt,{className:"h-4 w-4 text-gray-600"})]}),e.jsxs(re,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f.filter(A=>!A.status||A.status==="Active"||A.status==="Planning"||A.status==="In Progress").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Currently in progress"})]})]}),e.jsxs(se,{children:[e.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"Completed"}),e.jsx(qe,{className:"h-4 w-4 text-gray-600"})]}),e.jsxs(re,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f.filter(A=>A.status==="Completed"||A.status==="Done").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Successfully finished"})]})]}),e.jsxs(se,{children:[e.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"On Hold"}),e.jsx(aa,{className:"h-4 w-4 text-gray-600"})]}),e.jsxs(re,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f.filter(A=>A.status==="On Hold"||A.status==="Paused").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Temporarily paused"})]})]})]}),e.jsxs(se,{children:[e.jsx(ae,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(ie,{children:"Projects Overview"}),e.jsxs(Le,{children:[L.length," of ",f.length," ","projects"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 sm:w-64",children:[e.jsx(At,{className:"absolute left-3 top-3 h-4 w-4 text-gray-600"}),e.jsx(ee,{placeholder:"Search projects...",value:t,onChange:A=>s(A.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hn,{className:"h-4 w-4 text-gray-600"}),e.jsxs(Oe,{value:r,onValueChange:n,children:[e.jsx(Te,{className:"w-32",children:e.jsx(De,{placeholder:"All Status"})}),e.jsxs(Pe,{children:[e.jsx(q,{value:"all",children:"All Status"}),e.jsx(q,{value:"active",children:"Active"}),e.jsx(q,{value:"completed",children:"Completed"}),e.jsx(q,{value:"on hold",children:"On Hold"})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:a==="cards"?"default":"outline",size:"sm",onClick:()=>i("cards"),children:e.jsx(bm,{className:"h-4 w-4"})}),e.jsx(_,{variant:a==="table"?"default":"outline",size:"sm",onClick:()=>i("table"),children:e.jsx(vm,{className:"h-4 w-4"})})]})]})]})}),e.jsx(re,{children:L.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ke,{className:"mx-auto h-12 w-12 text-gray-600"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No projects found"}),e.jsx("p",{className:"mt-2 text-gray-600",children:t||r!=="all"?"Try adjusting your search or filters":"Projects assigned by Super Admin will appear here."})]}):a==="cards"?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-1",children:L.map(A=>e.jsx(W,{project:A},A.id))}):e.jsxs(Ze,{children:[e.jsx(et,{children:e.jsxs(Ne,{children:[e.jsx($,{children:"Project & Client"}),e.jsx($,{children:"Location"}),e.jsx($,{children:"Timeline"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Progress"}),e.jsx($,{children:"Actions"})]})}),e.jsx(tt,{children:L.map(A=>e.jsx(K,{project:A},A.id))})]})})]}),E&&e.jsxs(se,{children:[e.jsx(ae,{children:e.jsx(ie,{children:"Project Overview Report"})}),e.jsx(re,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Projects"}),e.jsx("div",{className:"text-2xl font-bold",children:E.totalProjects})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completion Rate"}),e.jsxs("div",{className:"text-2xl font-bold",children:[(E.completionRate*100).toFixed(2),"%"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Average Duration"}),e.jsxs("div",{className:"text-2xl font-bold",children:[E.averageDuration," days"]})]})]})})]}),e.jsx(be,{open:c,onOpenChange:h,children:e.jsxs(fe,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(xe,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Project Details"]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>h(!1),children:e.jsx(kt,{className:"h-4 w-4"})})]}),e.jsx(ge,{children:"Complete information about the selected project."})]}),o&&e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:o.name}),e.jsx("p",{className:"text-gray-600",children:o.client})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(te,{className:`${o.statusColor} text-white border-0 flex items-center gap-1`,children:[C(o.status),o.status]}),e.jsx(te,{className:`${z(o.priority)} text-white border-0`,children:o.priority})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Location"}),e.jsxs("p",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Ft,{className:"h-4 w-4"}),o.location]})]}),e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Timeline"}),e.jsxs("p",{className:"flex items-center gap-2 mt-1",children:[e.jsx(ot,{className:"h-4 w-4"}),new Date(o.startDate).toLocaleDateString()," ","-"," ",new Date(o.endDate).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Budget"}),e.jsx("p",{className:"font-medium mt-1",children:o.budget})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Team Size"}),e.jsxs("p",{className:"flex items-center gap-2 mt-1",children:[e.jsx(at,{className:"h-4 w-4"}),o.teamSize," members"]})]}),e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Tasks Progress"}),e.jsxs("p",{className:"mt-1",children:[o.completedTasks,"/",o.tasksCount," completed"]})]}),e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Last Updated"}),e.jsx("p",{className:"mt-1",children:new Date(o.lastUpdated).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Project Progress"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Overall Progress"}),e.jsxs("span",{className:"font-medium",children:[o.progress,"%"]})]}),e.jsx(mt,{value:o.progress,className:"h-3"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Description"}),e.jsx("p",{className:"text-sm leading-relaxed p-4 bg-gray-50 rounded-lg",children:o.description})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t",children:[e.jsxs(_,{variant:"outline",onClick:()=>alert("Task management will be implemented in the next phase"),className:"flex-1",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"View Tasks"]}),e.jsxs(_,{variant:"outline",onClick:()=>alert("Timeline view will be implemented in the next phase"),className:"flex-1",children:[e.jsx(na,{className:"h-4 w-4 mr-2"}),"Timeline"]}),e.jsxs(_,{variant:"outline",onClick:()=>alert("Team view will be implemented in the next phase"),className:"flex-1",children:[e.jsx(at,{className:"h-4 w-4 mr-2"}),"Team"]})]})]})]})}),e.jsx(be,{open:d,onOpenChange:m,children:e.jsxs(fe,{className:"sm:max-w-[900px]",children:[e.jsxs(pe,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(xe,{className:"flex items-center gap-2",children:[e.jsx(na,{className:"h-5 w-5"}),"Project Timeline - Gantt Chart"]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>m(!1),children:e.jsx(kt,{className:"h-4 w-4"})})]}),e.jsx(ge,{children:"Visual timeline of all your projects and their progress."})]}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ro,{className:"mx-auto h-12 w-12 text-gray-600"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"Gantt Chart View"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Interactive Gantt chart will show:"}),e.jsxs("ul",{className:"mt-4 text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:" Project timelines and dependencies"}),e.jsx("li",{children:" Task scheduling and resource allocation"}),e.jsx("li",{children:" Critical path analysis"}),e.jsx("li",{children:" Progress tracking and milestones"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"This feature will be implemented in the next phase."})]})})]})})]})})},Qx=()=>{const[t,s]=u.useState(""),[r,n]=u.useState("All"),[a,i]=u.useState("All"),[o,l]=u.useState(!1),[c,h]=u.useState(!1),[d,m]=u.useState(null),[f,y]=u.useState(null),[x,g]=u.useState([]),[p,w]=u.useState({title:"",description:"",assignedTechnician:"",project:"",priority:"Medium",deadline:""}),E=[{name:"Field Technician",email:"technician@cosmicsolutions.com"},{name:"Mike Chen",email:"mike.chen@cosmicsolutions.com"},{name:"Lisa Rodriguez",email:"lisa.rodriguez@cosmicsolutions.com"},{name:"James Wilson",email:"james.wilson@cosmicsolutions.com"}],N=["All","Assigned","In Progress","Completed"],T=["All","Low","Medium","High","Urgent"],{socket:L}=Rt(),M=async()=>{const k=localStorage.getItem("token");if(!k)return;const Q=await(await fetch("http://localhost:5000/api/manager/tasks",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`}})).json();if(Q.status==="success"){const he=Q.data.map(Y=>({...Y,assignedTechnician:Y.assignedTo?.name||"",technicianEmail:Y.assignedTo?.email||"",project:Y.project?.siteName||Y.project||""}));g(he)}};u.useEffect(()=>{const k=localStorage.getItem("token");fetch("http://localhost:5000/api/profile",{headers:{Authorization:`Bearer ${k}`}}).then(R=>R.json()).then(R=>{R.status==="success"&&y(R.data)}).catch(console.error),M()},[]),u.useEffect(()=>{if(!L)return;const k=()=>{M()};return L.on("task_status_updated",k),()=>{L.off("task_status_updated",k)}},[L]);const C=u.useMemo(()=>x.filter(k=>{const R=k.title.toLowerCase().includes(t.toLowerCase())||k.assignedTechnician.toLowerCase().includes(t.toLowerCase())||k.project.toLowerCase().includes(t.toLowerCase()),Q=r==="All"||k.status===r,he=a==="All"||k.priority===a;return R&&Q&&he}),[x,t,r,a]),z=k=>{switch(k){case"Low":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"High":return"bg-orange-100 text-orange-800";case"Urgent":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},W=k=>{switch(k){case"Assigned":return"bg-blue-100 text-blue-800";case"In Progress":return"bg-yellow-100 text-yellow-800";case"Completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},K=k=>new Date(k)<new Date&&new Date(k).toDateString()!==new Date().toDateString(),A=()=>{if(p.title&&p.assignedTechnician&&p.deadline){const k={id:x.length+1,...p,technicianEmail:E.find(R=>R.name===p.assignedTechnician)?.email||"",status:"Assigned",createdDate:new Date().toISOString().split("T")[0],attachments:[]};g([...x,k]),w({title:"",description:"",assignedTechnician:"",project:"",priority:"Medium",deadline:""}),l(!1)}};return e.jsxs(Ve,{userRole:"manager",userName:f?.name||"Project Manager",userEmail:f?.email||"manager@cosmicsolutions.com",userProfilePicture:f?.profilePicture?`http://localhost:5000/${f.profilePicture}`:void 0,children:[e.jsxs("div",{className:"p-4 lg:p-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsx("p",{className:"text-gray-600 mt-1",children:"Central hub to view, manage, and track all tasks"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Mt,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.filter(k=>k.status==="In Progress").length})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(to,{className:"w-6 h-6 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.filter(k=>k.status==="Completed").length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 bg-green-600 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.filter(k=>K(k.deadline)).length})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(ot,{className:"w-6 h-6 text-red-600"})})]})})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border mb-6",children:e.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(At,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search tasks, projects, or technicians...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg w-full md:w-64 focus:outline-none focus:ring-2 focus:ring-blue-500",value:t,onChange:k=>s(k.target.value)})]}),e.jsx("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:r,onChange:k=>n(k.target.value),children:N.map(k=>e.jsx("option",{value:k,children:k==="All"?"All Status":k},k))}),e.jsx("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:a,onChange:k=>i(k.target.value),children:T.map(k=>e.jsx("option",{value:k,children:k==="All"?"All Priorities":k},k))})]})})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Task Title"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Assigned Technician"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Priority"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Deadline"})]})}),e.jsx("tbody",{children:C.map(k=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:k.title}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:k.description})]}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:k.assignedTechnician}),e.jsx("div",{className:"text-sm text-gray-500",children:k.technicianEmail})]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${z(k.priority)}`,children:k.priority})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ot,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:`text-sm ${K(k.deadline)?"text-red-600 font-medium":"text-gray-900"}`,children:new Date(k.deadline).toLocaleDateString()})]})})]},k.id))})]})}),C.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No tasks found matching your criteria."})})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md m-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Task"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Title"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:p.title,onChange:k=>w({...p,title:k.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,value:p.description,onChange:k=>w({...p,description:k.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assigned Technician"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:p.assignedTechnician,onChange:k=>w({...p,assignedTechnician:k.target.value}),children:[e.jsx("option",{value:"",children:"Select Technician"}),E.map(k=>e.jsx("option",{value:k.name,children:k.name},k.email))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:p.project,onChange:k=>w({...p,project:k.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:p.priority,onChange:k=>w({...p,priority:k.target.value}),children:[e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"}),e.jsx("option",{value:"Urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deadline"}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:p.deadline,onChange:k=>w({...p,deadline:k.target.value})})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:A,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Task"}),e.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})}),c&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl m-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:d.title}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(kt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg",children:d.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assigned Technician"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:d.assignedTechnician}),e.jsx("div",{className:"text-sm text-gray-500",children:d.technicianEmail})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project"}),e.jsx("p",{className:"text-gray-900",children:d.project})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${W(d.status)}`,children:d.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${z(d.priority)}`,children:d.priority})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deadline"}),e.jsx("p",{className:`text-gray-900 ${K(d.deadline)?"text-red-600 font-medium":""}`,children:new Date(d.deadline).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created Date"}),e.jsx("p",{className:"text-gray-900",children:new Date(d.createdDate).toLocaleDateString()})]})]}),e.jsx("div",{className:"flex gap-3 mt-6",children:e.jsx("button",{onClick:()=>h(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Close"})})]})})]})},Yx=()=>{const[t,s]=u.useState(""),[r,n]=u.useState(""),[a,i]=u.useState(""),[o,l]=u.useState([]),[c,h]=u.useState([]),d=p=>{const w=Array.from(p.target.files||[]);l(E=>[...E,...w])},m=p=>{l(w=>w.filter((E,N)=>N!==p))},f=async p=>{if(p.preventDefault(),!t||!r||!a){alert("Please fill in all required fields");return}const w={id:Date.now().toString(),taskTitle:t,workSummary:r,dateOfWork:a,images:o,submittedAt:new Date().toISOString(),status:"submitted"};try{h(E=>[w,...E]),s(""),n(""),i(""),l([]),alert(` Report submitted successfully!

Task: ${t}
Date: ${new Date(a).toLocaleDateString()}
Images: ${o.length} file(s)

Your report has been sent to the project manager for review.`)}catch{alert("Failed to submit report. Please try again.")}},y=p=>{switch(p){case"submitted":return"bg-blue-500 text-white";case"approved":return"bg-success text-success-foreground";case"rejected":return"bg-destructive text-destructive-foreground";default:return"bg-muted text-muted-foreground"}},x=p=>new Date(p).toLocaleDateString(),g=p=>new Date(p).toLocaleString();return e.jsx(Ve,{userRole:"technician",userName:"Field Technician",userEmail:"technician@cosmicsolutions.com",children:e.jsxs("div",{className:"p-4 lg:p-6 space-y-4 lg:space-y-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-foreground",children:"Reports"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm lg:text-base",children:"Submit work reports and track your submissions."})]})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(se,{children:[e.jsxs(ae,{children:[e.jsxs(ie,{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-5 w-5"}),e.jsx("span",{children:"Submit Report"})]}),e.jsx(Le,{children:"Submit a work report for your completed or ongoing tasks."})]}),e.jsx(re,{children:e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"task-title",children:"Task Title *"}),e.jsx(ee,{id:"task-title",placeholder:"Enter task title",value:t,onChange:p=>s(p.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"work-summary",children:"Work Summary *"}),e.jsx(Be,{id:"work-summary",placeholder:"Describe the work completed, challenges faced, and any observations...",value:r,onChange:p=>n(p.target.value),rows:5,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"date-of-work",children:"Date of Work *"}),e.jsx(ee,{id:"date-of-work",type:"date",value:a,onChange:p=>i(p.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"images",children:"Images (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(_,{type:"button",variant:"outline",onClick:()=>document.getElementById("image-upload")?.click(),className:"w-full",children:[e.jsx(nt,{className:"mr-2 h-4 w-4"}),"Upload Images"]}),e.jsx("input",{id:"image-upload",type:"file",multiple:!0,accept:"image/*",onChange:d,className:"hidden"}),o.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"text-sm",children:"Uploaded Images:"}),o.map((p,w)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded-md",children:[e.jsx("span",{className:"text-sm truncate",children:p.name}),e.jsx(_,{type:"button",variant:"ghost",size:"sm",onClick:()=>m(w),children:e.jsx(It,{className:"h-4 w-4"})})]},w))]})]})]}),e.jsxs(_,{type:"submit",className:"w-full",children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Submit Report"]})]})})]}),e.jsxs(se,{children:[e.jsxs(ae,{children:[e.jsx(ie,{children:"Submitted Reports"}),e.jsx(Le,{children:"Track your previously submitted reports and their status."})]}),e.jsx(re,{children:c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ie,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No reports submitted"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Your submitted reports will appear here."})]}):e.jsx("div",{className:"space-y-4",children:c.map(p=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:p.taskTitle}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Work Date: ",x(p.dateOfWork)]})]}),e.jsx(te,{variant:"outline",className:y(p.status),children:p.status.toUpperCase()})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:p.workSummary}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Submitted: ",g(p.submittedAt)]}),e.jsxs("span",{children:[p.images.length," image(s)"]})]})]},p.id))})})]})]}),c.length>0&&e.jsxs(se,{children:[e.jsxs(ae,{children:[e.jsx(ie,{children:"Recent Submissions"}),e.jsx(Le,{children:"Detailed view of your recent report submissions."})]}),e.jsx(re,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ze,{children:[e.jsx(et,{children:e.jsxs(Ne,{children:[e.jsx($,{children:"Task Title"}),e.jsx($,{children:"Work Date"}),e.jsx($,{children:"Submitted"}),e.jsx($,{children:"Images"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Actions"})]})}),e.jsx(tt,{children:c.map(p=>e.jsxs(Ne,{children:[e.jsx(B,{children:e.jsx("div",{className:"font-medium",children:p.taskTitle})}),e.jsx(B,{children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ot,{className:"h-3 w-3"}),e.jsx("span",{children:x(p.dateOfWork)})]})}),e.jsx(B,{children:g(p.submittedAt)}),e.jsxs(B,{children:[p.images.length," file(s)"]}),e.jsx(B,{children:e.jsx(te,{variant:"outline",className:y(p.status),children:p.status.toUpperCase()})}),e.jsx(B,{children:e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>{alert(`Report Details:

Task: ${p.taskTitle}
Work Date: ${x(p.dateOfWork)}
Summary: ${p.workSummary}
Images: ${p.images.length} file(s)
Status: ${p.status.toUpperCase()}`)},children:[e.jsx(ft,{className:"h-3 w-3 mr-1"}),"View"]})})]},p.id))})]})})})]})]})})},Xx=()=>{const[t,s]=u.useState(""),[r,n]=u.useState("all"),[a,i]=u.useState(null),[o,l]=u.useState(!1),[c,h]=u.useState(!1),[d,m]=u.useState(!1),[f,y]=u.useState(!1),[x,g]=u.useState(""),[p,w]=u.useState(""),[E,N]=u.useState(""),[T,L]=u.useState(""),[M,C]=u.useState(""),[z,W]=u.useState([]),[K,A]=u.useState([{id:"task-1",title:"CCTV Camera Installation",description:"Install 8 HD security cameras in the main office building",project:"Office Complex Security Setup",location:"Downtown Office Building",assignedBy:"Project Manager",priority:"high",status:"assigned",deadline:"2024-02-15",assignedDate:"2024-01-15",progress:0,estimatedHours:8},{id:"task-2",title:"Network Cable Setup",description:"Run ethernet cables for the new CCTV system",project:"Office Complex Security Setup",location:"Downtown Office Building",assignedBy:"Project Manager",priority:"medium",status:"in_progress",deadline:"2024-02-10",assignedDate:"2024-01-12",startedDate:"2024-01-13",progress:65,estimatedHours:6,actualHours:4}]),[k,R]=u.useState([]),Q=K.filter(j=>{const H=j.title.toLowerCase().includes(t.toLowerCase())||j.project.toLowerCase().includes(t.toLowerCase())||j.location.toLowerCase().includes(t.toLowerCase()),ue=r==="all"||j.status===r;return H&&ue}),he=j=>{switch(j){case"urgent":return"bg-red-500 text-white";case"high":return"bg-orange-500 text-white";case"medium":return"bg-yellow-500 text-black";case"low":return"bg-gray-500 text-white";default:return"bg-gray-500 text-white"}},Y=j=>{switch(j){case"assigned":return"bg-blue-500 text-white";case"in_progress":return"bg-yellow-500 text-black";case"completed":return"bg-green-500 text-white";case"delayed":return"bg-red-500 text-white";default:return"bg-gray-500 text-white"}},Se=j=>new Date(j).toLocaleDateString(),ne=(j,H)=>{i(j),H==="view"?l(!0):H==="update"?(g(j.status),h(!0)):H==="start"&&(N(j.title),C(new Date().toISOString().split("T")[0]),L(""),W([]),m(!0))},oe=j=>{const H=Array.from(j.target.files||[]);W(ue=>[...ue,...H])},ye=j=>{W(H=>H.filter((ue,Ce)=>Ce!==j))},D=async j=>{if(j.preventDefault(),!a){alert("No task selected");return}if(!T||!M){alert("Please fill in all required fields");return}try{const H={id:Date.now().toString(),taskId:a.id,taskTitle:a.title,workSummary:T,dateOfWork:M,images:z,submittedAt:new Date().toISOString(),status:"submitted"},ue={...a,status:"in_progress",startedDate:new Date().toISOString(),progress:25};A(K.map(Ce=>Ce.id===a.id?ue:Ce)),R(Ce=>[H,...Ce]),N(""),L(""),C(""),W([]),m(!1),i(null),alert(` Task started and report submitted successfully!

Task: ${a.title}
Status: Started (In Progress)
Work Date: ${new Date(M).toLocaleDateString()}
Images: ${z.length} file(s)

Your task has been started and the initial report has been sent to the project manager for review.`)}catch{alert("Failed to start task and submit report. Please try again.")}},S=async j=>{if(j.preventDefault(),!E||!T||!M){alert("Please fill in all required fields");return}try{const H={id:Date.now().toString(),taskId:"",taskTitle:E,workSummary:T,dateOfWork:M,images:z,submittedAt:new Date().toISOString(),status:"submitted"};R(ue=>[H,...ue]),N(""),L(""),C(""),W([]),alert(` Report submitted successfully!

Task: ${E}
Date: ${new Date(M).toLocaleDateString()}
Images: ${z.length} file(s)

Your report has been sent to the project manager for review.`),y(!1)}catch{alert("Failed to submit report. Please try again.")}},P=()=>{if(!a||!x){alert("Please select a status");return}const j={...a,status:x,...x==="in_progress"&&!a.startedDate?{startedDate:new Date().toISOString()}:{},...x==="completed"?{completedDate:new Date().toISOString(),progress:100}:{}};A(K.map(H=>H.id===a.id?j:H)),alert(`Task "${a.title}" status updated to "${x.replace("_"," ")}"

Work Progress Description: ${p}`),h(!1),i(null),w("")};return e.jsx(Ve,{userRole:"technician",userName:"Field Technician",userEmail:"technician@cosmicsolutions.com",children:e.jsxs("div",{className:"p-4 lg:p-6 space-y-4 lg:space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold",children:"My Tasks"}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm lg:text-base",children:"View and manage your assigned tasks."})]}),e.jsxs(_,{onClick:()=>{N(""),L(""),C(new Date().toISOString().split("T")[0]),W([]),y(!0)},className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),"Submit Report"]})]}),e.jsxs(se,{children:[e.jsx(ae,{children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(ie,{children:"Task List"}),e.jsx(Le,{children:"All tasks assigned to you"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(At,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(ee,{placeholder:"Search tasks...",value:t,onChange:j=>s(j.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs(Oe,{value:r,onValueChange:n,children:[e.jsx(Te,{className:"w-full sm:w-40",children:e.jsx(De,{})}),e.jsxs(Pe,{children:[e.jsx(q,{value:"all",children:"All Tasks"}),e.jsx(q,{value:"assigned",children:"Assigned"}),e.jsx(q,{value:"in_progress",children:"In Progress"}),e.jsx(q,{value:"completed",children:"Completed"}),e.jsx(q,{value:"delayed",children:"Delayed"})]})]})]})]})}),e.jsx(re,{children:Q.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ke,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No tasks found"}),e.jsx("p",{className:"mt-2 text-gray-600",children:K.length===0?"No tasks have been assigned to you yet. You can view or submit your tasks and reports using the navigation menu.":"No tasks match your current filters."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ze,{children:[e.jsx(et,{children:e.jsxs(Ne,{children:[e.jsx($,{children:"Task Name"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Priority"}),e.jsx($,{children:"Assigned Date"}),e.jsx($,{children:"Due Date"}),e.jsx($,{children:"Progress"}),e.jsx($,{children:"Actions"})]})}),e.jsx(tt,{children:Q.map(j=>e.jsxs(Ne,{children:[e.jsx(B,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:j.title}),e.jsx("div",{className:"text-sm text-gray-600",children:j.project})]})}),e.jsx(B,{children:e.jsx(te,{className:Y(j.status),children:j.status.replace("_"," ").toUpperCase()})}),e.jsx(B,{children:e.jsx(te,{className:he(j.priority),children:j.priority.toUpperCase()})}),e.jsx(B,{children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ot,{className:"h-3 w-3"}),e.jsx("span",{children:Se(j.assignedDate)})]})}),e.jsx(B,{children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ot,{className:"h-3 w-3"}),e.jsx("span",{children:Se(j.deadline)})]})}),e.jsx(B,{children:e.jsxs("div",{className:"w-24",children:[e.jsx("div",{className:"flex justify-between text-xs mb-1",children:e.jsxs("span",{children:[j.progress,"%"]})}),e.jsx(mt,{value:j.progress,className:"h-2"})]})}),e.jsx(B,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>ne(j,"view"),children:[e.jsx(ft,{className:"h-3 w-3 mr-1"}),"View"]}),j.status!=="completed"&&e.jsx(_,{size:"sm",onClick:()=>j.status==="assigned"?ne(j,"start"):ne(j,"update"),children:j.status==="assigned"?e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"h-3 w-3 mr-1"}),"Start"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"h-3 w-3 mr-1"}),"Update"]})})]})})]},j.id))})]})})})]}),k.length>0&&e.jsxs(se,{children:[e.jsxs(ae,{children:[e.jsx(ie,{children:"Recent Reports"}),e.jsx(Le,{children:"Your recently submitted reports"})]}),e.jsx(re,{children:e.jsx("div",{className:"space-y-4",children:k.slice(0,3).map(j=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:j.taskTitle}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Work Date: ",Se(j.dateOfWork)]})]}),e.jsx(te,{className:Y(j.status),children:j.status.toUpperCase()})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:j.workSummary}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[e.jsxs("span",{children:["Submitted: ",new Date(j.submittedAt).toLocaleString()]}),e.jsxs("span",{children:[j.images.length," image(s)"]})]})]},j.id))})})]}),e.jsx(be,{open:o,onOpenChange:l,children:e.jsxs(fe,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:a?.title}),e.jsx(ge,{children:"Task details and information"})]}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Project:"})," ",a.project]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Location:"})," ",a.location]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Assigned By:"})," ",a.assignedBy]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Deadline:"})," ",Se(a.deadline)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Priority:"}),e.jsx(te,{className:`ml-2 ${he(a.priority)}`,children:a.priority.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"}),e.jsx(te,{className:`ml-2 ${Y(a.status)}`,children:a.status.replace("_"," ").toUpperCase()})]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Description:"}),e.jsx("p",{className:"mt-1",children:a.description})]}),a.status!=="assigned"&&e.jsxs("div",{children:[e.jsx("strong",{children:"Progress:"}),e.jsxs("div",{className:"mt-2",children:[e.jsx(mt,{value:a.progress,className:"h-2"}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[a.progress,"% Complete"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{variant:"outline",onClick:()=>l(!1),children:"Close"}),a.status!=="completed"&&e.jsx(_,{onClick:()=>{l(!1),a.status==="assigned"?ne(a,"start"):ne(a,"update")},children:a.status==="assigned"?"Start Task":"Update Status"})]})]})]})}),e.jsx(be,{open:d,onOpenChange:m,children:e.jsxs(fe,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsxs(xe,{className:"flex items-center space-x-2",children:[e.jsx(Ps,{className:"h-5 w-5"}),e.jsx("span",{children:"Start Task & Submit Initial Report"})]}),e.jsxs(ge,{children:['Start working on "',a?.title,'" and submit your initial work report']})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[a&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Task:"})," ",a.title]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Project:"})," ",a.project]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Location:"})," ",a.location]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"work-summary",children:"Initial Work Summary *"}),e.jsx(Be,{id:"work-summary",placeholder:"Describe the initial work completed, setup done, challenges faced, and any observations...",value:T,onChange:j=>L(j.target.value),rows:4,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"date-of-work",children:"Date of Work *"}),e.jsx(ee,{id:"date-of-work",type:"date",value:M,onChange:j=>C(j.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"images",children:"Images (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(_,{type:"button",variant:"outline",onClick:()=>document.getElementById("start-task-image-upload")?.click(),className:"w-full",children:[e.jsx(nt,{className:"mr-2 h-4 w-4"}),"Upload Images"]}),e.jsx("input",{id:"start-task-image-upload",type:"file",multiple:!0,accept:"image/*",onChange:oe,className:"hidden"}),z.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"text-sm",children:"Uploaded Images:"}),z.map((j,H)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[e.jsx("span",{className:"text-sm truncate",children:j.name}),e.jsx(_,{type:"button",variant:"ghost",size:"sm",onClick:()=>ye(H),children:e.jsx(It,{className:"h-4 w-4"})})]},H))]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsxs(_,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Ps,{className:"mr-2 h-4 w-4"}),"Start Task & Submit Report"]})]})]})]})}),e.jsx(be,{open:f,onOpenChange:y,children:e.jsxs(fe,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsxs(xe,{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-5 w-5"}),e.jsx("span",{children:"Submit Report"})]}),e.jsx(ge,{children:"Submit a work report for your completed or ongoing tasks."})]}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"task-title",children:"Task Title *"}),e.jsx(ee,{id:"task-title",placeholder:"Enter task title",value:E,onChange:j=>N(j.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"standalone-work-summary",children:"Work Summary *"}),e.jsx(Be,{id:"standalone-work-summary",placeholder:"Describe the work completed, challenges faced, and any observations...",value:T,onChange:j=>L(j.target.value),rows:5,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"standalone-date-of-work",children:"Date of Work *"}),e.jsx(ee,{id:"standalone-date-of-work",type:"date",value:M,onChange:j=>C(j.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"standalone-images",children:"Images (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(_,{type:"button",variant:"outline",onClick:()=>document.getElementById("standalone-image-upload")?.click(),className:"w-full",children:[e.jsx(nt,{className:"mr-2 h-4 w-4"}),"Upload Images"]}),e.jsx("input",{id:"standalone-image-upload",type:"file",multiple:!0,accept:"image/*",onChange:oe,className:"hidden"}),z.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"text-sm",children:"Uploaded Images:"}),z.map((j,H)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[e.jsx("span",{className:"text-sm truncate",children:j.name}),e.jsx(_,{type:"button",variant:"ghost",size:"sm",onClick:()=>ye(H),children:e.jsx(It,{className:"h-4 w-4"})})]},H))]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsxs(_,{type:"submit",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Submit Report"]})]})]})]})}),e.jsx(be,{open:c,onOpenChange:h,children:e.jsxs(fe,{className:"sm:max-w-[500px]",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"Update Task Status"}),e.jsxs(ge,{children:['Update the status of "',a?.title,'"']})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"text-sm font-medium",children:"New Status *"}),e.jsxs(Oe,{value:x,onValueChange:g,children:[e.jsx(Te,{className:"mt-2",children:e.jsx(De,{placeholder:"Select new status"})}),e.jsxs(Pe,{children:[e.jsx(q,{value:"in_progress",children:"Start Working"}),e.jsx(q,{value:"completed",children:"Mark Completed"}),e.jsx(q,{value:"delayed",children:"Report Delay"})]})]})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"status-description",children:"Work Progress Description"}),e.jsx(Be,{id:"status-description",placeholder:"Describe how much work has been done, any issues, or progress details...",value:p,onChange:j=>w(j.target.value),rows:3,className:"mt-2"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(_,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(_,{onClick:P,children:"Update Status"})]})]})]})})]})})},Zx=()=>{const[t,s]=u.useState(""),[r,n]=u.useState(null),[a,i]=u.useState(!1),[o,l]=u.useState(!1),[c,h]=u.useState(""),[d,m]=u.useState(""),[f,y]=u.useState(""),[x,g]=u.useState(""),{socket:p}=Rt(),[w,E]=u.useState([]);u.useEffect(()=>{const C=localStorage.getItem("token");C&&fetch("http://localhost:5000/api/manager/technicians",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`}}).then(z=>z.json()).then(z=>{z.status==="success"&&E(z.data)}).catch(console.error)},[]),u.useEffect(()=>{if(p)return p.on("task_assigned",C=>{V.success(`Task "${C.task.title}" assigned to technician.`)}),p.on("task_status_updated",C=>{V(`Task "${C.task.title}" status updated to "${C.task.status}".`)}),p.on("report_submitted",C=>{V.success(`Report submitted for task "${C.report.task}".`)}),()=>{p.off("task_assigned"),p.off("task_status_updated"),p.off("report_submitted")}},[p]);const N={totalTechnicians:w.length,availableTechnicians:w.filter(C=>C.status==="Available").length,avgCompletionTime:w.reduce((C,z)=>C+z.avgCompletionTime,0)/w.length||0,avgRating:w.reduce((C,z)=>C+parseFloat(z.rating),0)/w.length||0,totalTasksCompleted:w.reduce((C,z)=>C+z.completedTasks,0),totalActiveTasks:w.reduce((C,z)=>C+z.activeTasks,0)};w.filter(C=>C.name.toLowerCase().includes(t.toLowerCase())||C.email.toLowerCase().includes(t.toLowerCase())||C.department.toLowerCase().includes(t.toLowerCase()));const T=C=>{n(C),l(!0)},L=()=>{if(!c){alert("Please fill in the task title");return}Date.now().toString(),r.id,new Date().toISOString(),alert(` Task "${c}" has been successfully assigned to ${r?.name}

The technician will be notified and can now view this task in their dashboard.`),h(""),m(""),y(""),g(""),l(!1)},M=()=>{new Date().toISOString(),w.map(C=>({name:C.name,email:C.email,status:C.status,totalTasks:C.totalTasks,completedTasks:C.completedTasks,activeTasks:C.activeTasks,avgCompletionTime:C.avgCompletionTime,rating:C.rating})),alert(` Team Report Generated!

Total Technicians: ${N.totalTechnicians}
Available: ${N.availableTechnicians}
Avg. Completion Time: ${N.avgCompletionTime.toFixed(1)} hours
Team Rating: ${N.avgRating.toFixed(1)}/5.0

Report would be downloaded as CSV/PDF in a real implementation.`)};return e.jsx(Ve,{userRole:"manager",userName:"Project Manager",userEmail:"manager@cosmicsolutions.com",children:e.jsxs("div",{className:"p-4 lg:p-6 space-y-4 lg:space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-foreground",children:"Team Technicians"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm lg:text-base",children:"Manage and monitor your technician team performance."})]}),e.jsxs(_,{variant:"outline",onClick:M,className:"w-full sm:w-auto",children:[e.jsx(sr,{className:"mr-2 h-4 w-4"}),"Export Team Report"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"Total Technicians"}),e.jsx(at,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(re,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N.totalTechnicians}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[N.availableTechnicians," available"]})]})]}),e.jsxs(se,{children:[e.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"Avg. Completion Time"}),e.jsx(Mt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(re,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[N.avgCompletionTime.toFixed(1),"h"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Per task completion"})]})]}),e.jsxs(se,{children:[e.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"Team Rating"}),e.jsx(Sm,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(re,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[N.avgRating.toFixed(1),"/5.0"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average performance"})]})]}),e.jsxs(se,{children:[e.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"Active Tasks"}),e.jsx(fm,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(re,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N.totalActiveTasks}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[N.totalTasksCompleted," completed"]})]})]})]}),e.jsx(be,{open:a,onOpenChange:i,children:e.jsxs(fe,{className:"sm:max-w-[700px]",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"Technician Profile"}),e.jsx(ge,{children:"Detailed information and performance summary"})]}),r&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(fn,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold",children:r.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(te,{variant:"outline",className:`${r.statusColor} text-white border-0`,children:r.status}),e.jsx("span",{className:"text-sm text-muted-foreground",children:""}),e.jsx("span",{className:"text-sm text-muted-foreground",children:r.department})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:r.totalTasks}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Tasks"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.completedTasks}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Completed"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r.activeTasks}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Active"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:r.rating}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Rating"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Task Completion Rate"}),e.jsxs("span",{className:"font-medium",children:[r.totalTasks>0?(r.completedTasks/r.totalTasks*100).toFixed(1):0,"%"]})]}),e.jsx(mt,{value:r.totalTasks>0?r.completedTasks/r.totalTasks*100:0,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Skills & Expertise"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.skills.length>0?r.skills.map(C=>e.jsx(te,{variant:"secondary",children:C},C)):e.jsx("span",{className:"text-sm text-muted-foreground",children:"No skills data available"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Join Date:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(r.joinDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Active:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(r.lastActive).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Avg. Completion Time:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[r.avgCompletionTime," hours"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Department:"}),e.jsx("span",{className:"ml-2 font-medium",children:r.department})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Recent Tasks"}),e.jsx("div",{className:"space-y-2",children:r.recentTasks.length>0?r.recentTasks.map(C=>e.jsx("div",{className:"p-3 border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:C.title}),e.jsx("div",{className:"text-sm text-muted-foreground",children:C.project})]}),e.jsx(te,{variant:C.status==="Completed"?"default":"secondary",children:C.status})]})},C.id)):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No recent tasks available"})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(_,{variant:"outline",onClick:()=>i(!1),children:"Close"}),e.jsx(_,{onClick:()=>{i(!1),T(r)},children:"Assign Task"})]})]})}),e.jsx(be,{open:o,onOpenChange:l,children:e.jsxs(fe,{className:"sm:max-w-[600px]",children:[e.jsxs(pe,{children:[e.jsxs(xe,{children:["Assign Task to ",r?.name]}),e.jsx(ge,{children:"Create and assign a new task to this technician."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"task-title",children:"Task Title *"}),e.jsx(ee,{id:"task-title",placeholder:"Enter task title",value:c,onChange:C=>h(C.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"task-description",children:"Description"}),e.jsx(Be,{id:"task-description",placeholder:"Enter task description and requirements",value:d,onChange:C=>m(C.target.value),rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"priority",children:"Priority"}),e.jsxs(Oe,{value:f,onValueChange:y,children:[e.jsx(Te,{children:e.jsx(De,{placeholder:"Select priority"})}),e.jsxs(Pe,{children:[e.jsx(q,{value:"low",children:"Low"}),e.jsx(q,{value:"medium",children:"Medium"}),e.jsx(q,{value:"high",children:"High"}),e.jsx(q,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"deadline",children:"Deadline"}),e.jsx(ee,{id:"deadline",type:"date",value:x,onChange:C=>g(C.target.value)})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end",children:[e.jsx(_,{variant:"outline",onClick:()=>l(!1),className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(_,{onClick:L,className:"w-full sm:w-auto",children:"Assign Task"})]})]})})]})})},Ge=({children:t,allowedRoles:s=[],requireAuth:r=!0})=>{const{user:n,isAuthenticated:a,isLoading:i}=cn(),o=zt();if(i)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});if(r&&!a)return e.jsx(_r,{to:"/login",state:{from:o},replace:!0});if(s.length>0&&n){const l=d=>d==="super-admin"?"superadmin":d,c=l(n.role);if(!s.map(l).includes(c)){const m={superadmin:"/superadmin","super-admin":"/superadmin",manager:"/manager",technician:"/technician"}[n.role]||"/login";return e.jsx(_r,{to:m,replace:!0})}}return e.jsx(e.Fragment,{children:t})},eg=()=>{const t=()=>{V.success("Success notification!"),V.error("Error notification!"),V("Default notification!"),V.loading("Loading notification...")};return e.jsxs("div",{className:"p-8 space-y-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Toast Notification Test"}),e.jsx("p",{className:"text-muted-foreground",children:"Click the button below to test different types of toast notifications."}),e.jsx(_,{onClick:t,children:"Test All Toast Types"})]})},tg=new bd,sg=()=>e.jsx(wd,{client:tg,children:e.jsx(tc,{children:e.jsx(gu,{children:e.jsx(im,{children:e.jsxs(Qc,{children:[e.jsx(em,{position:"top-right"}),e.jsx(pu,{children:e.jsxs(hu,{children:[e.jsx(Re,{path:"/",element:e.jsx(_r,{to:"/login",replace:!0})}),e.jsx(Re,{path:"/login",element:e.jsx(Pm,{})}),e.jsx(Re,{path:"/test-toast",element:e.jsx(eg,{})}),e.jsx(Re,{path:"/superadmin",element:e.jsx(Ge,{allowedRoles:["superadmin","super-admin"],children:e.jsx(sp,{})})}),e.jsx(Re,{path:"/superadmin/projects",element:e.jsx(Ge,{allowedRoles:["superadmin","super-admin"],children:e.jsx(Ix,{})})}),e.jsx(Re,{path:"/superadmin/reports",element:e.jsx(Ge,{allowedRoles:["superadmin","super-admin"],children:e.jsx(Ux,{})})}),e.jsx(Re,{path:"/superadmin/settings",element:e.jsx(Ge,{allowedRoles:["superadmin","super-admin"],children:e.jsx(op,{})})}),e.jsx(Re,{path:"/manager",element:e.jsx(Ge,{allowedRoles:["manager"],children:e.jsx($x,{})})}),e.jsx(Re,{path:"/manager/projects",element:e.jsx(Ge,{allowedRoles:["manager"],children:e.jsx(Jx,{})})}),e.jsx(Re,{path:"/manager/technicians",element:e.jsx(Ge,{allowedRoles:["manager"],children:e.jsx(Zx,{})})}),e.jsx(Re,{path:"/manager/tasks",element:e.jsx(Ge,{allowedRoles:["manager"],children:e.jsx(Qx,{})})}),e.jsx(Re,{path:"/technician",element:e.jsx(Ge,{allowedRoles:["technician"],children:e.jsx(Gx,{})})}),e.jsx(Re,{path:"/technician/tasks",element:e.jsx(Ge,{allowedRoles:["technician"],children:e.jsx(Xx,{})})}),e.jsx(Re,{path:"/technician/reports",element:e.jsx(Ge,{allowedRoles:["technician"],children:e.jsx(Yx,{})})}),e.jsx(Re,{path:"*",element:e.jsx(Kx,{})})]})})]})})})})});ec.createRoot(document.getElementById("root")).render(e.jsx(sg,{}));
