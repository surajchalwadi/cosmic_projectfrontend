import{r as c,j as e,P as ke,c as _t,a as kt,b as Ya,D as ci,C as di,d as ui,u as at,A as mi,e as Ce,f as hi,$ as pi,S as xi,g as Ka,h as fi,i as Xa,k as Ja,l as gi,m as Za,n as ji,o as er,p as tr,q as vi,s as bi,t as sr,v as yi,w as Ni,R as As,x as Xe,y as Jt,O as ar,z as wi,B as rr,E as ki,T as nr,F as ir,G as Si,H as Ci,I as or,J as lr,K as Pi,L as cr,M as dr,N as ur,Q as mr,U as hr,V as pr,W as xr,X as Ti,Y as Ai,Z as fr,_ as gr,a0 as Ri,a1 as Di,a2 as Ei,a3 as Mi}from"./ui-BXD_MuXQ.js";import{a as Li,r as Ii}from"./vendor-DweBbekM.js";import{l as Oi,a as Bt}from"./utils-DZrtGfBC.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var Vt={},ha;function Fi(){if(ha)return Vt;ha=1;var t=Li();return Vt.createRoot=t.createRoot,Vt.hydrateRoot=t.hydrateRoot,Vt}var _i=Fi();const pa={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"https://cosmicproject-backend-1.onrender.com/api",VITE_FILE_BASE_URL:"https://cosmicproject-backend-1.onrender.com",VITE_SOCKET_URL:"https://cosmicproject-backend-1.onrender.com"},Ns=(t,s)=>typeof window<"u"&&pa&&pa[t]||s,$i=()=>!0,xa={API_BASE_URL:"https://cosmicproject-backend-1.onrender.com/api",SOCKET_URL:"https://cosmicproject-backend-1.onrender.com",FILE_BASE_URL:"https://cosmicproject-backend-1.onrender.com",NODE_ENV:"production"},Ui={API_BASE_URL:"https://cosmicproject-backend-1.onrender.com/api",SOCKET_URL:"https://cosmicproject-backend-1.onrender.com",FILE_BASE_URL:"https://cosmicproject-backend-1.onrender.com",NODE_ENV:"development"},zi=()=>{const t=Ns("VITE_API_BASE_URL",""),s=Ns("VITE_SOCKET_URL",""),a=Ns("VITE_FILE_BASE_URL","");if(t&&s&&a)return{API_BASE_URL:t,SOCKET_URL:s,FILE_BASE_URL:a,NODE_ENV:"production"};if(typeof window<"u"){const r=window.location.hostname;if(r.includes("vercel.app")||r.includes("cosmic-projectfrontend"))return xa}return $i()?xa:Ui},ds=zi(),qe=ds.API_BASE_URL,Bi=ds.SOCKET_URL;ds.FILE_BASE_URL;ds.NODE_ENV;const jr=()=>localStorage.getItem("token"),gt=(t=!0)=>{const s={"Content-Type":"application/json"};if(t){const a=jr();a&&(s.Authorization=`Bearer ${a}`)}return s},nt=async t=>{const s=await t.json();if(!t.ok)throw new Error(s.message||`HTTP error! status: ${t.status}`);return s},Qt={login:async(t,s,a)=>{const r=await fetch(`${qe}/auth/login`,{method:"POST",headers:gt(!1),body:JSON.stringify({email:t,password:s,...a&&{role:a}})});return nt(r)},register:async t=>{const s=await fetch(`${qe}/auth/register`,{method:"POST",headers:gt(!1),body:JSON.stringify(t)});return nt(s)},logout:async()=>{const t=await fetch(`${qe}/auth/logout`,{method:"POST",headers:gt()});return nt(t)},getCurrentUser:async()=>{const t=await fetch(`${qe}/auth/me`,{method:"GET",headers:gt()});return nt(t)},getProfile:async()=>{const t=await fetch(`${qe}/profile`,{method:"GET",headers:gt()});return nt(t)},uploadProfilePicture:async t=>{const s=jr(),a=new FormData;a.append("profilePicture",t);const r=await fetch(`${qe}/profile/picture`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:a});return nt(r)},changePassword:async(t,s)=>{const a=await fetch(`${qe}/auth/change-password`,{method:"PUT",headers:gt(),body:JSON.stringify({currentPassword:t,newPassword:s})});return nt(a)}},vr=c.createContext(void 0),jt={isAuthenticated:()=>!!localStorage.getItem("token"),getCurrentUserFromSession:()=>{try{const t=sessionStorage.getItem("currentUser");return t?JSON.parse(t):null}catch{return null}},clearAuth:()=>{localStorage.removeItem("token"),sessionStorage.removeItem("currentUser")}},Vi=({children:t})=>{const[s,a]=c.useState(null),[r,n]=c.useState(!0);c.useEffect(()=>{(async()=>{try{if(!localStorage.getItem("token")){const u=jt.getCurrentUserFromSession();u&&a(u),n(!1);return}try{const u=await Qt.getCurrentUser();if(u.status==="success"&&u.data?.user)a(u.data.user),sessionStorage.setItem("currentUser",JSON.stringify(u.data.user));else throw new Error("Invalid response format")}catch{jt.clearAuth();const h=jt.getCurrentUserFromSession();h&&a(h)}}catch{const u=jt.getCurrentUserFromSession();u?a(u):jt.clearAuth()}finally{n(!1)}})()},[]);const d={user:s,isLoading:r,isAuthenticated:!!s,login:async(p,m,u)=>{try{n(!0);const h=await Qt.login(p.trim().toLowerCase(),m,u);return h.status==="success"&&h.data?.token&&h.data?.user?(localStorage.setItem("token",h.data.token),a(h.data.user),sessionStorage.setItem("currentUser",JSON.stringify(h.data.user)),!0):!1}catch{return!1}finally{n(!1)}},logout:async()=>{try{localStorage.getItem("token")&&await Qt.logout().catch(m=>{})}catch{}finally{a(null),jt.clearAuth()}},updateUser:p=>{if(s){const m={...s,...p};a(m),sessionStorage.setItem("currentUser",JSON.stringify(m))}}};return e.jsx(vr.Provider,{value:d,children:t})};var Wi=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),qi="VisuallyHidden",br=c.forwardRef((t,s)=>e.jsx(ke.span,{...t,ref:s,style:{...Wi,...t.style}}));br.displayName=qi;var Hi=br,[us,bm]=_t("Tooltip",[Ya]),Vs=Ya(),yr="TooltipProvider",Gi=700,fa="tooltip.open",[Qi,Nr]=us(yr),wr=t=>{const{__scopeTooltip:s,delayDuration:a=Gi,skipDelayDuration:r=300,disableHoverableContent:n=!1,children:i}=t,o=c.useRef(!0),l=c.useRef(!1),d=c.useRef(0);return c.useEffect(()=>{const p=d.current;return()=>window.clearTimeout(p)},[]),e.jsx(Qi,{scope:s,isOpenDelayedRef:o,delayDuration:a,onOpen:c.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:c.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:c.useCallback(p=>{l.current=p},[]),disableHoverableContent:n,children:i})};wr.displayName=yr;var kr="Tooltip",[ym,ms]=us(kr),Rs="TooltipTrigger",Yi=c.forwardRef((t,s)=>{const{__scopeTooltip:a,...r}=t,n=ms(Rs,a),i=Nr(Rs,a),o=Vs(a),l=c.useRef(null),d=at(s,l,n.onTriggerChange),p=c.useRef(!1),m=c.useRef(!1),u=c.useCallback(()=>p.current=!1,[]);return c.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),e.jsx(mi,{asChild:!0,...o,children:e.jsx(ke.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...r,ref:d,onPointerMove:Ce(t.onPointerMove,h=>{h.pointerType!=="touch"&&!m.current&&!i.isPointerInTransitRef.current&&(n.onTriggerEnter(),m.current=!0)}),onPointerLeave:Ce(t.onPointerLeave,()=>{n.onTriggerLeave(),m.current=!1}),onPointerDown:Ce(t.onPointerDown,()=>{n.open&&n.onClose(),p.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:Ce(t.onFocus,()=>{p.current||n.onOpen()}),onBlur:Ce(t.onBlur,n.onClose),onClick:Ce(t.onClick,n.onClose)})})});Yi.displayName=Rs;var Ki="TooltipPortal",[Nm,Xi]=us(Ki,{forceMount:void 0}),vt="TooltipContent",Sr=c.forwardRef((t,s)=>{const a=Xi(vt,t.__scopeTooltip),{forceMount:r=a.forceMount,side:n="top",...i}=t,o=ms(vt,t.__scopeTooltip);return e.jsx(kt,{present:r||o.open,children:o.disableHoverableContent?e.jsx(Cr,{side:n,...i,ref:s}):e.jsx(Ji,{side:n,...i,ref:s})})}),Ji=c.forwardRef((t,s)=>{const a=ms(vt,t.__scopeTooltip),r=Nr(vt,t.__scopeTooltip),n=c.useRef(null),i=at(s,n),[o,l]=c.useState(null),{trigger:d,onClose:p}=a,m=n.current,{onPointerInTransitChange:u}=r,h=c.useCallback(()=>{l(null),u(!1)},[u]),j=c.useCallback((f,v)=>{const x=f.currentTarget,k={x:f.clientX,y:f.clientY},M=ao(k,x.getBoundingClientRect()),N=ro(k,M),T=no(v.getBoundingClientRect()),O=oo([...N,...T]);l(O),u(!0)},[u]);return c.useEffect(()=>()=>h(),[h]),c.useEffect(()=>{if(d&&m){const f=x=>j(x,m),v=x=>j(x,d);return d.addEventListener("pointerleave",f),m.addEventListener("pointerleave",v),()=>{d.removeEventListener("pointerleave",f),m.removeEventListener("pointerleave",v)}}},[d,m,j,h]),c.useEffect(()=>{if(o){const f=v=>{const x=v.target,k={x:v.clientX,y:v.clientY},M=d?.contains(x)||m?.contains(x),N=!io(k,o);M?h():N&&(h(),p())};return document.addEventListener("pointermove",f),()=>document.removeEventListener("pointermove",f)}},[d,m,o,p,h]),e.jsx(Cr,{...t,ref:i})}),[Zi,eo]=us(kr,{isInside:!1}),to=ui("TooltipContent"),Cr=c.forwardRef((t,s)=>{const{__scopeTooltip:a,children:r,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,d=ms(vt,a),p=Vs(a),{onClose:m}=d;return c.useEffect(()=>(document.addEventListener(fa,m),()=>document.removeEventListener(fa,m)),[m]),c.useEffect(()=>{if(d.trigger){const u=h=>{h.target?.contains(d.trigger)&&m()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[d.trigger,m]),e.jsx(ci,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:u=>u.preventDefault(),onDismiss:m,children:e.jsxs(di,{"data-state":d.stateAttribute,...p,...l,ref:s,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(to,{children:r}),e.jsx(Zi,{scope:a,isInside:!0,children:e.jsx(Hi,{id:d.contentId,role:"tooltip",children:n||r})})]})})});Sr.displayName=vt;var Pr="TooltipArrow",so=c.forwardRef((t,s)=>{const{__scopeTooltip:a,...r}=t,n=Vs(a);return eo(Pr,a).isInside?null:e.jsx(hi,{...n,...r,ref:s})});so.displayName=Pr;function ao(t,s){const a=Math.abs(s.top-t.y),r=Math.abs(s.bottom-t.y),n=Math.abs(s.right-t.x),i=Math.abs(s.left-t.x);switch(Math.min(a,r,n,i)){case i:return"left";case n:return"right";case a:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function ro(t,s,a=5){const r=[];switch(s){case"top":r.push({x:t.x-a,y:t.y+a},{x:t.x+a,y:t.y+a});break;case"bottom":r.push({x:t.x-a,y:t.y-a},{x:t.x+a,y:t.y-a});break;case"left":r.push({x:t.x+a,y:t.y-a},{x:t.x+a,y:t.y+a});break;case"right":r.push({x:t.x-a,y:t.y-a},{x:t.x-a,y:t.y+a});break}return r}function no(t){const{top:s,right:a,bottom:r,left:n}=t;return[{x:n,y:s},{x:a,y:s},{x:a,y:r},{x:n,y:r}]}function io(t,s){const{x:a,y:r}=t;let n=!1;for(let i=0,o=s.length-1;i<s.length;o=i++){const l=s[i],d=s[o],p=l.x,m=l.y,u=d.x,h=d.y;m>r!=h>r&&a<(u-p)*(r-m)/(h-m)+p&&(n=!n)}return n}function oo(t){const s=t.slice();return s.sort((a,r)=>a.x<r.x?-1:a.x>r.x?1:a.y<r.y?-1:a.y>r.y?1:0),lo(s)}function lo(t){if(t.length<=1)return t.slice();const s=[];for(let r=0;r<t.length;r++){const n=t[r];for(;s.length>=2;){const i=s[s.length-1],o=s[s.length-2];if((i.x-o.x)*(n.y-o.y)>=(i.y-o.y)*(n.x-o.x))s.pop();else break}s.push(n)}s.pop();const a=[];for(let r=t.length-1;r>=0;r--){const n=t[r];for(;a.length>=2;){const i=a[a.length-1],o=a[a.length-2];if((i.x-o.x)*(n.y-o.y)>=(i.y-o.y)*(n.x-o.x))a.pop();else break}a.push(n)}return a.pop(),s.length===1&&a.length===1&&s[0].x===a[0].x&&s[0].y===a[0].y?s:s.concat(a)}var co=wr,Tr=Sr;function Ar(t){var s,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(s=0;s<n;s++)t[s]&&(a=Ar(t[s]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function Rr(){for(var t,s,a=0,r="",n=arguments.length;a<n;a++)(t=arguments[a])&&(s=Ar(t))&&(r&&(r+=" "),r+=s);return r}function uo(){for(var t=0,s,a,r="";t<arguments.length;)(s=arguments[t++])&&(a=Dr(s))&&(r&&(r+=" "),r+=a);return r}function Dr(t){if(typeof t=="string")return t;for(var s,a="",r=0;r<t.length;r++)t[r]&&(s=Dr(t[r]))&&(a&&(a+=" "),a+=s);return a}var Ws="-";function mo(t){var s=po(t),a=t.conflictingClassGroups,r=t.conflictingClassGroupModifiers,n=r===void 0?{}:r;function i(l){var d=l.split(Ws);return d[0]===""&&d.length!==1&&d.shift(),Er(d,s)||ho(l)}function o(l,d){var p=a[l]||[];return d&&n[l]?[].concat(p,n[l]):p}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function Er(t,s){if(t.length===0)return s.classGroupId;var a=t[0],r=s.nextPart.get(a),n=r?Er(t.slice(1),r):void 0;if(n)return n;if(s.validators.length!==0){var i=t.join(Ws);return s.validators.find(function(o){var l=o.validator;return l(i)})?.classGroupId}}var ga=/^\[(.+)\]$/;function ho(t){if(ga.test(t)){var s=ga.exec(t)[1],a=s?.substring(0,s.indexOf(":"));if(a)return"arbitrary.."+a}}function po(t){var s=t.theme,a=t.prefix,r={nextPart:new Map,validators:[]},n=fo(Object.entries(t.classGroups),a);return n.forEach(function(i){var o=i[0],l=i[1];Ds(l,r,o,s)}),r}function Ds(t,s,a,r){t.forEach(function(n){if(typeof n=="string"){var i=n===""?s:ja(s,n);i.classGroupId=a;return}if(typeof n=="function"){if(xo(n)){Ds(n(r),s,a,r);return}s.validators.push({validator:n,classGroupId:a});return}Object.entries(n).forEach(function(o){var l=o[0],d=o[1];Ds(d,ja(s,l),a,r)})})}function ja(t,s){var a=t;return s.split(Ws).forEach(function(r){a.nextPart.has(r)||a.nextPart.set(r,{nextPart:new Map,validators:[]}),a=a.nextPart.get(r)}),a}function xo(t){return t.isThemeGetter}function fo(t,s){return s?t.map(function(a){var r=a[0],n=a[1],i=n.map(function(o){return typeof o=="string"?s+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var d=l[0],p=l[1];return[s+d,p]})):o});return[r,i]}):t}function go(t){if(t<1)return{get:function(){},set:function(){}};var s=0,a=new Map,r=new Map;function n(i,o){a.set(i,o),s++,s>t&&(s=0,r=a,a=new Map)}return{get:function(o){var l=a.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return n(o,l),l},set:function(o,l){a.has(o)?a.set(o,l):n(o,l)}}}var Mr="!";function jo(t){var s=t.separator||":",a=s.length===1,r=s[0],n=s.length;return function(o){for(var l=[],d=0,p=0,m,u=0;u<o.length;u++){var h=o[u];if(d===0){if(h===r&&(a||o.slice(u,u+n)===s)){l.push(o.slice(p,u)),p=u+n;continue}if(h==="/"){m=u;continue}}h==="["?d++:h==="]"&&d--}var j=l.length===0?o:o.substring(p),f=j.startsWith(Mr),v=f?j.substring(1):j,x=m&&m>p?m-p:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:v,maybePostfixModifierPosition:x}}}function vo(t){if(t.length<=1)return t;var s=[],a=[];return t.forEach(function(r){var n=r[0]==="[";n?(s.push.apply(s,a.sort().concat([r])),a=[]):a.push(r)}),s.push.apply(s,a.sort()),s}function bo(t){return{cache:go(t.cacheSize),splitModifiers:jo(t),...mo(t)}}var yo=/\s+/;function No(t,s){var a=s.splitModifiers,r=s.getClassGroupId,n=s.getConflictingClassGroupIds,i=new Set;return t.trim().split(yo).map(function(o){var l=a(o),d=l.modifiers,p=l.hasImportantModifier,m=l.baseClassName,u=l.maybePostfixModifierPosition,h=r(u?m.substring(0,u):m),j=!!u;if(!h){if(!u)return{isTailwindClass:!1,originalClassName:o};if(h=r(m),!h)return{isTailwindClass:!1,originalClassName:o};j=!1}var f=vo(d).join(":"),v=p?f+Mr:f;return{isTailwindClass:!0,modifierId:v,classGroupId:h,originalClassName:o,hasPostfixModifier:j}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,d=o.classGroupId,p=o.hasPostfixModifier,m=l+d;return i.has(m)?!1:(i.add(m),n(d,p).forEach(function(u){return i.add(l+u)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function wo(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];var r,n,i,o=l;function l(p){var m=s[0],u=s.slice(1),h=u.reduce(function(j,f){return f(j)},m());return r=bo(h),n=r.cache.get,i=r.cache.set,o=d,d(p)}function d(p){var m=n(p);if(m)return m;var u=No(p,r);return i(p,u),u}return function(){return o(uo.apply(null,arguments))}}function ie(t){var s=function(r){return r[t]||[]};return s.isThemeGetter=!0,s}var Lr=/^\[(?:([a-z-]+):)?(.+)\]$/i,ko=/^\d+\/\d+$/,So=new Set(["px","full","screen"]),Co=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Po=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,To=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Fe(t){return it(t)||So.has(t)||ko.test(t)||Es(t)}function Es(t){return mt(t,"length",Lo)}function Ao(t){return mt(t,"size",Ir)}function Ro(t){return mt(t,"position",Ir)}function Do(t){return mt(t,"url",Io)}function Wt(t){return mt(t,"number",it)}function it(t){return!Number.isNaN(Number(t))}function Eo(t){return t.endsWith("%")&&it(t.slice(0,-1))}function At(t){return va(t)||mt(t,"number",va)}function K(t){return Lr.test(t)}function Rt(){return!0}function Ke(t){return Co.test(t)}function Mo(t){return mt(t,"",Oo)}function mt(t,s,a){var r=Lr.exec(t);return r?r[1]?r[1]===s:a(r[2]):!1}function Lo(t){return Po.test(t)}function Ir(){return!1}function Io(t){return t.startsWith("url(")}function va(t){return Number.isInteger(Number(t))}function Oo(t){return To.test(t)}function Fo(){var t=ie("colors"),s=ie("spacing"),a=ie("blur"),r=ie("brightness"),n=ie("borderColor"),i=ie("borderRadius"),o=ie("borderSpacing"),l=ie("borderWidth"),d=ie("contrast"),p=ie("grayscale"),m=ie("hueRotate"),u=ie("invert"),h=ie("gap"),j=ie("gradientColorStops"),f=ie("gradientColorStopPositions"),v=ie("inset"),x=ie("margin"),k=ie("opacity"),M=ie("padding"),N=ie("saturate"),T=ie("scale"),O=ie("sepia"),I=ie("skew"),P=ie("space"),B=ie("translate"),q=function(){return["auto","contain","none"]},H=function(){return["auto","hidden","clip","visible","scroll"]},A=function(){return["auto",K,s]},w=function(){return[K,s]},C=function(){return["",Fe]},Q=function(){return["auto",it,K]},le=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},Y=function(){return["solid","dashed","dotted","double","none"]},ve=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},te=function(){return["start","end","center","between","around","evenly","stretch"]},re=function(){return["","0",K]},pe=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},E=function(){return[it,Wt]},y=function(){return[it,K]};return{cacheSize:500,theme:{colors:[Rt],spacing:[Fe],blur:["none","",Ke,K],brightness:E(),borderColor:[t],borderRadius:["none","","full",Ke,K],borderSpacing:w(),borderWidth:C(),contrast:E(),grayscale:re(),hueRotate:y(),invert:re(),gap:w(),gradientColorStops:[t],gradientColorStopPositions:[Eo,Es],inset:A(),margin:A(),opacity:E(),padding:w(),saturate:E(),scale:E(),sepia:re(),skew:y(),space:w(),translate:w()},classGroups:{aspect:[{aspect:["auto","square","video",K]}],container:["container"],columns:[{columns:[Ke]}],"break-after":[{"break-after":pe()}],"break-before":[{"break-before":pe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(le(),[K])}],overflow:[{overflow:H()}],"overflow-x":[{"overflow-x":H()}],"overflow-y":[{"overflow-y":H()}],overscroll:[{overscroll:q()}],"overscroll-x":[{"overscroll-x":q()}],"overscroll-y":[{"overscroll-y":q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",At]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",K]}],grow:[{grow:re()}],shrink:[{shrink:re()}],order:[{order:["first","last","none",At]}],"grid-cols":[{"grid-cols":[Rt]}],"col-start-end":[{col:["auto",{span:["full",At]},K]}],"col-start":[{"col-start":Q()}],"col-end":[{"col-end":Q()}],"grid-rows":[{"grid-rows":[Rt]}],"row-start-end":[{row:["auto",{span:[At]},K]}],"row-start":[{"row-start":Q()}],"row-end":[{"row-end":Q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",K]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",K]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(te())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(te(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(te(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[M]}],px:[{px:[M]}],py:[{py:[M]}],ps:[{ps:[M]}],pe:[{pe:[M]}],pt:[{pt:[M]}],pr:[{pr:[M]}],pb:[{pb:[M]}],pl:[{pl:[M]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",K,s]}],"min-w":[{"min-w":["min","max","fit",K,Fe]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Ke]},Ke,K]}],h:[{h:[K,s,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",K,Fe]}],"max-h":[{"max-h":[K,s,"min","max","fit"]}],"font-size":[{text:["base",Ke,Es]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wt]}],"font-family":[{font:[Rt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",K]}],"line-clamp":[{"line-clamp":["none",it,Wt]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",K,Fe]}],"list-image":[{"list-image":["none",K]}],"list-style-type":[{list:["none","disc","decimal",K]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(Y(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Fe]}],"underline-offset":[{"underline-offset":["auto",K,Fe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:w()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",K]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",K]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(le(),[Ro])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ao]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Do]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[j]}],"gradient-via":[{via:[j]}],"gradient-to":[{to:[j]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[].concat(Y(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:Y()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:[""].concat(Y())}],"outline-offset":[{"outline-offset":[K,Fe]}],"outline-w":[{outline:[Fe]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[Fe]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ke,Mo]}],"shadow-color":[{shadow:[Rt]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":ve()}],"bg-blend":[{"bg-blend":ve()}],filter:[{filter:["","none"]}],blur:[{blur:[a]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Ke,K]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[u]}],saturate:[{saturate:[N]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[a]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",K]}],duration:[{duration:y()}],ease:[{ease:["linear","in","out","in-out",K]}],delay:[{delay:y()}],animate:[{animate:["none","spin","ping","pulse","bounce",K]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[At,K]}],"translate-x":[{"translate-x":[B]}],"translate-y":[{"translate-y":[B]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",K]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",K]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":w()}],"scroll-mx":[{"scroll-mx":w()}],"scroll-my":[{"scroll-my":w()}],"scroll-ms":[{"scroll-ms":w()}],"scroll-me":[{"scroll-me":w()}],"scroll-mt":[{"scroll-mt":w()}],"scroll-mr":[{"scroll-mr":w()}],"scroll-mb":[{"scroll-mb":w()}],"scroll-ml":[{"scroll-ml":w()}],"scroll-p":[{"scroll-p":w()}],"scroll-px":[{"scroll-px":w()}],"scroll-py":[{"scroll-py":w()}],"scroll-ps":[{"scroll-ps":w()}],"scroll-pe":[{"scroll-pe":w()}],"scroll-pt":[{"scroll-pt":w()}],"scroll-pr":[{"scroll-pr":w()}],"scroll-pb":[{"scroll-pb":w()}],"scroll-pl":[{"scroll-pl":w()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",K]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Fe,Wt]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var _o=wo(Fo);function _(...t){return _o(Rr(t))}const $o=co,Uo=c.forwardRef(({className:t,sideOffset:s=4,...a},r)=>e.jsx(Tr,{ref:r,sideOffset:s,className:_("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a}));Uo.displayName=Tr.displayName;var hs=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ps=typeof window>"u"||"Deno"in globalThis;function $e(){}function zo(t,s){return typeof t=="function"?t(s):t}function Bo(t){return typeof t=="number"&&t>=0&&t!==1/0}function Vo(t,s){return Math.max(t+(s||0)-Date.now(),0)}function Ms(t,s){return typeof t=="function"?t(s):t}function Wo(t,s){return typeof t=="function"?t(s):t}function ba(t,s){const{type:a="all",exact:r,fetchStatus:n,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(s.queryHash!==qs(o,s.options))return!1}else if(!It(s.queryKey,o))return!1}if(a!=="all"){const d=s.isActive();if(a==="active"&&!d||a==="inactive"&&d)return!1}return!(typeof l=="boolean"&&s.isStale()!==l||n&&n!==s.state.fetchStatus||i&&!i(s))}function ya(t,s){const{exact:a,status:r,predicate:n,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(a){if(Lt(s.options.mutationKey)!==Lt(i))return!1}else if(!It(s.options.mutationKey,i))return!1}return!(r&&s.state.status!==r||n&&!n(s))}function qs(t,s){return(s?.queryKeyHashFn||Lt)(t)}function Lt(t){return JSON.stringify(t,(s,a)=>Ls(a)?Object.keys(a).sort().reduce((r,n)=>(r[n]=a[n],r),{}):a)}function It(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(a=>It(t[a],s[a])):!1}function Or(t,s){if(t===s)return t;const a=Na(t)&&Na(s);if(a||Ls(t)&&Ls(s)){const r=a?t:Object.keys(t),n=r.length,i=a?s:Object.keys(s),o=i.length,l=a?[]:{},d=new Set(r);let p=0;for(let m=0;m<o;m++){const u=a?m:i[m];(!a&&d.has(u)||a)&&t[u]===void 0&&s[u]===void 0?(l[u]=void 0,p++):(l[u]=Or(t[u],s[u]),l[u]===t[u]&&t[u]!==void 0&&p++)}return n===o&&p===n?t:l}return s}function Na(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ls(t){if(!wa(t))return!1;const s=t.constructor;if(s===void 0)return!0;const a=s.prototype;return!(!wa(a)||!a.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function wa(t){return Object.prototype.toString.call(t)==="[object Object]"}function qo(t){return new Promise(s=>{setTimeout(s,t)})}function Ho(t,s,a){return typeof a.structuralSharing=="function"?a.structuralSharing(t,s):a.structuralSharing!==!1?Or(t,s):s}function Go(t,s,a=0){const r=[...t,s];return a&&r.length>a?r.slice(1):r}function Qo(t,s,a=0){const r=[s,...t];return a&&r.length>a?r.slice(0,-1):r}var Hs=Symbol();function Fr(t,s){return!t.queryFn&&s?.initialPromise?()=>s.initialPromise:!t.queryFn||t.queryFn===Hs?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Yo=class extends hs{#e;#t;#s;constructor(){super(),this.#s=t=>{if(!ps&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},_r=new Yo,Ko=class extends hs{#e=!0;#t;#s;constructor(){super(),this.#s=t=>{if(!ps&&window.addEventListener){const s=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",a)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(a=>{a(t)}))}isOnline(){return this.#e}},Zt=new Ko;function Xo(){let t,s;const a=new Promise((n,i)=>{t=n,s=i});a.status="pending",a.catch(()=>{});function r(n){Object.assign(a,n),delete a.resolve,delete a.reject}return a.resolve=n=>{r({status:"fulfilled",value:n}),t(n)},a.reject=n=>{r({status:"rejected",reason:n}),s(n)},a}function Jo(t){return Math.min(1e3*2**t,3e4)}function $r(t){return(t??"online")==="online"?Zt.isOnline():!0}var Ur=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function ws(t){return t instanceof Ur}function zr(t){let s=!1,a=0,r=!1,n;const i=Xo(),o=v=>{r||(h(new Ur(v)),t.abort?.())},l=()=>{s=!0},d=()=>{s=!1},p=()=>_r.isFocused()&&(t.networkMode==="always"||Zt.isOnline())&&t.canRun(),m=()=>$r(t.networkMode)&&t.canRun(),u=v=>{r||(r=!0,t.onSuccess?.(v),n?.(),i.resolve(v))},h=v=>{r||(r=!0,t.onError?.(v),n?.(),i.reject(v))},j=()=>new Promise(v=>{n=x=>{(r||p())&&v(x)},t.onPause?.()}).then(()=>{n=void 0,r||t.onContinue?.()}),f=()=>{if(r)return;let v;const x=a===0?t.initialPromise:void 0;try{v=x??t.fn()}catch(k){v=Promise.reject(k)}Promise.resolve(v).then(u).catch(k=>{if(r)return;const M=t.retry??(ps?0:3),N=t.retryDelay??Jo,T=typeof N=="function"?N(a,k):N,O=M===!0||typeof M=="number"&&a<M||typeof M=="function"&&M(a,k);if(s||!O){h(k);return}a++,t.onFail?.(a,k),qo(T).then(()=>p()?void 0:j()).then(()=>{s?h(k):f()})})};return{promise:i,cancel:o,continue:()=>(n?.(),i),cancelRetry:l,continueRetry:d,canStart:m,start:()=>(m()?f():j().then(f),i)}}var Zo=t=>setTimeout(t,0);function el(){let t=[],s=0,a=l=>{l()},r=l=>{l()},n=Zo;const i=l=>{s?t.push(l):n(()=>{a(l)})},o=()=>{const l=t;t=[],l.length&&n(()=>{r(()=>{l.forEach(d=>{a(d)})})})};return{batch:l=>{let d;s++;try{d=l()}finally{s--,s||o()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{a=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{n=l}}}var Re=el(),Br=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Bo(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ps?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},tl=class extends Br{#e;#t;#s;#r;#a;#i;#o;constructor(t){super(),this.#o=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#s=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=al(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(t,s){const a=Ho(this.state.data,t,this.options);return this.#n({data:a,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),a}setState(t,s){this.#n({type:"setState",state:t,setStateOptions:s})}cancel(t){const s=this.#a?.promise;return this.#a?.cancel(t),s?s.then($e).catch($e):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Wo(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Hs||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ms(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Vo(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(this.#a&&(this.#o?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}fetch(t,s){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(p=>p.options.queryFn);d&&this.setOptions(d.options)}const a=new AbortController,r=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(this.#o=!0,a.signal)})},n=()=>{const d=Fr(this.options,s),m=(()=>{const u={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(u),u})();return this.#o=!1,this.options.persister?this.options.persister(d,m,this):d(m)},o=(()=>{const d={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:n};return r(d),d})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#n({type:"fetch",meta:o.fetchOptions?.meta});const l=d=>{ws(d)&&d.silent||this.#n({type:"error",error:d}),ws(d)||(this.#s.config.onError?.(d,this),this.#s.config.onSettled?.(this.state.data,d,this)),this.scheduleGc()};return this.#a=zr({initialPromise:s?.initialPromise,fn:o.fetchFn,abort:a.abort.bind(a),onSuccess:d=>{if(d===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(p){l(p);return}this.#s.config.onSuccess?.(d,this),this.#s.config.onSettled?.(d,this.state.error,this),this.scheduleGc()},onError:l,onFail:(d,p)=>{this.#n({type:"failed",failureCount:d,error:p})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}),this.#a.start()}#n(t){const s=a=>{switch(t.type){case"failed":return{...a,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...sl(a.data,this.options),fetchMeta:t.meta??null};case"success":return this.#t=void 0,{...a,data:t.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return ws(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...a,error:r,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...t.state}}};this.state=s(this.state),Re.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:t})})}};function sl(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$r(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function al(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,a=s!==void 0,r=a?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:a?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}var rl=class extends hs{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,s,a){const r=s.queryKey,n=s.queryHash??qs(r,s);let i=this.get(n);return i||(i=new tl({client:t,queryKey:r,queryHash:n,options:t.defaultQueryOptions(s),state:a,defaultOptions:t.getQueryDefaults(r)}),this.add(i)),i}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=this.#e.get(t.queryHash);s&&(t.destroy(),s===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Re.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const s={exact:!0,...t};return this.getAll().find(a=>ba(s,a))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(a=>ba(t,a)):s}notify(t){Re.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){Re.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Re.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},nl=class extends Br{#e;#t;#s;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||il(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(s=>s!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){const s=()=>{this.#r({type:"continue"})};this.#s=zr({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(n,i)=>{this.#r({type:"failed",failureCount:n,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const a=this.state.status==="pending",r=!this.#s.canStart();try{if(a)s();else{this.#r({type:"pending",variables:t,isPaused:r}),await this.#t.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:r})}const n=await this.#s.start();return await this.#t.config.onSuccess?.(n,t,this.state.context,this),await this.options.onSuccess?.(n,t,this.state.context),await this.#t.config.onSettled?.(n,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(n,null,t,this.state.context),this.#r({type:"success",data:n}),n}catch(n){try{throw await this.#t.config.onError?.(n,t,this.state.context,this),await this.options.onError?.(n,t,this.state.context),await this.#t.config.onSettled?.(void 0,n,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,n,t,this.state.context),n}finally{this.#r({type:"error",error:n})}}finally{this.#t.runNext(this)}}#r(t){const s=a=>{switch(t.type){case"failed":return{...a,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...a,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:t.error,failureCount:a.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Re.batch(()=>{this.#e.forEach(a=>{a.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function il(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ol=class extends hs{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(t,s,a){const r=new nl({mutationCache:this,mutationId:++this.#s,options:t.defaultMutationOptions(s),state:a});return this.add(r),r}add(t){this.#e.add(t);const s=qt(t);if(typeof s=="string"){const a=this.#t.get(s);a?a.push(t):this.#t.set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const s=qt(t);if(typeof s=="string"){const a=this.#t.get(s);if(a)if(a.length>1){const r=a.indexOf(t);r!==-1&&a.splice(r,1)}else a[0]===t&&this.#t.delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=qt(t);if(typeof s=="string"){const r=this.#t.get(s)?.find(n=>n.state.status==="pending");return!r||r===t}else return!0}runNext(t){const s=qt(t);return typeof s=="string"?this.#t.get(s)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Re.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const s={exact:!0,...t};return this.getAll().find(a=>ya(s,a))}findAll(t={}){return this.getAll().filter(s=>ya(t,s))}notify(t){Re.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return Re.batch(()=>Promise.all(t.map(s=>s.continue().catch($e))))}};function qt(t){return t.options.scope?.id}function ka(t){return{onFetch:(s,a)=>{const r=s.options,n=s.fetchOptions?.meta?.fetchMore?.direction,i=s.state.data?.pages||[],o=s.state.data?.pageParams||[];let l={pages:[],pageParams:[]},d=0;const p=async()=>{let m=!1;const u=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(s.signal.aborted?m=!0:s.signal.addEventListener("abort",()=>{m=!0}),s.signal)})},h=Fr(s.options,s.fetchOptions),j=async(f,v,x)=>{if(m)return Promise.reject();if(v==null&&f.pages.length)return Promise.resolve(f);const M=(()=>{const I={client:s.client,queryKey:s.queryKey,pageParam:v,direction:x?"backward":"forward",meta:s.options.meta};return u(I),I})(),N=await h(M),{maxPages:T}=s.options,O=x?Qo:Go;return{pages:O(f.pages,N,T),pageParams:O(f.pageParams,v,T)}};if(n&&i.length){const f=n==="backward",v=f?ll:Sa,x={pages:i,pageParams:o},k=v(r,x);l=await j(x,k,f)}else{const f=t??i.length;do{const v=d===0?o[0]??r.initialPageParam:Sa(r,l);if(d>0&&v==null)break;l=await j(l,v),d++}while(d<f)}return l};s.options.persister?s.fetchFn=()=>s.options.persister?.(p,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},a):s.fetchFn=p}}}function Sa(t,{pages:s,pageParams:a}){const r=s.length-1;return s.length>0?t.getNextPageParam(s[r],s,a[r],a):void 0}function ll(t,{pages:s,pageParams:a}){return s.length>0?t.getPreviousPageParam?.(s[0],s,a[0],a):void 0}var cl=class{#e;#t;#s;#r;#a;#i;#o;#n;constructor(t={}){this.#e=t.queryCache||new rl,this.#t=t.mutationCache||new ol,this.#s=t.defaultOptions||{},this.#r=new Map,this.#a=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=_r.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=Zt.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#n?.(),this.#n=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),a=this.#e.build(this,s),r=a.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&a.isStaleByTime(Ms(s.staleTime,a))&&this.prefetchQuery(s),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:s,state:a})=>{const r=a.data;return[s,r]})}setQueryData(t,s,a){const r=this.defaultQueryOptions({queryKey:t}),i=this.#e.get(r.queryHash)?.state.data,o=zo(s,i);if(o!==void 0)return this.#e.build(this,r).setData(o,{...a,manual:!0})}setQueriesData(t,s,a){return Re.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,s,a)]))}getQueryState(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state}removeQueries(t){const s=this.#e;Re.batch(()=>{s.findAll(t).forEach(a=>{s.remove(a)})})}resetQueries(t,s){const a=this.#e;return Re.batch(()=>(a.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const a={revert:!0,...s},r=Re.batch(()=>this.#e.findAll(t).map(n=>n.cancel(a)));return Promise.all(r).then($e).catch($e)}invalidateQueries(t,s={}){return Re.batch(()=>(this.#e.findAll(t).forEach(a=>{a.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},s)))}refetchQueries(t,s={}){const a={...s,cancelRefetch:s.cancelRefetch??!0},r=Re.batch(()=>this.#e.findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,a);return a.throwOnError||(i=i.catch($e)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then($e)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const a=this.#e.build(this,s);return a.isStaleByTime(Ms(s.staleTime,a))?a.fetch(s):Promise.resolve(a.state.data)}prefetchQuery(t){return this.fetchQuery(t).then($e).catch($e)}fetchInfiniteQuery(t){return t.behavior=ka(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then($e).catch($e)}ensureInfiniteQueryData(t){return t.behavior=ka(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Zt.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(t){this.#s=t}setQueryDefaults(t,s){this.#r.set(Lt(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...this.#r.values()],a={};return s.forEach(r=>{It(t,r.queryKey)&&Object.assign(a,r.defaultOptions)}),a}setMutationDefaults(t,s){this.#a.set(Lt(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...this.#a.values()],a={};return s.forEach(r=>{It(t,r.mutationKey)&&Object.assign(a,r.defaultOptions)}),a}defaultQueryOptions(t){if(t._defaulted)return t;const s={...this.#s.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=qs(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===Hs&&(s.enabled=!1),s}defaultMutationOptions(t){return t?._defaulted?t:{...this.#s.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},dl=c.createContext(void 0),ul=({client:t,children:s})=>(c.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(dl.Provider,{value:t,children:s}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ot(){return Ot=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ot.apply(this,arguments)}var Ze;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ze||(Ze={}));const Ca="popstate";function ml(t){t===void 0&&(t={});function s(r,n){let{pathname:i,search:o,hash:l}=r.location;return Is("",{pathname:i,search:o,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function a(r,n){return typeof n=="string"?n:Wr(n)}return pl(s,a,null,t)}function fe(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Vr(t,s){if(!t)try{throw new Error(s)}catch{}}function hl(){return Math.random().toString(36).substr(2,8)}function Pa(t,s){return{usr:t.state,key:t.key,idx:s}}function Is(t,s,a,r){return a===void 0&&(a=null),Ot({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?St(s):s,{state:a,key:s&&s.key||r||hl()})}function Wr(t){let{pathname:s="/",search:a="",hash:r=""}=t;return a&&a!=="?"&&(s+=a.charAt(0)==="?"?a:"?"+a),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function St(t){let s={};if(t){let a=t.indexOf("#");a>=0&&(s.hash=t.substr(a),t=t.substr(0,a));let r=t.indexOf("?");r>=0&&(s.search=t.substr(r),t=t.substr(0,r)),t&&(s.pathname=t)}return s}function pl(t,s,a,r){r===void 0&&(r={});let{window:n=document.defaultView,v5Compat:i=!1}=r,o=n.history,l=Ze.Pop,d=null,p=m();p==null&&(p=0,o.replaceState(Ot({},o.state,{idx:p}),""));function m(){return(o.state||{idx:null}).idx}function u(){l=Ze.Pop;let x=m(),k=x==null?null:x-p;p=x,d&&d({action:l,location:v.location,delta:k})}function h(x,k){l=Ze.Push;let M=Is(v.location,x,k);p=m()+1;let N=Pa(M,p),T=v.createHref(M);try{o.pushState(N,"",T)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;n.location.assign(T)}i&&d&&d({action:l,location:v.location,delta:1})}function j(x,k){l=Ze.Replace;let M=Is(v.location,x,k);p=m();let N=Pa(M,p),T=v.createHref(M);o.replaceState(N,"",T),i&&d&&d({action:l,location:v.location,delta:0})}function f(x){let k=n.location.origin!=="null"?n.location.origin:n.location.href,M=typeof x=="string"?x:Wr(x);return M=M.replace(/ $/,"%20"),fe(k,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,k)}let v={get action(){return l},get location(){return t(n,o)},listen(x){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(Ca,u),d=x,()=>{n.removeEventListener(Ca,u),d=null}},createHref(x){return s(n,x)},createURL:f,encodeLocation(x){let k=f(x);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:h,replace:j,go(x){return o.go(x)}};return v}var Ta;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ta||(Ta={}));function xl(t,s,a){return a===void 0&&(a="/"),fl(t,s,a)}function fl(t,s,a,r){let n=typeof s=="string"?St(s):s,i=Gr(n.pathname||"/",a);if(i==null)return null;let o=qr(t);gl(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let p=Al(i);l=Cl(o[d],p)}return l}function qr(t,s,a,r){s===void 0&&(s=[]),a===void 0&&(a=[]),r===void 0&&(r="");let n=(i,o,l)=>{let d={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(fe(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let p=lt([r,d.relativePath]),m=a.concat(d);i.children&&i.children.length>0&&(fe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),qr(i.children,s,m,p)),!(i.path==null&&!i.index)&&s.push({path:p,score:kl(p,i.index),routesMeta:m})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))n(i,o);else for(let d of Hr(i.path))n(i,o,d)}),s}function Hr(t){let s=t.split("/");if(s.length===0)return[];let[a,...r]=s,n=a.endsWith("?"),i=a.replace(/\?$/,"");if(r.length===0)return n?[i,""]:[i];let o=Hr(r.join("/")),l=[];return l.push(...o.map(d=>d===""?i:[i,d].join("/"))),n&&l.push(...o),l.map(d=>t.startsWith("/")&&d===""?"/":d)}function gl(t){t.sort((s,a)=>s.score!==a.score?a.score-s.score:Sl(s.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}const jl=/^:[\w-]+$/,vl=3,bl=2,yl=1,Nl=10,wl=-2,Aa=t=>t==="*";function kl(t,s){let a=t.split("/"),r=a.length;return a.some(Aa)&&(r+=wl),s&&(r+=bl),a.filter(n=>!Aa(n)).reduce((n,i)=>n+(jl.test(i)?vl:i===""?yl:Nl),r)}function Sl(t,s){return t.length===s.length&&t.slice(0,-1).every((r,n)=>r===s[n])?t[t.length-1]-s[s.length-1]:0}function Cl(t,s,a){let{routesMeta:r}=t,n={},i="/",o=[];for(let l=0;l<r.length;++l){let d=r[l],p=l===r.length-1,m=i==="/"?s:s.slice(i.length)||"/",u=Pl({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},m),h=d.route;if(!u)return null;Object.assign(n,u.params),o.push({params:n,pathname:lt([i,u.pathname]),pathnameBase:Ml(lt([i,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(i=lt([i,u.pathnameBase]))}return o}function Pl(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,r]=Tl(t.path,t.caseSensitive,t.end),n=s.match(a);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:r.reduce((p,m,u)=>{let{paramName:h,isOptional:j}=m;if(h==="*"){let v=l[u]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const f=l[u];return j&&!f?p[h]=void 0:p[h]=(f||"").replace(/%2F/g,"/"),p},{}),pathname:i,pathnameBase:o,pattern:t}}function Tl(t,s,a){s===void 0&&(s=!1),a===void 0&&(a=!0),Vr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(r.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,s?void 0:"i"),r]}function Al(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Vr(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function Gr(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let a=s.endsWith("/")?s.length-1:s.length,r=t.charAt(a);return r&&r!=="/"?null:t.slice(a)||"/"}function Rl(t,s){s===void 0&&(s="/");let{pathname:a,search:r="",hash:n=""}=typeof t=="string"?St(t):t;return{pathname:a?a.startsWith("/")?a:Dl(a,s):s,search:Ll(r),hash:Il(n)}}function Dl(t,s){let a=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?a.length>1&&a.pop():n!=="."&&a.push(n)}),a.length>1?a.join("/"):"/"}function ks(t,s,a,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function El(t){return t.filter((s,a)=>a===0||s.route.path&&s.route.path.length>0)}function Qr(t,s){let a=El(t);return s?a.map((r,n)=>n===a.length-1?r.pathname:r.pathnameBase):a.map(r=>r.pathnameBase)}function Yr(t,s,a,r){r===void 0&&(r=!1);let n;typeof t=="string"?n=St(t):(n=Ot({},t),fe(!n.pathname||!n.pathname.includes("?"),ks("?","pathname","search",n)),fe(!n.pathname||!n.pathname.includes("#"),ks("#","pathname","hash",n)),fe(!n.search||!n.search.includes("#"),ks("#","search","hash",n)));let i=t===""||n.pathname==="",o=i?"/":n.pathname,l;if(o==null)l=a;else{let u=s.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),u-=1;n.pathname=h.join("/")}l=u>=0?s[u]:"/"}let d=Rl(n,l),p=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&a.endsWith("/");return!d.pathname.endsWith("/")&&(p||m)&&(d.pathname+="/"),d}const lt=t=>t.join("/").replace(/\/\/+/g,"/"),Ml=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ll=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Il=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ol(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Kr=["post","put","patch","delete"];new Set(Kr);const Fl=["get",...Kr];new Set(Fl);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ft(){return Ft=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ft.apply(this,arguments)}const Gs=c.createContext(null),_l=c.createContext(null),$t=c.createContext(null),xs=c.createContext(null),ht=c.createContext({outlet:null,matches:[],isDataRoute:!1}),Xr=c.createContext(null);function Ut(){return c.useContext(xs)!=null}function Ct(){return Ut()||fe(!1),c.useContext(xs).location}function Jr(t){c.useContext($t).static||c.useLayoutEffect(t)}function Qs(){let{isDataRoute:t}=c.useContext(ht);return t?Xl():$l()}function $l(){Ut()||fe(!1);let t=c.useContext(Gs),{basename:s,future:a,navigator:r}=c.useContext($t),{matches:n}=c.useContext(ht),{pathname:i}=Ct(),o=JSON.stringify(Qr(n,a.v7_relativeSplatPath)),l=c.useRef(!1);return Jr(()=>{l.current=!0}),c.useCallback(function(p,m){if(m===void 0&&(m={}),!l.current)return;if(typeof p=="number"){r.go(p);return}let u=Yr(p,JSON.parse(o),i,m.relative==="path");t==null&&s!=="/"&&(u.pathname=u.pathname==="/"?s:lt([s,u.pathname])),(m.replace?r.replace:r.push)(u,m.state,m)},[s,r,o,i,t])}function Ul(t,s){return zl(t,s)}function zl(t,s,a,r){Ut()||fe(!1);let{navigator:n}=c.useContext($t),{matches:i}=c.useContext(ht),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let p=Ct(),m;if(s){var u;let x=typeof s=="string"?St(s):s;d==="/"||(u=x.pathname)!=null&&u.startsWith(d)||fe(!1),m=x}else m=p;let h=m.pathname||"/",j=h;if(d!=="/"){let x=d.replace(/^\//,"").split("/");j="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let f=xl(t,{pathname:j}),v=Hl(f&&f.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:lt([d,n.encodeLocation?n.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?d:lt([d,n.encodeLocation?n.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,a,r);return s&&v?c.createElement(xs.Provider,{value:{location:Ft({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Ze.Pop}},v):v}function Bl(){let t=Kl(),s=Ol(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},s),a?c.createElement("pre",{style:n},a):null,null)}const Vl=c.createElement(Bl,null);class Wl extends c.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,a){return a.location!==s.location||a.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:a.error,location:a.location,revalidation:s.revalidation||a.revalidation}}componentDidCatch(s,a){}render(){return this.state.error!==void 0?c.createElement(ht.Provider,{value:this.props.routeContext},c.createElement(Xr.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ql(t){let{routeContext:s,match:a,children:r}=t,n=c.useContext(Gs);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),c.createElement(ht.Provider,{value:s},r)}function Hl(t,s,a,r){var n;if(s===void 0&&(s=[]),a===void 0&&(a=null),r===void 0&&(r=null),t==null){var i;if(!a)return null;if(a.errors)t=a.matches;else if((i=r)!=null&&i.v7_partialHydration&&s.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let o=t,l=(n=a)==null?void 0:n.errors;if(l!=null){let m=o.findIndex(u=>u.route.id&&l?.[u.route.id]!==void 0);m>=0||fe(!1),o=o.slice(0,Math.min(o.length,m+1))}let d=!1,p=-1;if(a&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let u=o[m];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(p=m),u.route.id){let{loaderData:h,errors:j}=a,f=u.route.loader&&h[u.route.id]===void 0&&(!j||j[u.route.id]===void 0);if(u.route.lazy||f){d=!0,p>=0?o=o.slice(0,p+1):o=[o[0]];break}}}return o.reduceRight((m,u,h)=>{let j,f=!1,v=null,x=null;a&&(j=l&&u.route.id?l[u.route.id]:void 0,v=u.route.errorElement||Vl,d&&(p<0&&h===0?(Jl("route-fallback"),f=!0,x=null):p===h&&(f=!0,x=u.route.hydrateFallbackElement||null)));let k=s.concat(o.slice(0,h+1)),M=()=>{let N;return j?N=v:f?N=x:u.route.Component?N=c.createElement(u.route.Component,null):u.route.element?N=u.route.element:N=m,c.createElement(ql,{match:u,routeContext:{outlet:m,matches:k,isDataRoute:a!=null},children:N})};return a&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?c.createElement(Wl,{location:a.location,revalidation:a.revalidation,component:v,error:j,children:M(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):M()},null)}var Zr=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Zr||{}),en=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(en||{});function Gl(t){let s=c.useContext(Gs);return s||fe(!1),s}function Ql(t){let s=c.useContext(_l);return s||fe(!1),s}function Yl(t){let s=c.useContext(ht);return s||fe(!1),s}function tn(t){let s=Yl(),a=s.matches[s.matches.length-1];return a.route.id||fe(!1),a.route.id}function Kl(){var t;let s=c.useContext(Xr),a=Ql(),r=tn();return s!==void 0?s:(t=a.errors)==null?void 0:t[r]}function Xl(){let{router:t}=Gl(Zr.UseNavigateStable),s=tn(en.UseNavigateStable),a=c.useRef(!1);return Jr(()=>{a.current=!0}),c.useCallback(function(n,i){i===void 0&&(i={}),a.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,Ft({fromRouteId:s},i)))},[t,s])}const Ra={};function Jl(t,s,a){Ra[t]||(Ra[t]=!0)}function Zl(t,s){t?.v7_startTransition,t?.v7_relativeSplatPath}function Os(t){let{to:s,replace:a,state:r,relative:n}=t;Ut()||fe(!1);let{future:i,static:o}=c.useContext($t),{matches:l}=c.useContext(ht),{pathname:d}=Ct(),p=Qs(),m=Yr(s,Qr(l,i.v7_relativeSplatPath),d,n==="path"),u=JSON.stringify(m);return c.useEffect(()=>p(JSON.parse(u),{replace:a,state:r,relative:n}),[p,u,n,a,r]),null}function Se(t){fe(!1)}function ec(t){let{basename:s="/",children:a=null,location:r,navigationType:n=Ze.Pop,navigator:i,static:o=!1,future:l}=t;Ut()&&fe(!1);let d=s.replace(/^\/*/,"/"),p=c.useMemo(()=>({basename:d,navigator:i,static:o,future:Ft({v7_relativeSplatPath:!1},l)}),[d,l,i,o]);typeof r=="string"&&(r=St(r));let{pathname:m="/",search:u="",hash:h="",state:j=null,key:f="default"}=r,v=c.useMemo(()=>{let x=Gr(m,d);return x==null?null:{location:{pathname:x,search:u,hash:h,state:j,key:f},navigationType:n}},[d,m,u,h,j,f,n]);return v==null?null:c.createElement($t.Provider,{value:p},c.createElement(xs.Provider,{children:a,value:v}))}function tc(t){let{children:s,location:a}=t;return Ul(Fs(s),a)}new Promise(()=>{});function Fs(t,s){s===void 0&&(s=[]);let a=[];return c.Children.forEach(t,(r,n)=>{if(!c.isValidElement(r))return;let i=[...s,n];if(r.type===c.Fragment){a.push.apply(a,Fs(r.props.children,i));return}r.type!==Se&&fe(!1),!r.props.index||!r.props.children||fe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Fs(r.props.children,i)),a.push(o)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const sc="6";try{window.__reactRouterVersion=sc}catch{}const ac="startTransition",Da=pi[ac];function rc(t){let{basename:s,children:a,future:r,window:n}=t,i=c.useRef();i.current==null&&(i.current=ml({window:n,v5Compat:!0}));let o=i.current,[l,d]=c.useState({action:o.action,location:o.location}),{v7_startTransition:p}=r||{},m=c.useCallback(u=>{p&&Da?Da(()=>d(u)):d(u)},[d,p]);return c.useLayoutEffect(()=>o.listen(m),[o,m]),c.useEffect(()=>Zl(r),[r]),c.createElement(ec,{basename:s,children:a,location:l.location,navigationType:l.action,navigator:o,future:r})}var Ea;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ea||(Ea={}));var Ma;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ma||(Ma={}));const nc=c.createContext(void 0),ic=({children:t})=>{const[s,a]=c.useState([]),r=c.useCallback(m=>{const u={id:Date.now().toString()+Math.random().toString(36).substr(2,9),timestamp:new Date,read:!1,...m};a(h=>[u,...h]),m.priority==="low"&&setTimeout(()=>{a(h=>h.filter(j=>j.id!==u.id))},1e4)},[]),n=c.useCallback(m=>{a(u=>u.map(h=>h.id===m?{...h,read:!0}:h))},[]),i=c.useCallback(()=>{a(m=>m.map(u=>({...u,read:!0})))},[]),o=c.useCallback(m=>{a(u=>u.filter(h=>h.id!==m))},[]),l=c.useCallback(()=>{a([])},[]),d=s.filter(m=>!m.read).length,p={notifications:s,unreadCount:d,addNotification:r,markAsRead:n,markAllAsRead:i,removeNotification:o,clearAll:l};return e.jsx(nc.Provider,{value:p,children:t})};let oc={data:""},lc=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||oc,cc=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,dc=/\/\*[^]*?\*\/|  +/g,La=/\n+/g,Je=(t,s)=>{let a="",r="",n="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?a=i+" "+o+";":r+=i[1]=="f"?Je(o,i):i+"{"+Je(o,i[1]=="k"?"":s)+"}":typeof o=="object"?r+=Je(o,s?s.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,l):l?l+" "+d:d)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Je.p?Je.p(i,o):i+":"+o+";")}return a+(s&&n?s+"{"+n+"}":n)+r},We={},sn=t=>{if(typeof t=="object"){let s="";for(let a in t)s+=a+sn(t[a]);return s}return t},uc=(t,s,a,r,n)=>{let i=sn(t),o=We[i]||(We[i]=(d=>{let p=0,m=11;for(;p<d.length;)m=101*m+d.charCodeAt(p++)>>>0;return"go"+m})(i));if(!We[o]){let d=i!==t?t:(p=>{let m,u,h=[{}];for(;m=cc.exec(p.replace(dc,""));)m[4]?h.shift():m[3]?(u=m[3].replace(La," ").trim(),h.unshift(h[0][u]=h[0][u]||{})):h[0][m[1]]=m[2].replace(La," ").trim();return h[0]})(t);We[o]=Je(n?{["@keyframes "+o]:d}:d,a?"":"."+o)}let l=a&&We.g?We.g:null;return a&&(We.g=We[o]),((d,p,m,u)=>{u?p.data=p.data.replace(u,d):p.data.indexOf(d)===-1&&(p.data=m?d+p.data:p.data+d)})(We[o],s,r,l),o},mc=(t,s,a)=>t.reduce((r,n,i)=>{let o=s[i];if(o&&o.call){let l=o(a),d=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=d?"."+d:l&&typeof l=="object"?l.props?"":Je(l,""):l===!1?"":l}return r+n+(o??"")},"");function fs(t){let s=this||{},a=t.call?t(s.p):t;return uc(a.unshift?a.raw?mc(a,[].slice.call(arguments,1),s.p):a.reduce((r,n)=>Object.assign(r,n&&n.call?n(s.p):n),{}):a,lc(s.target),s.g,s.o,s.k)}let an,_s,$s;fs.bind({g:1});let Qe=fs.bind({k:1});function hc(t,s,a,r){Je.p=s,an=t,_s=a,$s=r}function rt(t,s){let a=this||{};return function(){let r=arguments;function n(i,o){let l=Object.assign({},i),d=l.className||n.className;a.p=Object.assign({theme:_s&&_s()},l),a.o=/ *go\d+/.test(d),l.className=fs.apply(a,r)+(d?" "+d:"");let p=t;return t[0]&&(p=l.as||t,delete l.as),$s&&p[0]&&$s(l),an(p,l)}return n}}var pc=t=>typeof t=="function",es=(t,s)=>pc(t)?t(s):t,xc=(()=>{let t=0;return()=>(++t).toString()})(),rn=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let s=matchMedia("(prefers-reduced-motion: reduce)");t=!s||s.matches}return t}})(),fc=20,nn=(t,s)=>{switch(s.type){case 0:return{...t,toasts:[s.toast,...t.toasts].slice(0,fc)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===s.toast.id?{...i,...s.toast}:i)};case 2:let{toast:a}=s;return nn(t,{type:t.toasts.find(i=>i.id===a.id)?1:0,toast:a});case 3:let{toastId:r}=s;return{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==s.toastId)};case 5:return{...t,pausedAt:s.time};case 6:let n=s.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+n}))}}},Yt=[],ot={toasts:[],pausedAt:void 0},pt=t=>{ot=nn(ot,t),Yt.forEach(s=>{s(ot)})},gc={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},jc=(t={})=>{let[s,a]=c.useState(ot),r=c.useRef(ot);c.useEffect(()=>(r.current!==ot&&a(ot),Yt.push(a),()=>{let i=Yt.indexOf(a);i>-1&&Yt.splice(i,1)}),[]);let n=s.toasts.map(i=>{var o,l,d;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((o=t[i.type])==null?void 0:o.removeDelay)||t?.removeDelay,duration:i.duration||((l=t[i.type])==null?void 0:l.duration)||t?.duration||gc[i.type],style:{...t.style,...(d=t[i.type])==null?void 0:d.style,...i.style}}});return{...s,toasts:n}},vc=(t,s="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:s,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...a,id:a?.id||xc()}),zt=t=>(s,a)=>{let r=vc(s,t,a);return pt({type:2,toast:r}),r.id},De=(t,s)=>zt("blank")(t,s);De.error=zt("error");De.success=zt("success");De.loading=zt("loading");De.custom=zt("custom");De.dismiss=t=>{pt({type:3,toastId:t})};De.remove=t=>pt({type:4,toastId:t});De.promise=(t,s,a)=>{let r=De.loading(s.loading,{...a,...a?.loading});return typeof t=="function"&&(t=t()),t.then(n=>{let i=s.success?es(s.success,n):void 0;return i?De.success(i,{id:r,...a,...a?.success}):De.dismiss(r),n}).catch(n=>{let i=s.error?es(s.error,n):void 0;i?De.error(i,{id:r,...a,...a?.error}):De.dismiss(r)}),t};var bc=(t,s)=>{pt({type:1,toast:{id:t,height:s}})},yc=()=>{pt({type:5,time:Date.now()})},Mt=new Map,Nc=1e3,wc=(t,s=Nc)=>{if(Mt.has(t))return;let a=setTimeout(()=>{Mt.delete(t),pt({type:4,toastId:t})},s);Mt.set(t,a)},kc=t=>{let{toasts:s,pausedAt:a}=jc(t);c.useEffect(()=>{if(a)return;let i=Date.now(),o=s.map(l=>{if(l.duration===1/0)return;let d=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(d<0){l.visible&&De.dismiss(l.id);return}return setTimeout(()=>De.dismiss(l.id),d)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[s,a]);let r=c.useCallback(()=>{a&&pt({type:6,time:Date.now()})},[a]),n=c.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:d=8,defaultPosition:p}=o||{},m=s.filter(j=>(j.position||p)===(i.position||p)&&j.height),u=m.findIndex(j=>j.id===i.id),h=m.filter((j,f)=>f<u&&j.visible).length;return m.filter(j=>j.visible).slice(...l?[h+1]:[0,h]).reduce((j,f)=>j+(f.height||0)+d,0)},[s]);return c.useEffect(()=>{s.forEach(i=>{if(i.dismissed)wc(i.id,i.removeDelay);else{let o=Mt.get(i.id);o&&(clearTimeout(o),Mt.delete(i.id))}})},[s]),{toasts:s,handlers:{updateHeight:bc,startPause:yc,endPause:r,calculateOffset:n}}},Sc=Qe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Cc=Qe`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Pc=Qe`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Tc=rt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Sc} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Cc} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Pc} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Ac=Qe`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Rc=rt("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Ac} 1s linear infinite;
`,Dc=Qe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Ec=Qe`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Mc=rt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Dc} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Ec} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Lc=rt("div")`
  position: absolute;
`,Ic=rt("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Oc=Qe`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Fc=rt("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Oc} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,_c=({toast:t})=>{let{icon:s,type:a,iconTheme:r}=t;return s!==void 0?typeof s=="string"?c.createElement(Fc,null,s):s:a==="blank"?null:c.createElement(Ic,null,c.createElement(Rc,{...r}),a!=="loading"&&c.createElement(Lc,null,a==="error"?c.createElement(Tc,{...r}):c.createElement(Mc,{...r})))},$c=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Uc=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,zc="0%{opacity:0;} 100%{opacity:1;}",Bc="0%{opacity:1;} 100%{opacity:0;}",Vc=rt("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Wc=rt("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,qc=(t,s)=>{let a=t.includes("top")?1:-1,[r,n]=rn()?[zc,Bc]:[$c(a),Uc(a)];return{animation:s?`${Qe(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Qe(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Hc=c.memo(({toast:t,position:s,style:a,children:r})=>{let n=t.height?qc(t.position||s||"top-center",t.visible):{opacity:0},i=c.createElement(_c,{toast:t}),o=c.createElement(Wc,{...t.ariaProps},es(t.message,t));return c.createElement(Vc,{className:t.className,style:{...n,...a,...t.style}},typeof r=="function"?r({icon:i,message:o}):c.createElement(c.Fragment,null,i,o))});hc(c.createElement);var Gc=({id:t,className:s,style:a,onHeightUpdate:r,children:n})=>{let i=c.useCallback(o=>{if(o){let l=()=>{let d=o.getBoundingClientRect().height;r(t,d)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return c.createElement("div",{ref:i,className:s,style:a},n)},Qc=(t,s)=>{let a=t.includes("top"),r=a?{top:0}:{bottom:0},n=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:rn()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${s*(a?1:-1)}px)`,...r,...n}},Yc=fs`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ht=16,Kc=({reverseOrder:t,position:s="top-center",toastOptions:a,gutter:r,children:n,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:d}=kc(a);return c.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Ht,left:Ht,right:Ht,bottom:Ht,pointerEvents:"none",...i},className:o,onMouseEnter:d.startPause,onMouseLeave:d.endPause},l.map(p=>{let m=p.position||s,u=d.calculateOffset(p,{reverseOrder:t,gutter:r,defaultPosition:s}),h=Qc(m,u);return c.createElement(Gc,{id:p.id,key:p.id,onHeightUpdate:d.updateHeight,className:p.visible?Yc:"",style:h},p.type==="custom"?es(p.message,p):n?n(p):c.createElement(Hc,{toast:p,position:m}))}))},V=De;const on=c.createContext({socket:null,notifications:[],unreadCount:0,markAsRead:()=>{},markAllAsRead:()=>{},clearNotifications:()=>{}}),xt=()=>c.useContext(on),Xc=({children:t})=>{const[s,a]=c.useState(null),[r,n]=c.useState([]),[i,o]=c.useState(0);c.useEffect(()=>{const m=localStorage.getItem("token");if(!m)return;const u=Oi(Bi,{auth:{token:m},transports:["websocket"],withCredentials:!0});return u.on("connect",()=>{V.success("Connected to real-time updates")}),u.on("disconnect",()=>{V.error("Lost connection to real-time updates")}),u.on("notification:new",h=>{switch(n(j=>[h,...j]),o(j=>j+1),h.type){case"success":V.success(h.message,{duration:5e3,icon:"✅"});break;case"error":V.error(h.message,{duration:6e3,icon:"❌"});break;case"warning":V(h.message,{duration:5e3,icon:"⚠️",style:{background:"#fbbf24",color:"#1f2937"}});break;case"info":V(h.message,{duration:4e3,icon:"ℹ️"});break;default:V(h.message,{duration:4e3})}}),u.on("project:created",h=>{V.success(`New project "${h.project.siteName}" created!`,{duration:5e3,icon:"🏗️"})}),u.on("project:updated",h=>{V.success(`Project "${h.project.siteName}" updated!`,{duration:4e3,icon:"📝"})}),u.on("project:status_changed",h=>{V(`Project "${h.project.siteName}" status changed to ${h.status}`,{duration:4e3,icon:"🔄"})}),u.on("task:assigned",h=>{V.success(`New task "${h.task.title}" assigned to you!`,{duration:5e3,icon:"📋"})}),u.on("task:updated",h=>{V(`Task "${h.task.title}" updated!`,{duration:4e3,icon:"✏️"})}),u.on("task:status_changed",h=>{V(`Task "${h.task.title}" status changed to ${h.status}`,{duration:4e3,icon:"🔄"})}),u.on("task:completed",h=>{V.success(`Task "${h.task.title}" completed!`,{duration:5e3,icon:"✅"})}),u.on("report:submitted",h=>{V.success(`Report submitted for task "${h.report.task}"!`,{duration:5e3,icon:"📊"})}),u.on("user:login",h=>{V(`User ${h.user.name} logged in`,{duration:3e3,icon:"👤"})}),u.on("user:logout",h=>{V(`User ${h.user.name} logged out`,{duration:3e3,icon:"👋"})}),u.on("system:maintenance",h=>{V(h.message,{duration:8e3,icon:"🔧",style:{background:"#f59e0b",color:"#1f2937"}})}),u.on("system:alert",h=>{V.error(h.message,{duration:1e4,icon:"🚨"})}),a(u),()=>{u.disconnect()}},[]);const l=async m=>{try{const u=localStorage.getItem("token");(await fetch(`${qe}/notifications/${m}/read`,{method:"PATCH",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}})).ok&&(n(j=>j.map(f=>f.id===m?{...f,isRead:!0}:f)),o(j=>Math.max(0,j-1)))}catch{}},d=async()=>{try{const m=localStorage.getItem("token");(await fetch(`${qe}/notifications/mark-all-read`,{method:"PATCH",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}})).ok&&(n(h=>h.map(j=>({...j,isRead:!0}))),o(0))}catch{}},p=()=>{n([]),o(0)};return e.jsx(on.Provider,{value:{socket:s,notifications:r,unreadCount:i,markAsRead:l,markAllAsRead:d,clearNotifications:p},children:t})},Ys=()=>{const t=c.useContext(vr);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Ia=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Oa=Rr,Ks=(t,s)=>a=>{var r;if(s?.variants==null)return Oa(t,a?.class,a?.className);const{variants:n,defaultVariants:i}=s,o=Object.keys(n).map(p=>{const m=a?.[p],u=i?.[p];if(m===null)return null;const h=Ia(m)||Ia(u);return n[p][h]}),l=a&&Object.entries(a).reduce((p,m)=>{let[u,h]=m;return h===void 0||(p[u]=h),p},{}),d=s==null||(r=s.compoundVariants)===null||r===void 0?void 0:r.reduce((p,m)=>{let{class:u,className:h,...j}=m;return Object.entries(j).every(f=>{let[v,x]=f;return Array.isArray(x)?x.includes({...i,...l}[v]):{...i,...l}[v]===x})?[...p,u,h]:p},[]);return Oa(t,o,d,a?.class,a?.className)},Jc=Ks("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),R=c.forwardRef(({className:t,variant:s,size:a,asChild:r=!1,...n},i)=>{const o=r?xi:"button";return e.jsx(o,{className:_(Jc({variant:s,size:a,className:t})),ref:i,...n})});R.displayName="Button";const Z=c.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:_("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));Z.displayName="Card";const se=c.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:_("flex flex-col space-y-1.5 p-6",t),...s}));se.displayName="CardHeader";const ae=c.forwardRef(({className:t,...s},a)=>e.jsx("h3",{ref:a,className:_("text-2xl font-semibold leading-none tracking-tight",t),...s}));ae.displayName="CardTitle";const Ae=c.forwardRef(({className:t,...s},a)=>e.jsx("p",{ref:a,className:_("text-sm text-muted-foreground",t),...s}));Ae.displayName="CardDescription";const ee=c.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:_("p-6 pt-0",t),...s}));ee.displayName="CardContent";const Zc=c.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:_("flex items-center p-6 pt-0",t),...s}));Zc.displayName="CardFooter";const X=c.forwardRef(({className:t,type:s,...a},r)=>e.jsx("input",{type:s,className:_("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...a}));X.displayName="Input";var ed="Label",ln=c.forwardRef((t,s)=>e.jsx(ke.label,{...t,ref:s,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(t.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));ln.displayName=ed;var cn=ln;const td=Ks("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),L=c.forwardRef(({className:t,...s},a)=>e.jsx(cn,{ref:a,className:_(td(),t),...s}));L.displayName=cn.displayName;var sd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ad=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rd=(t,s)=>{const a=c.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...d},p)=>c.createElement("svg",{ref:p,...sd,width:n,height:n,stroke:r,strokeWidth:o?Number(i)*24/Number(n):i,className:`lucide lucide-${ad(t)}`,...d},[...s.map(([m,u])=>c.createElement(m,u)),...(Array.isArray(l)?l:[l])||[]]));return a.displayName=`${t}`,a};var G=rd;const nd=G("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),dn=G("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ts=G("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Fa=G("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),id=G("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]),ss=G("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Ye=G("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),od=G("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Le=G("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Xs=G("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),un=G("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ld=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),cd=G("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),dd=G("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),be=G("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),bt=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),gs=G("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),tt=G("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ee=G("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Js=G("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Ss=G("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),ud=G("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),md=G("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),hd=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),yt=G("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),pd=G("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),_a=G("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),$a=G("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Kt=G("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),ct=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ft=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),dt=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Zs=G("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),xd=G("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Nt=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),mn=G("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),He=G("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ea=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ge=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),hn=G("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),ut=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Pe=yi,Te=Ni,Ne=c.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(Ka,{ref:r,className:_("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[s,e.jsx(fi,{asChild:!0,children:e.jsx(un,{className:"h-4 w-4 opacity-50"})})]}));Ne.displayName=Ka.displayName;const pn=c.forwardRef(({className:t,...s},a)=>e.jsx(Xa,{ref:a,className:_("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(cd,{className:"h-4 w-4"})}));pn.displayName=Xa.displayName;const xn=c.forwardRef(({className:t,...s},a)=>e.jsx(Ja,{ref:a,className:_("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(un,{className:"h-4 w-4"})}));xn.displayName=Ja.displayName;const we=c.forwardRef(({className:t,children:s,position:a="popper",...r},n)=>e.jsx(gi,{children:e.jsxs(Za,{ref:n,className:_("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...r,children:[e.jsx(pn,{}),e.jsx(ji,{className:_("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(xn,{})]})}));we.displayName=Za.displayName;const fd=c.forwardRef(({className:t,...s},a)=>e.jsx(er,{ref:a,className:_("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));fd.displayName=er.displayName;const z=c.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(tr,{ref:r,className:_("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(vi,{children:e.jsx(Xs,{className:"h-4 w-4"})})}),e.jsx(bi,{children:s})]}));z.displayName=tr.displayName;const gd=c.forwardRef(({className:t,...s},a)=>e.jsx(sr,{ref:a,className:_("-mx-1 my-1 h-px bg-muted",t),...s}));gd.displayName=sr.displayName;const jd=Ks("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function J({className:t,variant:s,...a}){return e.jsx("div",{className:_(jd({variant:s}),t),...a})}const vd=()=>{const[t,s]=c.useState("superadmin"),[a,r]=c.useState(""),[n,i]=c.useState(""),[o,l]=c.useState(!1);Qs();const{login:d}=Ys(),p=async u=>{if(u.preventDefault(),l(!0),!a||!n||!t){alert("Please fill in all fields including role selection"),l(!1);return}if(!a.includes("@")){alert("Please enter a valid email address"),l(!1);return}try{const h=await Qt.login(a,n,t);if(h.status==="success"){localStorage.setItem("token",h.data.token),sessionStorage.setItem("currentUser",JSON.stringify(h.data.user));const j={superadmin:"/superadmin","super-admin":"/superadmin",manager:"/manager",technician:"/technician"},f=h.data.user.role;alert(`✅ Login successful!

Welcome, ${h.data.user.name}!`),window.location.href=j[f]||"/login"}else alert(`❌ Login failed!

${h.message||"Invalid credentials"}`)}catch{alert(`❌ Connection error!

Please make sure the backend server is running.`)}finally{l(!1)}},m={superadmin:{icon:Zs,title:"Super Admin",description:"Full system control and oversight",color:"bg-primary text-primary-foreground"},manager:{icon:dt,title:"Manager",description:"Task assignment and team management",color:"bg-success text-success-foreground"},technician:{icon:hn,title:"Technician",description:"Field operations and task execution",color:"bg-pending text-pending-foreground"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center mobile-padding",children:e.jsxs("div",{className:"w-full max-w-md mobile-space-y",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fdf520b57241b409c97fe8b1702f73e79%2Fce826268d92b499a98eeb82a92fb89e5?format=webp&width=800",alt:"Cosmic Solutions",className:"h-12 sm:h-16 w-auto"})}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground mt-2",children:"Site Engineer & CCTV Management System"})]}),e.jsxs(Z,{className:"shadow-xl border-0",children:[e.jsxs(se,{className:"mobile-space-y",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(ae,{className:"mobile-text-2xl",children:"Welcome Back"}),e.jsx(Ae,{className:"mobile-text-base",children:"Sign in to your account"})]}),e.jsxs("div",{className:"mobile-form-group",children:[e.jsx(L,{className:"mobile-text-sm",children:"Select your role"}),e.jsxs(Pe,{value:t,onValueChange:u=>s(u),children:[e.jsx(Ne,{className:"mobile-select",children:e.jsx(Te,{})}),e.jsx(we,{children:Object.entries(m).map(([u,h])=>{const j=h.icon;return e.jsx(z,{value:u,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{className:"mobile-text-sm",children:h.title})]})},u)})})]}),e.jsx("div",{className:"flex justify-center pt-2",children:e.jsxs(J,{variant:"outline",className:`${m[t].color} border-0 mobile-text-sm`,children:[As.createElement(m[t].icon,{className:"h-3 w-3 mr-1"}),m[t].description]})})]})]}),e.jsxs(ee,{children:[e.jsxs("form",{onSubmit:p,className:"mobile-form",children:[e.jsxs("div",{className:"mobile-form-group",children:[e.jsx(L,{htmlFor:"email",className:"mobile-text-sm",children:"Email"}),e.jsx(X,{id:"email",type:"email",placeholder:"Enter your email",value:a,onChange:u=>r(u.target.value),required:!0,disabled:o,className:"mobile-input"})]}),e.jsxs("div",{className:"mobile-form-group",children:[e.jsx(L,{htmlFor:"password",className:"mobile-text-sm",children:"Password"}),e.jsx(X,{id:"password",type:"password",placeholder:"Enter your password",value:n,onChange:u=>i(u.target.value),required:!0,disabled:o,className:"mobile-input"})]}),e.jsx(R,{type:"submit",className:"mobile-button h-11 mobile-text-base font-medium",disabled:o,children:o?"Signing in...":`Sign In as ${m[t].title}`})]}),e.jsxs("div",{className:"mt-6 mobile-padding bg-muted rounded-lg",children:[e.jsx("p",{className:"mobile-text-sm font-medium text-muted-foreground mb-3",children:"Available Login Credentials:"}),e.jsxs("div",{className:"mobile-space-y",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mobile-text-sm font-medium text-primary",children:"Super Admin:"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:"admin@cosmicsolutions.com / Admin@123"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mobile-text-sm font-medium text-success",children:"Managers:"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:"manager@cosmicsolutions.com / Manager@123"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:"sarah.johnson@cosmicsolutions.com / Sarah@123"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:"david.kim@cosmicsolutions.com / David@123"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mobile-text-sm font-medium text-pending",children:"Technicians:"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:"technician@cosmicsolutions.com / Tech@123"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:"mike.chen@cosmicsolutions.com / Mike@123"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:"lisa.rodriguez@cosmicsolutions.com / Lisa@123"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:"james.wilson@cosmicsolutions.com / James@123"})]})]})]})]})]}),e.jsx("p",{className:"text-center mobile-text-sm text-muted-foreground",children:"© 2025 Cosmic Solutions. All rights reserved."})]})})};var Cs={exports:{}},Ps={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ua;function bd(){if(Ua)return Ps;Ua=1;var t=Ii();function s(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var a=typeof Object.is=="function"?Object.is:s,r=t.useState,n=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function l(u,h){var j=h(),f=r({inst:{value:j,getSnapshot:h}}),v=f[0].inst,x=f[1];return i(function(){v.value=j,v.getSnapshot=h,d(v)&&x({inst:v})},[u,j,h]),n(function(){return d(v)&&x({inst:v}),u(function(){d(v)&&x({inst:v})})},[u]),o(j),j}function d(u){var h=u.getSnapshot;u=u.value;try{var j=h();return!a(u,j)}catch{return!0}}function p(u,h){return h()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:l;return Ps.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,Ps}var za;function yd(){return za||(za=1,Cs.exports=bd()),Cs.exports}var Nd=yd();function wd(){return Nd.useSyncExternalStore(kd,()=>!0,()=>!1)}function kd(){return()=>{}}var ta="Avatar",[Sd,wm]=_t(ta),[Cd,fn]=Sd(ta),gn=c.forwardRef((t,s)=>{const{__scopeAvatar:a,...r}=t,[n,i]=c.useState("idle");return e.jsx(Cd,{scope:a,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:e.jsx(ke.span,{...r,ref:s})})});gn.displayName=ta;var jn="AvatarImage",vn=c.forwardRef((t,s)=>{const{__scopeAvatar:a,src:r,onLoadingStatusChange:n=()=>{},...i}=t,o=fn(jn,a),l=Pd(r,i),d=Xe(p=>{n(p),o.onImageLoadingStatusChange(p)});return Jt(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?e.jsx(ke.img,{...i,ref:s,src:r}):null});vn.displayName=jn;var bn="AvatarFallback",yn=c.forwardRef((t,s)=>{const{__scopeAvatar:a,delayMs:r,...n}=t,i=fn(bn,a),[o,l]=c.useState(r===void 0);return c.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(d)}},[r]),o&&i.imageLoadingStatus!=="loaded"?e.jsx(ke.span,{...n,ref:s}):null});yn.displayName=bn;function Ba(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Pd(t,{referrerPolicy:s,crossOrigin:a}){const r=wd(),n=c.useRef(null),i=r?(n.current||(n.current=new window.Image),n.current):null,[o,l]=c.useState(()=>Ba(i,t));return Jt(()=>{l(Ba(i,t))},[i,t]),Jt(()=>{const d=u=>()=>{l(u)};if(!i)return;const p=d("loaded"),m=d("error");return i.addEventListener("load",p),i.addEventListener("error",m),s&&(i.referrerPolicy=s),typeof a=="string"&&(i.crossOrigin=a),()=>{i.removeEventListener("load",p),i.removeEventListener("error",m)}},[i,a,s]),o}var Nn=gn,wn=vn,kn=yn;const as=c.forwardRef(({className:t,...s},a)=>e.jsx(Nn,{ref:a,className:_("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));as.displayName=Nn.displayName;const rs=c.forwardRef(({className:t,...s},a)=>e.jsx(wn,{ref:a,className:_("aspect-square h-full w-full",t),...s}));rs.displayName=wn.displayName;const ns=c.forwardRef(({className:t,...s},a)=>e.jsx(kn,{ref:a,className:_("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));ns.displayName=kn.displayName;const xe=Si,Td=Ci,Ad=wi,Sn=c.forwardRef(({className:t,...s},a)=>e.jsx(ar,{ref:a,className:_("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));Sn.displayName=ar.displayName;const de=c.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(Ad,{children:[e.jsx(Sn,{}),e.jsxs(rr,{ref:r,className:_("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a,children:[s,e.jsxs(ki,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(ut,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));de.displayName=rr.displayName;const ue=({className:t,...s})=>e.jsx("div",{className:_("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});ue.displayName="DialogHeader";const me=c.forwardRef(({className:t,...s},a)=>e.jsx(nr,{ref:a,className:_("text-lg font-semibold leading-none tracking-tight",t),...s}));me.displayName=nr.displayName;const he=c.forwardRef(({className:t,...s},a)=>e.jsx(ir,{ref:a,className:_("text-sm text-muted-foreground",t),...s}));he.displayName=ir.displayName;const Rd=({currentImage:t,userName:s,onImageUpload:a,size:r="md"})=>{const[n,i]=c.useState(!1),[o,l]=c.useState(null),[d,p]=c.useState(!1),m=c.useRef(null),u={sm:"h-8 w-8",md:"h-10 w-10",lg:"h-16 w-16"},h=x=>{const k=x.target.files?.[0];if(k){if(!k.type.startsWith("image/")){V.error("Please select an image file");return}if(k.size>5*1024*1024){V.error("Image size should be less than 5MB");return}const M=new FileReader;M.onload=N=>{l(N.target?.result)},M.readAsDataURL(k)}},j=async()=>{const x=m.current?.files?.[0];if(!x){V.error("Please select an image");return}i(!0);try{await a(x),V.success("Profile picture updated successfully!"),p(!1),l(null),m.current&&(m.current.value="")}catch{V.error("Failed to upload profile picture")}finally{i(!1)}},f=()=>{l(null),m.current&&(m.current.value="")},v=x=>x.split(" ").map(k=>k[0]).join("").toUpperCase();return e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs(xe,{open:d,onOpenChange:p,children:[e.jsx(Td,{asChild:!0,children:e.jsxs(R,{variant:"ghost",className:"relative p-0 h-auto w-auto rounded-full hover:opacity-80 transition-opacity",children:[e.jsxs(as,{className:u[r],children:[e.jsx(rs,{src:t||o,alt:s}),e.jsx(ns,{className:"bg-primary text-primary-foreground",children:v(s)})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-full opacity-0 hover:opacity-100 transition-opacity",children:e.jsx(od,{className:"h-4 w-4 text-white"})})]})}),e.jsxs(de,{className:"sm:max-w-md",children:[e.jsxs(ue,{children:[e.jsx(me,{children:"Update Profile Picture"}),e.jsx(he,{children:"Upload a new profile picture. Supported formats: JPG, PNG, GIF. Max size: 5MB."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs(as,{className:"h-24 w-24",children:[e.jsx(rs,{src:o||t,alt:s}),e.jsx(ns,{className:"bg-primary text-primary-foreground text-lg",children:v(s)})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"profile-picture",children:"Select Image"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{id:"profile-picture",type:"file",accept:"image/*",ref:m,onChange:h,className:"flex-1"}),o&&e.jsx(R,{variant:"outline",size:"icon",onClick:f,className:"h-10 w-10",children:e.jsx(ut,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(R,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(R,{onClick:j,disabled:!o||n,children:n?"Uploading...":"Upload"})]})]})]})]})})},Cn=Ti,Pn=Ai,Dd=c.forwardRef(({className:t,inset:s,children:a,...r},n)=>e.jsxs(or,{ref:n,className:_("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",t),...r,children:[a,e.jsx(ld,{className:"ml-auto h-4 w-4"})]}));Dd.displayName=or.displayName;const Ed=c.forwardRef(({className:t,...s},a)=>e.jsx(lr,{ref:a,className:_("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));Ed.displayName=lr.displayName;const sa=c.forwardRef(({className:t,sideOffset:s=4,...a},r)=>e.jsx(Pi,{children:e.jsx(cr,{ref:r,sideOffset:s,className:_("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})}));sa.displayName=cr.displayName;const Us=c.forwardRef(({className:t,inset:s,...a},r)=>e.jsx(dr,{ref:r,className:_("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",t),...a}));Us.displayName=dr.displayName;const Md=c.forwardRef(({className:t,children:s,checked:a,...r},n)=>e.jsxs(ur,{ref:n,className:_("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:a,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(mr,{children:e.jsx(Xs,{className:"h-4 w-4"})})}),s]}));Md.displayName=ur.displayName;const Ld=c.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(hr,{ref:r,className:_("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(mr,{children:e.jsx(dd,{className:"h-2 w-2 fill-current"})})}),s]}));Ld.displayName=hr.displayName;const aa=c.forwardRef(({className:t,inset:s,...a},r)=>e.jsx(pr,{ref:r,className:_("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...a}));aa.displayName=pr.displayName;const is=c.forwardRef(({className:t,...s},a)=>e.jsx(xr,{ref:a,className:_("-mx-1 my-1 h-px bg-muted",t),...s}));is.displayName=xr.displayName;function Id(t,[s,a]){return Math.min(a,Math.max(s,t))}function Od(t,s){return c.useReducer((a,r)=>s[a][r]??a,t)}var ra="ScrollArea",[Tn,km]=_t(ra),[Fd,Oe]=Tn(ra),An=c.forwardRef((t,s)=>{const{__scopeScrollArea:a,type:r="hover",dir:n,scrollHideDelay:i=600,...o}=t,[l,d]=c.useState(null),[p,m]=c.useState(null),[u,h]=c.useState(null),[j,f]=c.useState(null),[v,x]=c.useState(null),[k,M]=c.useState(0),[N,T]=c.useState(0),[O,I]=c.useState(!1),[P,B]=c.useState(!1),q=at(s,A=>d(A)),H=fr(n);return e.jsx(Fd,{scope:a,type:r,dir:H,scrollHideDelay:i,scrollArea:l,viewport:p,onViewportChange:m,content:u,onContentChange:h,scrollbarX:j,onScrollbarXChange:f,scrollbarXEnabled:O,onScrollbarXEnabledChange:I,scrollbarY:v,onScrollbarYChange:x,scrollbarYEnabled:P,onScrollbarYEnabledChange:B,onCornerWidthChange:M,onCornerHeightChange:T,children:e.jsx(ke.div,{dir:H,...o,ref:q,style:{position:"relative","--radix-scroll-area-corner-width":k+"px","--radix-scroll-area-corner-height":N+"px",...t.style}})})});An.displayName=ra;var Rn="ScrollAreaViewport",Dn=c.forwardRef((t,s)=>{const{__scopeScrollArea:a,children:r,nonce:n,...i}=t,o=Oe(Rn,a),l=c.useRef(null),d=at(s,l,o.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(ke.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Dn.displayName=Rn;var Ve="ScrollAreaScrollbar",na=c.forwardRef((t,s)=>{const{forceMount:a,...r}=t,n=Oe(Ve,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=n,l=t.orientation==="horizontal";return c.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),n.type==="hover"?e.jsx(_d,{...r,ref:s,forceMount:a}):n.type==="scroll"?e.jsx($d,{...r,ref:s,forceMount:a}):n.type==="auto"?e.jsx(En,{...r,ref:s,forceMount:a}):n.type==="always"?e.jsx(ia,{...r,ref:s}):null});na.displayName=Ve;var _d=c.forwardRef((t,s)=>{const{forceMount:a,...r}=t,n=Oe(Ve,t.__scopeScrollArea),[i,o]=c.useState(!1);return c.useEffect(()=>{const l=n.scrollArea;let d=0;if(l){const p=()=>{window.clearTimeout(d),o(!0)},m=()=>{d=window.setTimeout(()=>o(!1),n.scrollHideDelay)};return l.addEventListener("pointerenter",p),l.addEventListener("pointerleave",m),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",p),l.removeEventListener("pointerleave",m)}}},[n.scrollArea,n.scrollHideDelay]),e.jsx(kt,{present:a||i,children:e.jsx(En,{"data-state":i?"visible":"hidden",...r,ref:s})})}),$d=c.forwardRef((t,s)=>{const{forceMount:a,...r}=t,n=Oe(Ve,t.__scopeScrollArea),i=t.orientation==="horizontal",o=vs(()=>d("SCROLL_END"),100),[l,d]=Od("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return c.useEffect(()=>{if(l==="idle"){const p=window.setTimeout(()=>d("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(p)}},[l,n.scrollHideDelay,d]),c.useEffect(()=>{const p=n.viewport,m=i?"scrollLeft":"scrollTop";if(p){let u=p[m];const h=()=>{const j=p[m];u!==j&&(d("SCROLL"),o()),u=j};return p.addEventListener("scroll",h),()=>p.removeEventListener("scroll",h)}},[n.viewport,i,d,o]),e.jsx(kt,{present:a||l!=="hidden",children:e.jsx(ia,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:s,onPointerEnter:Ce(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Ce(t.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),En=c.forwardRef((t,s)=>{const a=Oe(Ve,t.__scopeScrollArea),{forceMount:r,...n}=t,[i,o]=c.useState(!1),l=t.orientation==="horizontal",d=vs(()=>{if(a.viewport){const p=a.viewport.offsetWidth<a.viewport.scrollWidth,m=a.viewport.offsetHeight<a.viewport.scrollHeight;o(l?p:m)}},10);return wt(a.viewport,d),wt(a.content,d),e.jsx(kt,{present:r||i,children:e.jsx(ia,{"data-state":i?"visible":"hidden",...n,ref:s})})}),ia=c.forwardRef((t,s)=>{const{orientation:a="vertical",...r}=t,n=Oe(Ve,t.__scopeScrollArea),i=c.useRef(null),o=c.useRef(0),[l,d]=c.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=Fn(l.viewport,l.content),m={...r,sizes:l,onSizesChange:d,hasThumb:p>0&&p<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function u(h,j){return qd(h,o.current,l,j)}return a==="horizontal"?e.jsx(Ud,{...m,ref:s,onThumbPositionChange:()=>{if(n.viewport&&i.current){const h=n.viewport.scrollLeft,j=Va(h,l,n.dir);i.current.style.transform=`translate3d(${j}px, 0, 0)`}},onWheelScroll:h=>{n.viewport&&(n.viewport.scrollLeft=h)},onDragScroll:h=>{n.viewport&&(n.viewport.scrollLeft=u(h,n.dir))}}):a==="vertical"?e.jsx(zd,{...m,ref:s,onThumbPositionChange:()=>{if(n.viewport&&i.current){const h=n.viewport.scrollTop,j=Va(h,l);i.current.style.transform=`translate3d(0, ${j}px, 0)`}},onWheelScroll:h=>{n.viewport&&(n.viewport.scrollTop=h)},onDragScroll:h=>{n.viewport&&(n.viewport.scrollTop=u(h))}}):null}),Ud=c.forwardRef((t,s)=>{const{sizes:a,onSizesChange:r,...n}=t,i=Oe(Ve,t.__scopeScrollArea),[o,l]=c.useState(),d=c.useRef(null),p=at(s,d,i.onScrollbarXChange);return c.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),e.jsx(Ln,{"data-orientation":"horizontal",...n,ref:p,sizes:a,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":js(a)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.x),onDragScroll:m=>t.onDragScroll(m.x),onWheelScroll:(m,u)=>{if(i.viewport){const h=i.viewport.scrollLeft+m.deltaX;t.onWheelScroll(h),$n(h,u)&&m.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:ls(o.paddingLeft),paddingEnd:ls(o.paddingRight)}})}})}),zd=c.forwardRef((t,s)=>{const{sizes:a,onSizesChange:r,...n}=t,i=Oe(Ve,t.__scopeScrollArea),[o,l]=c.useState(),d=c.useRef(null),p=at(s,d,i.onScrollbarYChange);return c.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),e.jsx(Ln,{"data-orientation":"vertical",...n,ref:p,sizes:a,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":js(a)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.y),onDragScroll:m=>t.onDragScroll(m.y),onWheelScroll:(m,u)=>{if(i.viewport){const h=i.viewport.scrollTop+m.deltaY;t.onWheelScroll(h),$n(h,u)&&m.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:ls(o.paddingTop),paddingEnd:ls(o.paddingBottom)}})}})}),[Bd,Mn]=Tn(Ve),Ln=c.forwardRef((t,s)=>{const{__scopeScrollArea:a,sizes:r,hasThumb:n,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:p,onWheelScroll:m,onResize:u,...h}=t,j=Oe(Ve,a),[f,v]=c.useState(null),x=at(s,q=>v(q)),k=c.useRef(null),M=c.useRef(""),N=j.viewport,T=r.content-r.viewport,O=Xe(m),I=Xe(d),P=vs(u,10);function B(q){if(k.current){const H=q.clientX-k.current.left,A=q.clientY-k.current.top;p({x:H,y:A})}}return c.useEffect(()=>{const q=H=>{const A=H.target;f?.contains(A)&&O(H,T)};return document.addEventListener("wheel",q,{passive:!1}),()=>document.removeEventListener("wheel",q,{passive:!1})},[N,f,T,O]),c.useEffect(I,[r,I]),wt(f,P),wt(j.content,P),e.jsx(Bd,{scope:a,scrollbar:f,hasThumb:n,onThumbChange:Xe(i),onThumbPointerUp:Xe(o),onThumbPositionChange:I,onThumbPointerDown:Xe(l),children:e.jsx(ke.div,{...h,ref:x,style:{position:"absolute",...h.style},onPointerDown:Ce(t.onPointerDown,q=>{q.button===0&&(q.target.setPointerCapture(q.pointerId),k.current=f.getBoundingClientRect(),M.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",j.viewport&&(j.viewport.style.scrollBehavior="auto"),B(q))}),onPointerMove:Ce(t.onPointerMove,B),onPointerUp:Ce(t.onPointerUp,q=>{const H=q.target;H.hasPointerCapture(q.pointerId)&&H.releasePointerCapture(q.pointerId),document.body.style.webkitUserSelect=M.current,j.viewport&&(j.viewport.style.scrollBehavior=""),k.current=null})})})}),os="ScrollAreaThumb",In=c.forwardRef((t,s)=>{const{forceMount:a,...r}=t,n=Mn(os,t.__scopeScrollArea);return e.jsx(kt,{present:a||n.hasThumb,children:e.jsx(Vd,{ref:s,...r})})}),Vd=c.forwardRef((t,s)=>{const{__scopeScrollArea:a,style:r,...n}=t,i=Oe(os,a),o=Mn(os,a),{onThumbPositionChange:l}=o,d=at(s,u=>o.onThumbChange(u)),p=c.useRef(void 0),m=vs(()=>{p.current&&(p.current(),p.current=void 0)},100);return c.useEffect(()=>{const u=i.viewport;if(u){const h=()=>{if(m(),!p.current){const j=Hd(u,l);p.current=j,l()}};return l(),u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[i.viewport,m,l]),e.jsx(ke.div,{"data-state":o.hasThumb?"visible":"hidden",...n,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ce(t.onPointerDownCapture,u=>{const j=u.target.getBoundingClientRect(),f=u.clientX-j.left,v=u.clientY-j.top;o.onThumbPointerDown({x:f,y:v})}),onPointerUp:Ce(t.onPointerUp,o.onThumbPointerUp)})});In.displayName=os;var oa="ScrollAreaCorner",On=c.forwardRef((t,s)=>{const a=Oe(oa,t.__scopeScrollArea),r=!!(a.scrollbarX&&a.scrollbarY);return a.type!=="scroll"&&r?e.jsx(Wd,{...t,ref:s}):null});On.displayName=oa;var Wd=c.forwardRef((t,s)=>{const{__scopeScrollArea:a,...r}=t,n=Oe(oa,a),[i,o]=c.useState(0),[l,d]=c.useState(0),p=!!(i&&l);return wt(n.scrollbarX,()=>{const m=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(m),d(m)}),wt(n.scrollbarY,()=>{const m=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(m),o(m)}),p?e.jsx(ke.div,{...r,ref:s,style:{width:i,height:l,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function ls(t){return t?parseInt(t,10):0}function Fn(t,s){const a=t/s;return isNaN(a)?0:a}function js(t){const s=Fn(t.viewport,t.content),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-a)*s;return Math.max(r,18)}function qd(t,s,a,r="ltr"){const n=js(a),i=n/2,o=s||i,l=n-o,d=a.scrollbar.paddingStart+o,p=a.scrollbar.size-a.scrollbar.paddingEnd-l,m=a.content-a.viewport,u=r==="ltr"?[0,m]:[m*-1,0];return _n([d,p],u)(t)}function Va(t,s,a="ltr"){const r=js(s),n=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,i=s.scrollbar.size-n,o=s.content-s.viewport,l=i-r,d=a==="ltr"?[0,o]:[o*-1,0],p=Id(t,d);return _n([0,o],[0,l])(p)}function _n(t,s){return a=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const r=(s[1]-s[0])/(t[1]-t[0]);return s[0]+r*(a-t[0])}}function $n(t,s){return t>0&&t<s}var Hd=(t,s=()=>{})=>{let a={left:t.scrollLeft,top:t.scrollTop},r=0;return function n(){const i={left:t.scrollLeft,top:t.scrollTop},o=a.left!==i.left,l=a.top!==i.top;(o||l)&&s(),a=i,r=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(r)};function vs(t,s){const a=Xe(t),r=c.useRef(0);return c.useEffect(()=>()=>window.clearTimeout(r.current),[]),c.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(a,s)},[a,s])}function wt(t,s){const a=Xe(s);Jt(()=>{let r=0;if(t){const n=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(a)});return n.observe(t),()=>{window.cancelAnimationFrame(r),n.unobserve(t)}}},[t,a])}var Un=An,Gd=Dn,Qd=On;const zn=c.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(Un,{ref:r,className:_("relative overflow-hidden",t),...a,children:[e.jsx(Gd,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(Bn,{}),e.jsx(Qd,{})]}));zn.displayName=Un.displayName;const Bn=c.forwardRef(({className:t,orientation:s="vertical",...a},r)=>e.jsx(na,{ref:r,orientation:s,className:_("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...a,children:e.jsx(In,{className:"relative flex-1 rounded-full bg-border"})}));Bn.displayName=na.displayName;const Gt=43200,Wa=1440,qa=Symbol.for("constructDateFrom");function la(t,s){return typeof t=="function"?t(s):t&&typeof t=="object"&&qa in t?t[qa](s):t instanceof Date?new t.constructor(s):new Date(s)}function st(t,s){return la(t,t)}let Yd={};function Kd(){return Yd}function Ha(t){const s=st(t),a=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return a.setUTCFullYear(s.getFullYear()),+t-+a}function ca(t,...s){const a=la.bind(null,t||s.find(r=>typeof r=="object"));return s.map(a)}function Xt(t,s){const a=+st(t)-+st(s);return a<0?-1:a>0?1:a}function Xd(t){return la(t,Date.now())}function Jd(t,s,a){const[r,n]=ca(a?.in,t,s),i=r.getFullYear()-n.getFullYear(),o=r.getMonth()-n.getMonth();return i*12+o}function Zd(t){return s=>{const r=(t?Math[t]:Math.trunc)(s);return r===0?0:r}}function eu(t,s){return+st(t)-+st(s)}function tu(t,s){const a=st(t);return a.setHours(23,59,59,999),a}function su(t,s){const a=st(t),r=a.getMonth();return a.setFullYear(a.getFullYear(),r+1,0),a.setHours(23,59,59,999),a}function au(t,s){const a=st(t);return+tu(a)==+su(a)}function ru(t,s,a){const[r,n,i]=ca(a?.in,t,t,s),o=Xt(n,i),l=Math.abs(Jd(n,i));if(l<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-o*l);let d=Xt(n,i)===-o;au(r)&&l===1&&Xt(r,i)===1&&(d=!1);const p=o*(l-+d);return p===0?0:p}function nu(t,s,a){const r=eu(t,s)/1e3;return Zd(a?.roundingMethod)(r)}const iu={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ou=(t,s,a)=>{let r;const n=iu[t];return typeof n=="string"?r=n:s===1?r=n.one:r=n.other.replace("{{count}}",s.toString()),a?.addSuffix?a.comparison&&a.comparison>0?"in "+r:r+" ago":r};function Ts(t){return(s={})=>{const a=s.width?String(s.width):t.defaultWidth;return t.formats[a]||t.formats[t.defaultWidth]}}const lu={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cu={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},du={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uu={date:Ts({formats:lu,defaultWidth:"full"}),time:Ts({formats:cu,defaultWidth:"full"}),dateTime:Ts({formats:du,defaultWidth:"full"})},mu={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},hu=(t,s,a,r)=>mu[t];function Dt(t){return(s,a)=>{const r=a?.context?String(a.context):"standalone";let n;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=a?.width?String(a.width):o;n=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=a?.width?String(a.width):t.defaultWidth;n=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(s):s;return n[i]}}const pu={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},xu={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fu={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},gu={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ju={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},vu={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},bu=(t,s)=>{const a=Number(t),r=a%100;if(r>20||r<10)switch(r%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},yu={ordinalNumber:bu,era:Dt({values:pu,defaultWidth:"wide"}),quarter:Dt({values:xu,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Dt({values:fu,defaultWidth:"wide"}),day:Dt({values:gu,defaultWidth:"wide"}),dayPeriod:Dt({values:ju,defaultWidth:"wide",formattingValues:vu,defaultFormattingWidth:"wide"})};function Et(t){return(s,a={})=>{const r=a.width,n=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=s.match(n);if(!i)return null;const o=i[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(l)?wu(l,u=>u.test(o)):Nu(l,u=>u.test(o));let p;p=t.valueCallback?t.valueCallback(d):d,p=a.valueCallback?a.valueCallback(p):p;const m=s.slice(o.length);return{value:p,rest:m}}}function Nu(t,s){for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&s(t[a]))return a}function wu(t,s){for(let a=0;a<t.length;a++)if(s(t[a]))return a}function ku(t){return(s,a={})=>{const r=s.match(t.matchPattern);if(!r)return null;const n=r[0],i=s.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=a.valueCallback?a.valueCallback(o):o;const l=s.slice(n.length);return{value:o,rest:l}}}const Su=/^(\d+)(th|st|nd|rd)?/i,Cu=/\d+/i,Pu={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Tu={any:[/^b/i,/^(a|c)/i]},Au={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ru={any:[/1/i,/2/i,/3/i,/4/i]},Du={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Eu={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Mu={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Lu={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Iu={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ou={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Fu={ordinalNumber:ku({matchPattern:Su,parsePattern:Cu,valueCallback:t=>parseInt(t,10)}),era:Et({matchPatterns:Pu,defaultMatchWidth:"wide",parsePatterns:Tu,defaultParseWidth:"any"}),quarter:Et({matchPatterns:Au,defaultMatchWidth:"wide",parsePatterns:Ru,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Et({matchPatterns:Du,defaultMatchWidth:"wide",parsePatterns:Eu,defaultParseWidth:"any"}),day:Et({matchPatterns:Mu,defaultMatchWidth:"wide",parsePatterns:Lu,defaultParseWidth:"any"}),dayPeriod:Et({matchPatterns:Iu,defaultMatchWidth:"any",parsePatterns:Ou,defaultParseWidth:"any"})},_u={code:"en-US",formatDistance:ou,formatLong:uu,formatRelative:hu,localize:yu,match:Fu,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $u(t,s,a){const r=Kd(),n=a?.locale??r.locale??_u,i=2520,o=Xt(t,s);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:o}),[d,p]=ca(a?.in,...o>0?[s,t]:[t,s]),m=nu(p,d),u=(Ha(p)-Ha(d))/1e3,h=Math.round((m-u)/60);let j;if(h<2)return a?.includeSeconds?m<5?n.formatDistance("lessThanXSeconds",5,l):m<10?n.formatDistance("lessThanXSeconds",10,l):m<20?n.formatDistance("lessThanXSeconds",20,l):m<40?n.formatDistance("halfAMinute",0,l):m<60?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",1,l):h===0?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",h,l);if(h<45)return n.formatDistance("xMinutes",h,l);if(h<90)return n.formatDistance("aboutXHours",1,l);if(h<Wa){const f=Math.round(h/60);return n.formatDistance("aboutXHours",f,l)}else{if(h<i)return n.formatDistance("xDays",1,l);if(h<Gt){const f=Math.round(h/Wa);return n.formatDistance("xDays",f,l)}else if(h<Gt*2)return j=Math.round(h/Gt),n.formatDistance("aboutXMonths",j,l)}if(j=ru(p,d),j<12){const f=Math.round(h/Gt);return n.formatDistance("xMonths",f,l)}else{const f=j%12,v=Math.trunc(j/12);return f<3?n.formatDistance("aboutXYears",v,l):f<9?n.formatDistance("overXYears",v,l):n.formatDistance("almostXYears",v+1,l)}}function Uu(t,s){return $u(t,Xd(t),s)}const zu=t=>{switch(t){case"success":return e.jsx(Le,{className:"h-4 w-4 text-success"});case"error":return e.jsx(ts,{className:"h-4 w-4 text-destructive"});case"warning":return e.jsx(ts,{className:"h-4 w-4 text-warning"});case"info":return e.jsx(ss,{className:"h-4 w-4 text-primary"});case"system":return e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"});default:return e.jsx(ss,{className:"h-4 w-4 text-muted-foreground"})}},Bu=t=>{switch(t){case"urgent":return"bg-destructive text-destructive-foreground";case"high":return"bg-orange-500 text-white";case"medium":return"bg-primary text-primary-foreground";case"low":return"bg-muted text-muted-foreground";default:return"bg-muted text-muted-foreground"}},Vu=({className:t})=>{const{notifications:s,unreadCount:a,markAsRead:r,markAllAsRead:n,clearNotifications:i}=xt(),o=s.slice(0,10);return e.jsxs(Cn,{children:[e.jsx(Pn,{asChild:!0,children:e.jsxs(R,{variant:"ghost",size:"icon",className:_("relative",t),children:[a>0?e.jsx(id,{className:"h-5 w-5"}):e.jsx(ss,{className:"h-5 w-5"}),a>0&&e.jsx(J,{className:"absolute -top-1 -right-1 h-5 w-5 p-0 flex items-center justify-center bg-destructive text-destructive-foreground text-xs",children:a>99?"99+":a})]})}),e.jsxs(sa,{className:"w-80 max-h-[600px]",align:"end",forceMount:!0,children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx(aa,{className:"text-base font-semibold",children:"Notifications"}),s.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[a>0&&e.jsxs(R,{variant:"ghost",size:"sm",onClick:n,className:"h-6 px-2 text-xs",children:[e.jsx(Xs,{className:"h-3 w-3 mr-1"}),"Mark all read"]}),e.jsxs(R,{variant:"ghost",size:"sm",onClick:i,className:"h-6 px-2 text-xs",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),"Clear all"]})]})]}),e.jsx(is,{}),s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(ss,{className:"h-8 w-8 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"You're all caught up!"})]}):e.jsx(zn,{className:"max-h-[400px]",children:e.jsx("div",{className:"space-y-1",children:o.map(l=>e.jsx("div",{className:_("p-3 hover:bg-muted/50 transition-colors cursor-pointer border-l-4",l.read?"border-l-transparent":"bg-primary/5 border-l-primary"),onClick:()=>r(l.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:zu(l.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:_("text-sm leading-tight",!l.isRead&&"font-medium"),children:l.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:l.message})]}),e.jsx("div",{className:"flex flex-col items-end gap-1",children:e.jsx(J,{variant:"outline",className:_("text-xs",Bu(l.priority)),children:l.priority})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:Uu(new Date(l.createdAt),{addSuffix:!0})}),!l.isRead&&e.jsx("div",{className:"h-2 w-2 bg-primary rounded-full"})]})]})]})},l.id))})}),s.length>10&&e.jsxs(e.Fragment,{children:[e.jsx(is,{}),e.jsx("div",{className:"p-2",children:e.jsx(R,{variant:"ghost",className:"w-full text-sm",children:"View all notifications"})})]})]})]})},Ie=({children:t,userRole:s,userName:a="User",userEmail:r="user@cosmicsolutions.com",userProfilePicture:n,onProfilePictureUpload:i})=>{const o=Qs(),l=Ct(),{logout:d}=Ys(),[p,m]=As.useState(!1),[u,h]=As.useState(n),j=i||(async T=>{try{const O=localStorage.getItem("token"),I=new FormData;I.append("profilePicture",T);const B=await(await fetch("https://cosmicproject-backend-1.onrender.com/api/profile/picture",{method:"POST",headers:{Authorization:`Bearer ${O}`},body:I})).json();if(B.status==="success")h(`https://cosmicproject-backend-1.onrender.com/${B.data.profilePicture}`);else throw new Error(B.message||"Failed to upload profile picture")}catch(O){throw O}}),f=T=>T==="super-admin"?"superadmin":T,v={superadmin:{title:"Super Admin",icon:Zs,color:"bg-primary text-primary-foreground",navigation:[{title:"Dashboard",href:"/superadmin",icon:Ss},{title:"Projects",href:"/superadmin/projects",icon:be},{title:"Reports",href:"/superadmin/reports",icon:Ee},{title:"Settings",href:"/superadmin/settings",icon:dt}]},manager:{title:"Manager",icon:dt,color:"bg-success text-success-foreground",navigation:[{title:"Dashboard",href:"/manager",icon:Ss},{title:"My Projects",href:"/manager/projects",icon:be},{title:"Technicians",href:"/manager/technicians",icon:Ge},{title:"Tasks",href:"/manager/tasks",icon:Ee}]},technician:{title:"Technician",icon:hn,color:"bg-pending text-pending-foreground",navigation:[{title:"Dashboard",href:"/technician",icon:Ss},{title:"My Tasks",href:"/technician/tasks",icon:be}]}},x=f(s),k=v[x];if(!k)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"Invalid User Role"}),e.jsxs("p",{className:"text-muted-foreground mt-2",children:['Role: "',s,'" (type: ',typeof s,")"]}),e.jsxs("p",{className:"text-muted-foreground",children:["Available roles: ",Object.keys(v).join(", ")]}),e.jsx("button",{onClick:()=>window.location.href="/login",className:"mt-4 px-4 py-2 bg-primary text-primary-foreground rounded",children:"Return to Login"})]})});const M=k.icon,N=async()=>{try{await d(),o("/login")}catch{o("/login")}};return e.jsxs("div",{className:"flex h-screen bg-background",children:[p&&e.jsx("div",{className:"mobile-sidebar-overlay",onClick:()=>m(!1)}),e.jsxs("div",{className:_("mobile-sidebar lg:static lg:w-64 lg:transform-none flex flex-col",p?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[e.jsxs("div",{className:"flex items-center justify-between mobile-padding border-b border-sidebar-border",children:[e.jsx("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fdf520b57241b409c97fe8b1702f73e79%2Fce826268d92b499a98eeb82a92fb89e5?format=webp&width=800",alt:"Cosmic Solutions",className:"h-8 sm:h-10 w-auto max-w-full"}),e.jsx(R,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>m(!1),children:e.jsx(ut,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"mobile-padding border-b border-sidebar-border",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Rd,{currentImage:u,userName:a,onImageUpload:j,size:"md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"mobile-text-sm font-medium text-sidebar-foreground truncate",children:a}),e.jsxs(J,{variant:"outline",className:`${k.color} border-0 mobile-text-sm`,children:[e.jsx(M,{className:"h-3 w-3 mr-1"}),k.title]})]})]})}),e.jsx("nav",{className:"flex-1 mobile-padding mobile-space-y",children:k.navigation.map(T=>{const O=T.icon,I=l.pathname===T.href;return e.jsxs(R,{variant:I?"secondary":"ghost",className:_("w-full justify-start mobile-text-sm text-sidebar-foreground hover:text-sidebar-accent-foreground hover:bg-sidebar-accent",I&&"bg-sidebar-accent text-sidebar-accent-foreground"),onClick:()=>{o(T.href),m(!1)},children:[e.jsx(O,{className:"h-4 w-4 mr-3"}),T.title]},T.href)})}),e.jsx("div",{className:"mobile-padding border-t border-sidebar-border",children:e.jsxs(R,{variant:"ghost",className:"w-full justify-start mobile-text-sm text-sidebar-foreground hover:text-sidebar-accent-foreground hover:bg-sidebar-accent",onClick:N,children:[e.jsx(hd,{className:"h-4 w-4 mr-3"}),"Sign Out"]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"mobile-header",children:[e.jsxs("div",{className:"flex items-center mobile-space-x",children:[e.jsx(R,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>m(!0),children:e.jsx(pd,{className:"h-5 w-5"})}),e.jsx("h1",{className:"mobile-header-title",children:k.navigation.find(T=>T.href===l.pathname)?.title||"Dashboard"})]}),e.jsxs("div",{className:"flex items-center mobile-space-x",children:[e.jsx(Vu,{className:"text-muted-foreground"}),e.jsxs(Cn,{children:[e.jsx(Pn,{asChild:!0,children:e.jsx(R,{variant:"ghost",className:"relative mobile-avatar rounded-full",children:e.jsxs(as,{className:"mobile-avatar",children:[e.jsx(rs,{src:u}),e.jsx(ns,{children:a.split(" ").map(T=>T[0]).join("")})]})})}),e.jsxs(sa,{className:"w-56",align:"end",forceMount:!0,children:[e.jsx(aa,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"mobile-text-sm font-medium leading-none",children:a}),e.jsx("p",{className:"mobile-text-sm leading-none text-muted-foreground",children:r})]})}),e.jsx(is,{}),e.jsx(Us,{onClick:()=>o(`/${x}/settings`),children:"Settings"}),e.jsx(Us,{onClick:N,children:"Sign out"})]})]})]})]}),e.jsxs("main",{className:"mobile-content",children:[e.jsx("div",{className:"lg:hidden h-0 w-0",onClick:()=>m(!1)}),t]})]})]})},da=({stats:t,className:s})=>e.jsx("div",{className:_("grid gap-4 md:grid-cols-2 lg:grid-cols-4",s),children:t.map((a,r)=>{const n=a.icon;return e.jsxs(Z,{className:"relative overflow-hidden",children:[e.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:a.title}),e.jsx(n,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(ee,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:a.value}),a.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:a.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[a.trend&&e.jsxs("div",{className:_("flex items-center text-xs",a.trend.positive?"text-success":"text-destructive"),children:[e.jsx("span",{className:_("mr-1",a.trend.positive?"text-success":"text-destructive"),children:a.trend.positive?"↗":"↘"}),a.trend.value,"% ",a.trend.label]}),a.badge&&e.jsx(J,{variant:a.badge.variant||"outline",className:_("text-xs",a.badge.className),children:a.badge.text})]})]})})]},r)})}),Me=c.forwardRef(({className:t,...s},a)=>e.jsx("textarea",{className:_("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...s}));Me.displayName="Textarea";const Ue=c.forwardRef(({className:t,...s},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:_("w-full caption-bottom text-sm",t),...s})}));Ue.displayName="Table";const ze=c.forwardRef(({className:t,...s},a)=>e.jsx("thead",{ref:a,className:_("[&_tr]:border-b",t),...s}));ze.displayName="TableHeader";const Be=c.forwardRef(({className:t,...s},a)=>e.jsx("tbody",{ref:a,className:_("[&_tr:last-child]:border-0",t),...s}));Be.displayName="TableBody";const Wu=c.forwardRef(({className:t,...s},a)=>e.jsx("tfoot",{ref:a,className:_("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));Wu.displayName="TableFooter";const je=c.forwardRef(({className:t,...s},a)=>e.jsx("tr",{ref:a,className:_("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));je.displayName="TableRow";const $=c.forwardRef(({className:t,...s},a)=>e.jsx("th",{ref:a,className:_("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));$.displayName="TableHead";const U=c.forwardRef(({className:t,...s},a)=>e.jsx("td",{ref:a,className:_("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s}));U.displayName="TableCell";const qu=c.forwardRef(({className:t,...s},a)=>e.jsx("caption",{ref:a,className:_("mt-4 text-sm text-muted-foreground",t),...s}));qu.displayName="TableCaption";const Hu=()=>{const[t,s]=c.useState({managersCount:0,projectsCount:0,completedTasks:0,pendingTasks:0}),[a,r]=c.useState([]),[n,i]=c.useState([]),[o,l]=c.useState(""),[d,p]=c.useState(!1),[m,u]=c.useState(null),[h,j]=c.useState({clientName:"",siteName:"",location:"",mapLink:"",priority:"",deadline:"",description:"",notes:"",assignedManager:"",files:[]}),[f,v]=c.useState({name:"",email:"",password:"",role:""}),[x,k]=c.useState(null),[M,N]=c.useState(!1),[T,O]=c.useState(null),I=y=>{k(y),N(!0)},{socket:P}=xt(),B=async()=>{const S={Authorization:`Bearer ${localStorage.getItem("token")}`},W=await(await fetch("https://cosmicproject-backend-1.onrender.com/api/profile",{headers:S})).json();W.status==="success"&&O(W.data)},q=async y=>{const S=localStorage.getItem("token"),g=new FormData;g.append("profilePicture",y),await fetch("https://cosmicproject-backend-1.onrender.com/api/profile/picture",{method:"POST",headers:{Authorization:`Bearer ${S}`},body:g}),await B()};c.useEffect(()=>{B();const S={Authorization:`Bearer ${localStorage.getItem("token")}`};fetch("https://cosmicproject-backend-1.onrender.com/api/superadmin/stats",{headers:S}).then(g=>g.json()).then(g=>{g.status==="success"&&s(g.data)}).catch(console.error),fetch("https://cosmicproject-backend-1.onrender.com/api/superadmin/projects",{headers:S}).then(g=>g.json()).then(g=>{g.status==="success"&&r(Array.isArray(g.data.projects)?g.data.projects:[])}).catch(console.error),fetch("https://cosmicproject-backend-1.onrender.com/api/superadmin/managers",{headers:S}).then(g=>g.json()).then(g=>{g.status==="success"&&i(g.data)}).catch(console.error),fetch("https://cosmicproject-backend-1.onrender.com/api/reports/overview",{headers:S}).then(g=>g.json()).then(g=>{g.status==="success"&&u(g.data)}).catch(console.error)},[]),c.useEffect(()=>{if(P)return P.on("project_created",y=>{V.success(`New project "${y.project.siteName}" created and assigned.`)}),P.on("task_assigned",y=>{V.success(`Task "${y.task.title}" assigned to technician.`)}),P.on("task_status_updated",y=>{V(`Task "${y.task.title}" status updated to "${y.task.status}".`),y.project&&r(g=>{const W=g.findIndex(oe=>oe._id===y.project._id||oe.id===y.project._id);if(W!==-1){const oe=[...g];return oe[W]={...oe[W],...y.project},oe}return g});const S=localStorage.getItem("token");fetch("https://cosmicproject-backend-1.onrender.com/api/superadmin/projects",{headers:{Authorization:`Bearer ${S}`}}).then(g=>g.json()).then(g=>{g.status==="success"&&r(Array.isArray(g.data.projects)?g.data.projects:[])}).catch(console.error),fetch("https://cosmicproject-backend-1.onrender.com/api/superadmin/stats",{headers:{Authorization:`Bearer ${S}`}}).then(g=>g.json()).then(g=>{g.status==="success"&&s(g.data)}).catch(console.error)}),P.on("report_submitted",y=>{V.success(`Report submitted for task "${y.report.task}".`)}),P.on("project_status_updated",y=>{r(S=>S.map(g=>g._id===y.projectId?{...g,status:y.status}:g)),V.success(`Project status updated to ${y.status}`)}),()=>{P.off("project_created"),P.off("task_assigned"),P.off("task_status_updated"),P.off("report_submitted"),P.off("project_status_updated")}},[P]);const H=a.filter(y=>y.siteName?.toLowerCase().includes(o.toLowerCase())),A=async()=>{if(!h.clientName||!h.siteName||!h.location||!h.assignedManager){alert("Please fill in all required fields.");return}const y=localStorage.getItem("token");let S,g;if(h.files&&h.files.length>0){const W=new FormData;Object.entries(h).forEach(([oe,ye])=>{oe==="files"?ye.forEach(b=>W.append("files",b)):W.append(oe,ye)}),S=await fetch("https://cosmicproject-backend-1.onrender.com/api/superadmin/projects",{method:"POST",headers:{Authorization:`Bearer ${y}`},body:W})}else S=await fetch("https://cosmicproject-backend-1.onrender.com/api/superadmin/projects",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify(h)});g=await S.json(),S.ok&&g.status==="success"?(r([...a,g.data]),j({clientName:"",siteName:"",location:"",mapLink:"",priority:"",deadline:"",description:"",notes:"",assignedManager:"",files:[]}),p(!1),alert("✅ Project created successfully!")):alert(`Failed to create project: ${g.message||"Unknown error"}`)},w=y=>{const S=Array.from(y.target.files||[]);j({...h,files:[...h.files,...S]})},C=y=>{j({...h,files:h.files.filter((S,g)=>g!==y)})},Q=[{title:"Active Managers",value:t.managersCount,description:"Currently managing projects",icon:Ge,badge:t.managersCount>0?{text:"Online",variant:"outline",className:"bg-success text-success-foreground"}:void 0},{title:"Total Projects",value:t.projectsCount,description:"Across all locations",icon:be},{title:"Completed Tasks",value:t.completedTasks,description:"Successfully finished",icon:Le},{title:"Pending Tasks",value:t.pendingTasks,description:"In progress or assigned",icon:ts}],[le,Y]=c.useState(!1),[ve,te]=c.useState(!1),[re,pe]=c.useState(null),E=async()=>{if(!re)return;const y=localStorage.getItem("token"),S=a.flatMap(g=>g.tasks||[]).find(g=>(g._id||g.id)===re);if(S)try{const g=await fetch("https://cosmicproject-backend-1.onrender.com/api/reports/task-pdf",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify({tasks:[S._id]})});if(!g.ok)throw new Error("Failed to generate PDF");const W=await g.blob(),oe=window.URL.createObjectURL(W),ye=document.createElement("a");ye.href=oe,ye.setAttribute("download",`${S.title.replace(/\s+/g,"_")}_report.pdf`),document.body.appendChild(ye),ye.click(),ye.remove(),window.URL.revokeObjectURL(oe)}catch(g){alert("Failed to download task report: "+g.message)}};return e.jsx(Ie,{userRole:"superadmin",userName:T?.name||"System Administrator",userEmail:T?.email||"admin@cosmicsolutions.com",userProfilePicture:T?.profilePicture?`https://cosmicproject-backend-1.onrender.com/${T.profilePicture}`:void 0,onProfilePictureUpload:q,children:e.jsxs("div",{className:"mobile-container mobile-space-y max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mobile-text-2xl font-bold text-foreground",children:"System Overview"}),e.jsx("p",{className:"text-muted-foreground mt-1 mobile-text-base",children:"Manage your entire organization from this central dashboard."})]}),e.jsx("div",{className:"mobile-button-group",children:e.jsxs(R,{onClick:()=>p(!0),className:"mobile-button",children:[e.jsx(ct,{className:"mr-2 h-4 w-4"}),"New Project"]})})]}),e.jsx("div",{className:"mobile-button-group",children:e.jsxs(R,{variant:"outline",onClick:()=>te(!0),className:"mobile-button",children:[e.jsx(Ee,{className:"mr-2 h-4 w-4"})," Task Report"]})}),e.jsx(da,{stats:Q}),e.jsxs("div",{className:"mobile-grid-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(Z,{children:[e.jsx(se,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{className:"mobile-text-lg",children:"Project Management"}),e.jsx(Ae,{className:"mobile-text-sm",children:"All projects across the organization"})]}),e.jsxs("div",{className:"mobile-action-buttons",children:[e.jsxs("div",{className:"mobile-search",children:[e.jsx(ft,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(X,{placeholder:"Search projects...",value:o,onChange:y=>l(y.target.value),className:"mobile-search-input"})]}),e.jsx(R,{variant:"outline",size:"sm",children:e.jsx(Js,{className:"h-4 w-4"})})]})]})}),e.jsx(ee,{children:H.length===0?e.jsxs("div",{className:"mobile-empty-state",children:[e.jsx(be,{className:"mobile-empty-state-icon text-muted-foreground"}),e.jsx("h3",{className:"mobile-empty-state-title",children:"No projects yet"}),e.jsx("p",{className:"mobile-empty-state-description",children:"Create your first project to get started."}),e.jsxs(R,{onClick:()=>p(!0),className:"mt-4 mobile-button",children:[e.jsx(ct,{className:"mr-2 h-4 w-4"}),"Create Project"]})]}):e.jsx("div",{className:"responsive-table",children:e.jsxs(Ue,{className:"min-w-[700px]",children:[e.jsx(ze,{children:e.jsxs(je,{children:[e.jsx($,{children:"Project"}),e.jsx($,{children:"Client"}),e.jsx($,{children:"Location"}),e.jsx($,{children:"Priority"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Actions"})]})}),e.jsx(Be,{children:H.map(y=>e.jsxs(je,{children:[e.jsx(U,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:y.siteName}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Created"," ",new Date(y.createdAt).toLocaleDateString()]})]})}),e.jsx(U,{children:y.clientName}),e.jsx(U,{className:"max-w-32 truncate",children:y.location}),e.jsx(U,{children:e.jsx(J,{variant:"outline",className:y.priority==="urgent"?"bg-destructive text-destructive-foreground":y.priority==="high"?"bg-orange-500 text-white":y.priority==="medium"?"bg-pending text-pending-foreground":"bg-muted text-muted-foreground",children:y.priority?.toUpperCase()})}),e.jsx(U,{children:e.jsx(J,{variant:"outline",className:"bg-blue-500 text-white",children:y.status})}),e.jsx(U,{children:e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>I(y),children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),"View"]})})]},y._id))})]})})})]})}),e.jsx("div",{className:"lg:col-span-2 mt-6",children:e.jsxs(Z,{children:[e.jsx(se,{children:e.jsx(ae,{children:"All Tasks"})}),e.jsx(ee,{children:a.length===0?e.jsx("div",{children:"No tasks available yet."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ue,{className:"min-w-[700px]",children:[e.jsx(ze,{children:e.jsxs(je,{children:[e.jsx($,{children:"Title"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Technician"}),e.jsx($,{children:"Project"}),e.jsx($,{children:"Deadline"}),e.jsx($,{children:"Status Timeline"})]})}),e.jsx(Be,{children:a.flatMap(y=>(y.tasks||[]).map(S=>e.jsxs(je,{children:[e.jsx(U,{children:S.title}),e.jsx(U,{children:S.status}),e.jsx(U,{children:S.assignedTo?.name||"N/A"}),e.jsx(U,{children:y.siteName||"N/A"}),e.jsx(U,{children:S.deadline?new Date(S.deadline).toLocaleDateString():"No deadline"}),e.jsx(U,{children:S.statusLog&&S.statusLog.length>0?e.jsx("ul",{className:"text-xs space-y-1",children:S.statusLog.map((g,W)=>e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:g.status}),g.timestamp&&e.jsxs("span",{children:[" (",new Date(g.timestamp).toLocaleString(),")"]}),g.comment&&e.jsxs("span",{children:[": ",g.comment]})]},W))}):e.jsx("span",{children:"No history"})})]},S._id||S.id)))})]})})})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs(Z,{children:[e.jsx(se,{children:e.jsxs(ae,{className:"flex items-center space-x-2",children:[e.jsx(mn,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Quick Actions"})]})}),e.jsx(ee,{children:e.jsx("div",{className:"grid gap-3",children:e.jsxs(R,{variant:"outline",className:"justify-start h-12 w-full",onClick:()=>p(!0),children:[e.jsx(ct,{className:"mr-2 h-4 w-4"}),"Create New Project"]})})})]})})]}),e.jsx(xe,{open:d,onOpenChange:p,children:e.jsxs(de,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsx(me,{children:"Create New Project"}),e.jsx(he,{children:"Add a comprehensive project with all necessary details."})]}),e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"client-name",children:"Client Name *"}),e.jsx(X,{id:"client-name",placeholder:"Enter client company name",value:h.clientName,onChange:y=>j({...h,clientName:y.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"site-name",children:"Site Name *"}),e.jsx(X,{id:"site-name",placeholder:"Enter project/site name",value:h.siteName,onChange:y=>j({...h,siteName:y.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"location",children:"Location (Address) *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(X,{id:"location",placeholder:"Enter complete address",value:h.location,onChange:y=>j({...h,location:y.target.value}),className:"flex-1"}),e.jsx(R,{type:"button",variant:"outline",disabled:!h.location,children:e.jsx(yt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"map-link",children:"Map Link (Optional)"}),e.jsx(X,{id:"map-link",placeholder:"Paste Google Maps link or coordinates",value:h.mapLink,onChange:y=>j({...h,mapLink:y.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"assigned-manager",children:"Assign Manager *"}),e.jsxs(Pe,{value:h.assignedManager,onValueChange:y=>j({...h,assignedManager:y}),children:[e.jsx(Ne,{children:e.jsx(Te,{placeholder:"Select manager to assign this project"})}),e.jsx(we,{children:n.map(y=>e.jsxs(z,{value:y._id||y.id,children:[y.name," - ",y.department||""]},y._id||y.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"priority",children:"Priority"}),e.jsxs(Pe,{value:h.priority,onValueChange:y=>j({...h,priority:y}),children:[e.jsx(Ne,{children:e.jsx(Te,{placeholder:"Select priority level"})}),e.jsxs(we,{children:[e.jsx(z,{value:"low",children:"Low"}),e.jsx(z,{value:"medium",children:"Medium"}),e.jsx(z,{value:"high",children:"High"}),e.jsx(z,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"deadline",children:"Deadline"}),e.jsx(X,{id:"deadline",type:"date",value:h.deadline,onChange:y=>j({...h,deadline:y.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"description",children:"Task Description"}),e.jsx(Me,{id:"description",placeholder:"Detailed description of the project requirements and scope",value:h.description,onChange:y=>j({...h,description:y.target.value}),rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"notes",children:"Notes"}),e.jsx(Me,{id:"notes",placeholder:"Additional notes, special instructions, or requirements",value:h.notes,onChange:y=>j({...h,notes:y.target.value}),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Project Files"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{type:"button",variant:"outline",onClick:()=>document.getElementById("project-files")?.click(),className:"w-full",children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),"Upload Files (Plans, Specifications, etc.)"]}),e.jsx("input",{id:"project-files",type:"file",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.dwg",onChange:w,className:"hidden"}),h.files.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm",children:"Uploaded Files:"}),h.files.map((y,S)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded-md",children:[e.jsx("span",{className:"text-sm truncate",children:y.name}),e.jsx(R,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(S),children:"×"})]},S))]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end",children:[e.jsx(R,{variant:"outline",onClick:()=>p(!1),className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(R,{onClick:A,className:"w-full sm:w-auto",children:"Create Project"})]})]})}),e.jsx(xe,{open:M,onOpenChange:N,children:e.jsxs(de,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsx(me,{children:"Project Details"}),e.jsx(he,{children:"Detailed information about the selected project."})]}),x&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Site Name:"})," ",x.siteName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Client Name:"})," ",x.clientName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Location:"})," ",x.location]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Manager:"})," ",x.assignedManagerName||"Unassigned"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Priority:"})," ",x.priority]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Status:"})," ",x.status]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Deadline:"})," ",x.deadline?new Date(x.deadline).toLocaleDateString():"No deadline"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Description:"})," ",x.description]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Notes:"})," ",x.notes]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Created At:"})," ",x.createdAt?new Date(x.createdAt).toLocaleDateString():""]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",x.updatedAt?new Date(x.updatedAt).toLocaleDateString():""]})]})]})}),m&&e.jsxs("div",{className:"mt-8 p-4 bg-muted rounded-md",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Project Report Overview"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Total Projects:"})," ",m.totalProjects]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Completion Rate:"})," ",(m.completionRate*100).toFixed(2),"%"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Average Duration:"})," ",m.averageDuration," ","days"]})]})})]}),e.jsx(xe,{open:ve,onOpenChange:te,children:e.jsxs(de,{className:"mobile-dialog-content max-w-[95vw] sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsx(me,{className:"mobile-text-lg",children:"Task Report"}),e.jsx(he,{className:"mobile-text-sm",children:"View all tasks updated by technicians, including attachments and descriptions. You can also download this report as a PDF."})]}),e.jsx("div",{className:"mobile-space-y",children:a.length===0?e.jsxs("div",{className:"mobile-empty-state",children:[e.jsx("div",{className:"mobile-empty-state-icon",children:"📋"}),e.jsx("h3",{className:"mobile-empty-state-title",children:"No tasks available"}),e.jsx("p",{className:"mobile-empty-state-description",children:"There are no tasks to display in the report."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"hidden sm:block",children:e.jsx("div",{className:"responsive-table",children:e.jsxs("table",{className:"w-full border-collapse bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 text-center border-b border-gray-200 py-3 mobile-text-sm font-medium",children:"Select"}),e.jsx("th",{className:"border-b border-gray-200 py-3 mobile-text-sm font-medium text-left",children:"Title"}),e.jsx("th",{className:"border-b border-gray-200 py-3 mobile-text-sm font-medium text-left",children:"Status"}),e.jsx("th",{className:"border-b border-gray-200 py-3 mobile-text-sm font-medium text-left",children:"Attachments"}),e.jsx("th",{className:"border-b border-gray-200 py-3 mobile-text-sm font-medium text-left",children:"Description"})]})}),e.jsx("tbody",{children:a.flatMap(y=>(y.tasks||[]).map(S=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"text-center border-b border-gray-200 py-3",children:e.jsx("input",{type:"radio",name:"selectedTaskReport",checked:re===(S._id||S.id),onChange:()=>pe(S._id||S.id),className:"w-4 h-4"})}),e.jsx("td",{className:"border-b border-gray-200 py-3 mobile-text-sm",children:S.title}),e.jsx("td",{className:"border-b border-gray-200 py-3 mobile-text-sm",children:e.jsx(J,{variant:"outline",className:"capitalize",children:S.status})}),e.jsx("td",{className:"border-b border-gray-200 py-3 mobile-text-sm",children:S.files&&S.files.length>0?e.jsx("ul",{className:"space-y-1",children:S.files.map((g,W)=>e.jsx("li",{children:e.jsx("a",{href:g.url||`https://cosmicproject-backend-1.onrender.com/${g.path}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline text-xs",children:g.originalName||g.name||g.filename||"Attachment"})},W))}):e.jsx("span",{className:"text-gray-500 text-xs",children:"No attachments"})}),e.jsx("td",{className:"border-b border-gray-200 py-3 mobile-text-sm text-gray-600",children:S.description||"-"})]},S._id||S.id)))})]})})}),e.jsx("div",{className:"sm:hidden space-y-4",children:a.flatMap(y=>(y.tasks||[]).map(S=>e.jsx("div",{className:`mobile-card p-4 border-2 transition-colors ${re===(S._id||S.id)?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>pe(S._id||S.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"radio",name:"selectedTaskReport",checked:re===(S._id||S.id),onChange:()=>pe(S._id||S.id),className:"w-4 h-4 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"mobile-text-base font-medium text-gray-900 truncate",children:S.title}),e.jsx(J,{variant:"outline",className:"capitalize mobile-text-xs",children:S.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"mobile-text-xs font-medium text-gray-500",children:"Description:"}),e.jsx("p",{className:"mobile-text-sm text-gray-700 mt-1",children:S.description||"No description available"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"mobile-text-xs font-medium text-gray-500",children:"Attachments:"}),S.files&&S.files.length>0?e.jsx("div",{className:"mt-1 space-y-1",children:S.files.map((g,W)=>e.jsx("div",{children:e.jsx("a",{href:g.url||`https://cosmicproject-backend-1.onrender.com/${g.path}`,target:"_blank",rel:"noopener noreferrer",className:"mobile-text-xs text-blue-600 hover:text-blue-800 underline break-all",children:g.originalName||g.name||g.filename||"Attachment"})},W))}):e.jsx("p",{className:"mobile-text-xs text-gray-500 mt-1",children:"No attachments"})]})]})]})]})},S._id||S.id)))})]})}),e.jsxs("div",{className:"mobile-button-group mt-6",children:[e.jsx(R,{variant:"outline",onClick:()=>te(!1),className:"mobile-button",children:"Close"}),e.jsxs(R,{onClick:E,disabled:!re,className:"mobile-button",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]})]})})]})})};var bs="Tabs",[Gu,Sm]=_t(bs,[gr]),Vn=gr(),[Qu,ua]=Gu(bs),Wn=c.forwardRef((t,s)=>{const{__scopeTabs:a,value:r,onValueChange:n,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:d="automatic",...p}=t,m=fr(l),[u,h]=Ei({prop:r,onChange:n,defaultProp:i??"",caller:bs});return e.jsx(Qu,{scope:a,baseId:Mi(),value:u,onValueChange:h,orientation:o,dir:m,activationMode:d,children:e.jsx(ke.div,{dir:m,"data-orientation":o,...p,ref:s})})});Wn.displayName=bs;var qn="TabsList",Hn=c.forwardRef((t,s)=>{const{__scopeTabs:a,loop:r=!0,...n}=t,i=ua(qn,a),o=Vn(a);return e.jsx(Ri,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:e.jsx(ke.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:s})})});Hn.displayName=qn;var Gn="TabsTrigger",Qn=c.forwardRef((t,s)=>{const{__scopeTabs:a,value:r,disabled:n=!1,...i}=t,o=ua(Gn,a),l=Vn(a),d=Xn(o.baseId,r),p=Jn(o.baseId,r),m=r===o.value;return e.jsx(Di,{asChild:!0,...l,focusable:!n,active:m,children:e.jsx(ke.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":p,"data-state":m?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:d,...i,ref:s,onMouseDown:Ce(t.onMouseDown,u=>{!n&&u.button===0&&u.ctrlKey===!1?o.onValueChange(r):u.preventDefault()}),onKeyDown:Ce(t.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&o.onValueChange(r)}),onFocus:Ce(t.onFocus,()=>{const u=o.activationMode!=="manual";!m&&!n&&u&&o.onValueChange(r)})})})});Qn.displayName=Gn;var Yn="TabsContent",Kn=c.forwardRef((t,s)=>{const{__scopeTabs:a,value:r,forceMount:n,children:i,...o}=t,l=ua(Yn,a),d=Xn(l.baseId,r),p=Jn(l.baseId,r),m=r===l.value,u=c.useRef(m);return c.useEffect(()=>{const h=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(kt,{present:n||m,children:({present:h})=>e.jsx(ke.div,{"data-state":m?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!h,id:p,tabIndex:0,...o,ref:s,style:{...t.style,animationDuration:u.current?"0s":void 0},children:h&&i})})});Kn.displayName=Yn;function Xn(t,s){return`${t}-trigger-${s}`}function Jn(t,s){return`${t}-content-${s}`}var Yu=Wn,Zn=Hn,ei=Qn,ti=Kn;const Ku=Yu,si=c.forwardRef(({className:t,...s},a)=>e.jsx(Zn,{ref:a,className:_("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));si.displayName=Zn.displayName;const zs=c.forwardRef(({className:t,...s},a)=>e.jsx(ei,{ref:a,className:_("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));zs.displayName=ei.displayName;const Bs=c.forwardRef(({className:t,...s},a)=>e.jsx(ti,{ref:a,className:_("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Bs.displayName=ti.displayName;const Xu=()=>{const[t,s]=c.useState([]),[a,r]=c.useState([]),[n,i]=c.useState(!1),[o,l]=c.useState(""),[d,p]=c.useState({name:"",email:"",phone:"",department:"",role:"",password:""}),[m,u]=c.useState(!1),[h,j]=c.useState(null),[f,v]=c.useState(!1);c.useEffect(()=>{x()},[]);const x=async()=>{const N=localStorage.getItem("token");if(N){u(!0);try{const T=await fetch("https://cosmicproject-backend-1.onrender.com/api/superadmin/managers",{headers:{Authorization:`Bearer ${N}`}});if(T.ok){const I=await T.json();I.status==="success"&&Array.isArray(I.data)?s(I.data):s([])}else s([]);const O=await fetch("https://cosmicproject-backend-1.onrender.com/api/superadmin/technicians",{headers:{Authorization:`Bearer ${N}`}});if(O.ok){const I=await O.json();I.status==="success"&&Array.isArray(I.data)?r(I.data):r([])}else r([])}catch{s([]),r([])}finally{u(!1)}}},k=async()=>{if(!d.name||!d.email||!d.role||!d.password){alert("Please fill in all required fields");return}const N=localStorage.getItem("token");if(N){u(!0);try{const T=await fetch("https://cosmicproject-backend-1.onrender.com/api/users",{method:"POST",headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"},body:JSON.stringify(d)}),O=await T.json();T.ok&&O.status==="success"?(i(!1),p({name:"",email:"",phone:"",department:"",role:"",password:""}),x(),j({email:d.email,role:d.role,password:d.password}),v(!0)):alert(`Failed to add user: ${O.message||"Unknown error"}`)}catch{alert("Failed to add user. Please try again.")}finally{u(!1)}}},M=async(N,T)=>{if(!window.confirm("Are you sure you want to delete this user?"))return;const O=localStorage.getItem("token");if(O){u(!0);try{const I=await fetch(`https://cosmicproject-backend-1.onrender.com/api/users/${N}`,{method:"DELETE",headers:{Authorization:`Bearer ${O}`}}),P=await I.json();I.ok&&P.status==="success"?(x(),alert("User deleted successfully!")):alert(`Failed to delete user: ${P.message||"Unknown error"}`)}catch{alert("Failed to delete user. Please try again.")}finally{u(!1)}}};return e.jsxs(Ie,{userRole:"super-admin",userName:"System Administrator",userEmail:"admin@cosmicsolutions.com",children:[e.jsxs("div",{className:"p-4 lg:p-6 space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-foreground",children:"System Settings"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage users and system configurations."})]}),e.jsxs(Ku,{defaultValue:"users",className:"space-y-6",children:[e.jsxs(si,{className:"grid w-full grid-cols-2",children:[e.jsx(zs,{value:"users",children:"Users"}),e.jsx(zs,{value:"permissions",children:"Permissions"})]}),e.jsxs(Bs,{value:"users",className:"space-y-6",children:[e.jsxs(Z,{children:[e.jsx(se,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-5 w-5"}),"Managers"]}),e.jsx(Ae,{children:"Manage project managers and their access"})]}),e.jsxs(R,{onClick:()=>{l("manager"),p({...d,role:"manager"}),i(!0)},children:[e.jsx(ct,{className:"mr-2 h-4 w-4"}),"Add Manager"]})]})}),e.jsx(ee,{children:t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ge,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No managers yet"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Add your first manager to get started."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ue,{children:[e.jsx(ze,{children:e.jsxs(je,{children:[e.jsx($,{children:"Name"}),e.jsx($,{children:"Email"}),e.jsx($,{children:"Department"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Actions"})]})}),e.jsx(Be,{children:t.map(N=>e.jsxs(je,{children:[e.jsx(U,{className:"font-medium",children:N.name}),e.jsx(U,{children:N.email}),e.jsx(U,{children:N.department||"N/A"}),e.jsx(U,{children:e.jsx(J,{variant:"outline",className:"bg-success text-success-foreground",children:N.status})}),e.jsx(U,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",children:e.jsx($a,{className:"h-3 w-3"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>M(N._id),children:e.jsx(Nt,{className:"h-3 w-3"})})]})})]},N._id))})]})})})]}),e.jsxs(Z,{children:[e.jsx(se,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5"}),"Technicians"]}),e.jsx(Ae,{children:"Manage field technicians and their access"})]}),e.jsxs(R,{onClick:()=>{l("technician"),p({...d,role:"technician"}),i(!0)},children:[e.jsx(ct,{className:"mr-2 h-4 w-4"}),"Add Technician"]})]})}),e.jsx(ee,{children:a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(dt,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No technicians yet"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Add your first technician to get started."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ue,{children:[e.jsx(ze,{children:e.jsxs(je,{children:[e.jsx($,{children:"Name"}),e.jsx($,{children:"Email"}),e.jsx($,{children:"Department"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Actions"})]})}),e.jsx(Be,{children:a.map(N=>e.jsxs(je,{children:[e.jsx(U,{className:"font-medium",children:N.name}),e.jsx(U,{children:N.email}),e.jsx(U,{children:N.department||"N/A"}),e.jsx(U,{children:e.jsx(J,{variant:"outline",className:"bg-success text-success-foreground",children:N.status})}),e.jsx(U,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",children:e.jsx($a,{className:"h-3 w-3"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>M(N._id),children:e.jsx(Nt,{className:"h-3 w-3"})})]})})]},N._id))})]})})})]})]}),e.jsx(Bs,{value:"permissions",className:"space-y-6",children:e.jsxs(Z,{children:[e.jsxs(se,{children:[e.jsx(ae,{children:"Role Permissions"}),e.jsx(Ae,{children:"Configure access controls for different user roles"})]}),e.jsx(ee,{children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2 mb-3",children:[e.jsx(Zs,{className:"h-4 w-4"}),"Super Admin Permissions"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:"• Full system access and control"}),e.jsx("li",{children:"• Create, edit, and delete projects"}),e.jsx("li",{children:"• Manage all users (Managers & Technicians)"}),e.jsx("li",{children:"• Configure system settings"}),e.jsx("li",{children:"• Generate comprehensive reports"}),e.jsx("li",{children:"• Role and permission management"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2 mb-3",children:[e.jsx(Ge,{className:"h-4 w-4"}),"Manager Permissions"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:"• View assigned projects only"}),e.jsx("li",{children:"• Create and assign tasks to technicians"}),e.jsx("li",{children:"• Monitor team performance"}),e.jsx("li",{children:"• Generate team reports"}),e.jsx("li",{children:"• Update task status and progress"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2 mb-3",children:[e.jsx(dt,{className:"h-4 w-4"}),"Technician Permissions"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:"• View assigned tasks only"}),e.jsx("li",{children:"• Update task status and progress"}),e.jsx("li",{children:"• Upload completion proof and files"}),e.jsx("li",{children:"• Submit comments and delay reports"}),e.jsx("li",{children:"• Access task history and details"})]})]})]})})})]})})]}),e.jsx(xe,{open:n,onOpenChange:i,children:e.jsxs(de,{className:"sm:max-w-[500px]",children:[e.jsxs(ue,{children:[e.jsxs(me,{children:["Add New ",o==="manager"?"Manager":"Technician"]}),e.jsxs(he,{children:["Add a new ",o," to your organization."]})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"user-name",children:"Full Name *"}),e.jsx(X,{id:"user-name",placeholder:"Enter full name",value:d.name,onChange:N=>p({...d,name:N.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"user-email",children:"Email Address *"}),e.jsx(X,{id:"user-email",type:"email",placeholder:"Enter email address",value:d.email,onChange:N=>p({...d,email:N.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"user-password",children:"Password *"}),e.jsx(X,{id:"user-password",type:"password",placeholder:"Enter password",value:d.password,onChange:N=>p({...d,password:N.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"user-department",children:"Department"}),e.jsx(X,{id:"user-department",placeholder:"Enter department",value:d.department,onChange:N=>p({...d,department:N.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"user-phone",children:"Phone"}),e.jsx(X,{id:"user-phone",placeholder:"Enter phone number",value:d.phone,onChange:N=>p({...d,phone:N.target.value})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end",children:[e.jsx(R,{variant:"outline",onClick:()=>i(!1),className:"w-full sm:w-auto",children:"Cancel"}),e.jsxs(R,{onClick:k,className:"w-full sm:w-auto",children:["Add ",o==="manager"?"Manager":"Technician"]})]})]})})]}),e.jsx(xe,{open:f,onOpenChange:v,children:e.jsxs(de,{className:"sm:max-w-[400px]",children:[e.jsxs(ue,{children:[e.jsx(me,{children:"User Credentials"}),e.jsx(he,{children:"Please copy and share these credentials with the new user. They can log in immediately."})]}),h&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",h.email]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Role:"})," ",h.role.charAt(0).toUpperCase()+h.role.slice(1)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Password:"})," ",h.password]})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx(R,{onClick:()=>v(!1),children:"Close"})})]})})]})},Ju=()=>{const[t,s]=c.useState(""),[a,r]=c.useState("all"),[n,i]=c.useState("all"),[o,l]=c.useState([]),[d,p]=c.useState([]),[m,u]=c.useState(!1),[h,j]=c.useState(!0),[f,v]=c.useState({clientName:"",siteName:"",location:"",mapLink:"",priority:"",deadline:"",description:"",notes:"",assignedManager:"",files:[]}),[x,k]=c.useState(null),[M,N]=c.useState(!1),[T,O]=c.useState(null);c.useEffect(()=>{(async()=>{const Q=localStorage.getItem("token");if(!Q)return;const le={Authorization:`Bearer ${Q}`};try{const Y=await Bt.get("https://cosmicproject-backend-1.onrender.com/api/profile",{headers:le});Y.data.status==="success"&&O(Y.data.data);const ve=await Bt.get("https://cosmicproject-backend-1.onrender.com/api/superadmin/projects",{headers:le});if(ve.data.status==="success"){const re=ve.data.data;l(Array.isArray(re.projects)?re.projects:[])}else l([]);const te=await Bt.get("https://cosmicproject-backend-1.onrender.com/api/superadmin/managers",{headers:le});if(te.data.status==="success"){const re=te.data.data.map(pe=>({id:pe._id,name:pe.name,email:pe.email,department:pe.department||"General"}));p(re)}}catch{}finally{j(!1)}})()},[]);const I=async()=>{if(!f.clientName||!f.siteName||!f.location||!f.assignedManager){alert("Please fill all required fields.");return}const C=d.find(Y=>Y.id===f.assignedManager),Q=new FormData;Q.append("clientName",f.clientName),Q.append("siteName",f.siteName),Q.append("location",f.location),Q.append("mapLink",f.mapLink),Q.append("priority",f.priority||"medium"),Q.append("deadline",f.deadline),Q.append("description",f.description),Q.append("notes",f.notes),Q.append("assignedManager",f.assignedManager),Q.append("assignedManagerName",C?.name||""),f.files.forEach(Y=>{Q.append("files",Y)});const le=localStorage.getItem("token");try{const Y=await Bt.post("https://cosmicproject-backend-1.onrender.com/api/superadmin/projects",Q,{headers:{Authorization:`Bearer ${le}`}});Y.data.status==="success"?(l([Y.data.data,...o]),v({clientName:"",siteName:"",location:"",mapLink:"",priority:"",deadline:"",description:"",notes:"",assignedManager:"",files:[]}),u(!1),alert("✅ Project created successfully!")):alert(`Failed to create project: ${Y.data.message||"Unknown error"}`)}catch(Y){alert(`Failed to create project: ${Y.response?.data?.message||Y.message}`)}},P=C=>{const Q=Array.from(C.target.files||[]);v({...f,files:[...f.files,...Q]})},B=()=>{if(f.location){const C=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(f.location)}`;window.open(C,"_blank")}},q=C=>{k(C),N(!0)},H=Array.isArray(o)?o.filter(C=>{const Q=C.siteName?.toLowerCase().includes(t.toLowerCase())||C.clientName?.toLowerCase().includes(t.toLowerCase())||C.location?.toLowerCase().includes(t.toLowerCase()),le=a==="all"||C.status?.toLowerCase().replace(" ","_")===a,Y=n==="all"||C.priority===n;return Q&&le&&Y}):[],A=C=>{switch(C){case"urgent":return"bg-destructive text-destructive-foreground";case"high":return"bg-orange-500 text-white";case"medium":return"bg-pending text-pending-foreground";case"low":return"bg-muted text-muted-foreground";default:return"bg-muted text-muted-foreground"}},w=C=>{switch(C?.toLowerCase()){case"completed":return"bg-success text-success-foreground";case"in progress":return"bg-primary text-primary-foreground";case"planning":return"bg-blue-500 text-white";case"delayed":return"bg-destructive text-destructive-foreground";case"on hold":return"bg-orange-500 text-white";default:return"bg-muted text-muted-foreground"}};return h?e.jsx(Ie,{userRole:"super-admin",userName:T?.name||"System Administrator",userEmail:T?.email||"admin@cosmicsolutions.com",userProfilePicture:T?.profilePicture?`https://cosmicproject-backend-1.onrender.com/${T.profilePicture}`:void 0,children:e.jsx("div",{className:"p-4 lg:p-6 space-y-6 max-w-7xl mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading projects..."})]})})}):e.jsxs(Ie,{userRole:"super-admin",userName:T?.name||"System Administrator",userEmail:T?.email||"admin@cosmicsolutions.com",userProfilePicture:T?.profilePicture?`https://cosmicproject-backend-1.onrender.com/${T.profilePicture}`:void 0,children:[e.jsxs("div",{className:"p-4 lg:p-6 space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Project Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor and manage all projects."})]}),e.jsxs(R,{onClick:()=>u(!0),children:[e.jsx(ct,{className:"mr-2 h-4 w-4"})," New Project"]})]}),e.jsx(xe,{open:m,onOpenChange:u,children:e.jsxs(de,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsx(me,{children:"Create New Project"}),e.jsx(he,{children:"Fill in the form to create a new project."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(L,{children:"Client Name *"}),e.jsx(X,{value:f.clientName,onChange:C=>v({...f,clientName:C.target.value})})]}),e.jsxs("div",{children:[e.jsx(L,{children:"Site Name *"}),e.jsx(X,{value:f.siteName,onChange:C=>v({...f,siteName:C.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(L,{children:"Location *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(X,{value:f.location,onChange:C=>v({...f,location:C.target.value}),className:"flex-1"}),e.jsx(R,{type:"button",variant:"outline",onClick:B,disabled:!f.location,children:e.jsx(yt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(L,{children:"Map Link (Optional)"}),e.jsx(X,{placeholder:"Paste Google Maps link or coordinates",value:f.mapLink,onChange:C=>v({...f,mapLink:C.target.value})})]}),e.jsxs("div",{children:[e.jsx(L,{children:"Assign Manager *"}),e.jsxs(Pe,{value:f.assignedManager,onValueChange:C=>v({...f,assignedManager:C}),children:[e.jsx(Ne,{children:e.jsx(Te,{placeholder:"Select manager"})}),e.jsx(we,{children:d.length===0?e.jsx(z,{value:"",disabled:!0,children:"No managers available"}):d.map(C=>e.jsxs(z,{value:C.id,children:[C.name," - ",C.department]},C.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(L,{children:"Priority"}),e.jsxs(Pe,{value:f.priority,onValueChange:C=>v({...f,priority:C}),children:[e.jsx(Ne,{children:e.jsx(Te,{placeholder:"Priority"})}),e.jsxs(we,{children:[e.jsx(z,{value:"low",children:"Low"}),e.jsx(z,{value:"medium",children:"Medium"}),e.jsx(z,{value:"high",children:"High"}),e.jsx(z,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{children:[e.jsx(L,{children:"Deadline"}),e.jsx(X,{type:"date",value:f.deadline,onChange:C=>v({...f,deadline:C.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(L,{children:"Description"}),e.jsx(Me,{rows:3,value:f.description,onChange:C=>v({...f,description:C.target.value})})]}),e.jsxs("div",{children:[e.jsx(L,{children:"Notes"}),e.jsx(Me,{rows:2,value:f.notes,onChange:C=>v({...f,notes:C.target.value})})]}),e.jsxs("div",{children:[e.jsx(L,{children:"Upload Files"}),e.jsxs(R,{type:"button",variant:"outline",onClick:()=>document.getElementById("project-files")?.click(),className:"w-full",children:[e.jsx(He,{className:"mr-2 h-4 w-4"})," Upload"]}),e.jsx("input",{id:"project-files",type:"file",multiple:!0,onChange:P,className:"hidden"}),f.files.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:f.files.map((C,Q)=>e.jsx("div",{className:"text-sm text-muted-foreground",children:C.name},Q))})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(R,{onClick:I,children:"Create"})]})]})]})}),e.jsxs(Z,{children:[e.jsxs(se,{children:[e.jsx(ae,{children:"Projects Overview"}),e.jsx(Ae,{children:"Search, filter, and manage all active projects"})]}),e.jsxs(ee,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ft,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(X,{placeholder:"Search projects, clients, or locations...",value:t,onChange:C=>s(C.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Pe,{value:a,onValueChange:r,children:[e.jsx(Ne,{className:"w-40",children:e.jsx(Te,{placeholder:"Status"})}),e.jsxs(we,{children:[e.jsx(z,{value:"all",children:"All Status"}),e.jsx(z,{value:"planning",children:"Planning"}),e.jsx(z,{value:"in_progress",children:"In Progress"}),e.jsx(z,{value:"completed",children:"Completed"}),e.jsx(z,{value:"delayed",children:"Delayed"}),e.jsx(z,{value:"on_hold",children:"On Hold"})]})]}),e.jsxs(Pe,{value:n,onValueChange:i,children:[e.jsx(Ne,{className:"w-40",children:e.jsx(Te,{placeholder:"Priority"})}),e.jsxs(we,{children:[e.jsx(z,{value:"all",children:"All Priority"}),e.jsx(z,{value:"low",children:"Low"}),e.jsx(z,{value:"medium",children:"Medium"}),e.jsx(z,{value:"high",children:"High"}),e.jsx(z,{value:"urgent",children:"Urgent"})]})]})]})]}),H.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(be,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No projects found"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"No projects match your current filters."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ue,{children:[e.jsx(ze,{children:e.jsxs(je,{children:[e.jsx($,{children:"Project"}),e.jsx($,{children:"Client"}),e.jsx($,{children:"Location"}),e.jsx($,{children:"Manager"}),e.jsx($,{children:"Priority"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Deadline"}),e.jsx($,{children:"Actions"})]})}),e.jsx(Be,{children:H.map(C=>e.jsxs(je,{children:[e.jsx(U,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:C.siteName}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Created ",C.createdAt?new Date(C.createdAt).toLocaleDateString():""]})]})}),e.jsx(U,{children:C.clientName}),e.jsx(U,{children:C.location}),e.jsx(U,{children:C.assignedManagerName||"Unassigned"}),e.jsx(U,{children:e.jsx(J,{variant:"outline",className:A(C.priority),children:C.priority?.toUpperCase()})}),e.jsx(U,{children:e.jsx(J,{variant:"outline",className:w(C.status),children:C.status||"Planning"})}),e.jsx(U,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"}),C.deadline?new Date(C.deadline).toLocaleDateString():"No deadline"]})}),e.jsx(U,{children:e.jsx("div",{className:"flex gap-2",children:e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>q(C),children:[e.jsx(tt,{className:"h-3 w-3 mr-1"})," View"]})})})]},C._id))})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 p-6",children:[e.jsx(Z,{children:e.jsx(ee,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(be,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:o.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Projects"})]})]})})}),e.jsx(Z,{children:e.jsx(ee,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-primary rounded flex items-center justify-center text-primary-foreground font-bold",children:o.filter(C=>C.status==="In Progress").length}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:o.filter(C=>C.status==="In Progress").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"In Progress"})]})]})})}),e.jsx(Z,{children:e.jsx(ee,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-success rounded flex items-center justify-center text-success-foreground font-bold",children:o.filter(C=>C.status==="Completed").length}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:o.filter(C=>C.status==="Completed").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"})]})]})})}),e.jsx(Z,{children:e.jsx(ee,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-destructive rounded flex items-center justify-center text-destructive-foreground font-bold",children:o.filter(C=>C.status==="Delayed").length}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:o.filter(C=>C.status==="Delayed").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Delayed"})]})]})})})]})]})]}),e.jsx(xe,{open:M,onOpenChange:N,children:e.jsxs(de,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsx(me,{children:"Project Details"}),e.jsx(he,{children:"Detailed information about the selected project."})]}),x&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Site Name:"})," ",x.siteName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Client Name:"})," ",x.clientName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Location:"})," ",x.location]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Manager:"})," ",x.assignedManagerName||"Unassigned"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Priority:"})," ",x.priority]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Status:"})," ",x.status]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Deadline:"})," ",x.deadline?new Date(x.deadline).toLocaleDateString():"No deadline"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Description:"})," ",x.description]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Notes:"})," ",x.notes]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Created At:"})," ",x.createdAt?new Date(x.createdAt).toLocaleDateString():""]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",x.updatedAt?new Date(x.updatedAt).toLocaleDateString():""]})]})]})})]})},Zu=()=>{const[t,s]=c.useState(null),[a,r]=c.useState(!1),[n,i]=c.useState([{title:"Reports Generated",value:"0",change:"+0%",icon:Ee,color:"text-primary"},{title:"Active Projects",value:"0",change:"+0%",icon:be,color:"text-pending"}]),[o,l]=c.useState(!1),[d,p]=c.useState([]),[m,u]=c.useState(null),[h,j]=c.useState(!1),f=async(v,x)=>{const k=localStorage.getItem("token");if(!k){alert("Please log in to generate reports.");return}r(!0);const M={type:v,format:x};try{const N=await fetch("https://cosmicproject-backend-1.onrender.com/api/reports/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`},body:JSON.stringify(M)});if(!N.ok){const O=await N.text();throw new Error(`Failed to generate report: ${N.status} ${N.statusText}`)}const T=N.headers.get("content-type");if(T&&T.includes("application/pdf")){const O=await N.blob(),I=window.URL.createObjectURL(O),P=document.createElement("a");P.href=I,P.setAttribute("download",`${v.replace(/\s+/g,"_")}_report.pdf`),document.body.appendChild(P),P.click(),P.remove(),window.URL.revokeObjectURL(I)}else{const O=await N.json();if(O.status==="error")throw new Error(O.message||"Failed to generate report")}}catch(N){alert(`Failed to generate report: ${N.message}`)}finally{r(!1)}};return c.useEffect(()=>{const v=localStorage.getItem("token");fetch("https://cosmicproject-backend-1.onrender.com/api/profile",{headers:{Authorization:`Bearer ${v}`}}).then(x=>x.json()).then(x=>{x.status==="success"&&s(x.data)}).catch(console.error),fetch("https://cosmicproject-backend-1.onrender.com/api/superadmin/stats",{headers:{Authorization:`Bearer ${v}`}}).then(x=>x.json()).then(x=>{x.status==="success"&&i([{title:"Reports Generated",value:x.data.reportsGenerated||"0",change:"+12%",icon:Ee,color:"text-primary"},{title:"Active Projects",value:x.data.inProgressProjects?.toString()||"0",change:"+3%",icon:be,color:"text-pending"}])})},[]),c.useEffect(()=>{const v=localStorage.getItem("token");v&&fetch("https://cosmicproject-backend-1.onrender.com/api/superadmin/projects",{headers:{Authorization:`Bearer ${v}`}}).then(x=>x.json()).then(x=>{if(x.status==="success"){const M=(Array.isArray(x.data.projects)?x.data.projects:[]).flatMap(N=>(N.tasks||[]).map(T=>({...T,projectName:N.siteName})));p(M)}})},[]),e.jsx(Ie,{userRole:"super-admin",userName:t?.name||"System Administrator",userEmail:t?.email||"admin@cosmicsolutions.com",userProfilePicture:t?.profilePicture?`https://cosmicproject-backend-1.onrender.com/${t.profilePicture}`:void 0,children:e.jsxs("div",{className:"p-4 lg:p-6 space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-foreground",children:"Reports & Analytics"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Generate comprehensive reports and analyze system performance."})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:n.map((v,x)=>e.jsx(Z,{children:e.jsx(ee,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:v.value}),e.jsx("p",{className:"text-sm text-muted-foreground",children:v.title})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx(v.icon,{className:`h-6 w-6 ${v.color}`}),e.jsx("span",{className:"text-xs text-success font-medium",children:v.change})]})]})})},x))}),e.jsxs(Z,{className:"max-w-2xl mx-auto",children:[e.jsxs(se,{children:[e.jsxs(ae,{className:"flex items-center gap-3",children:[e.jsx(Ee,{className:"h-6 w-6 text-primary"}),"Project Summary Report"]}),e.jsx(Ae,{children:"Comprehensive overview of all projects, their status, and progress."})]}),e.jsx(ee,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(L,{className:"text-sm font-medium",children:"Key Metrics:"}),e.jsxs("ul",{className:"mt-2 space-y-1",children:[e.jsxs("li",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(Le,{className:"h-3 w-3 text-success"}),"Total Projects"]}),e.jsxs("li",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(Le,{className:"h-3 w-3 text-success"}),"Completion Rate"]}),e.jsxs("li",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(Le,{className:"h-3 w-3 text-success"}),"Average Duration"]}),e.jsxs("li",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(Le,{className:"h-3 w-3 text-success"}),"Budget Analysis"]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(R,{variant:"outline",size:"sm",onClick:()=>f("Project Summary","pdf"),disabled:a,className:"flex-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 mr-1 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(gs,{className:"h-3 w-3 mr-1"}),"PDF"]})})})]})})]})]})})},em=()=>{const[t,s]=c.useState(""),[a,r]=c.useState(!1),[n,i]=c.useState(!1),[o,l]=c.useState(""),[d,p]=c.useState(""),[m,u]=c.useState(""),[h,j]=c.useState(""),[f,v]=c.useState(""),[x,k]=c.useState(""),[M,N]=c.useState(""),[T,O]=c.useState([]),[I,P]=c.useState([]),[B,q]=c.useState([]),[H,A]=c.useState([]),[w,C]=c.useState({assignedProjectsCount:0,techniciansCount:0,completedTasks:0,pendingTasks:0}),[Q,le]=c.useState([]),[Y,ve]=c.useState(null),{socket:te}=xt(),[re,pe]=c.useState(null),E=[{title:"Assigned Projects",value:w.assignedProjectsCount,description:"Active projects from Super Admin",icon:be},{title:"Team Members",value:w.techniciansCount,description:"Technicians under supervision",icon:Ge},{title:"Completed Tasks",value:w.completedTasks,description:"This month",icon:Le},{title:"Pending Tasks",value:w.pendingTasks,description:"Awaiting technician action",icon:bt}],y=async()=>{const D={Authorization:`Bearer ${localStorage.getItem("token")}`},ce=await(await fetch("https://cosmicproject-backend-1.onrender.com/api/profile",{headers:D})).json();ce.status==="success"&&ve(ce.data)},S=async b=>{const D=localStorage.getItem("token"),F=new FormData;F.append("profilePicture",b),await fetch("https://cosmicproject-backend-1.onrender.com/api/profile/picture",{method:"POST",headers:{Authorization:`Bearer ${D}`},body:F}),await y()};c.useEffect(()=>{const D={"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`};y(),fetch("https://cosmicproject-backend-1.onrender.com/api/manager/projects",{headers:D}).then(F=>F.json()).then(F=>{F.status==="success"&&P(F.data)}).catch(console.error),fetch("https://cosmicproject-backend-1.onrender.com/api/manager/technicians",{headers:D}).then(F=>F.json()).then(F=>{F.status==="success"&&q(F.data)}).catch(console.error),fetch("https://cosmicproject-backend-1.onrender.com/api/manager/stats",{headers:D}).then(F=>F.json()).then(F=>{F.status==="success"&&C(F.data)}).catch(console.error)},[]),c.useEffect(()=>{if(te)return te.on("project_created",b=>{V.success(`New project "${b.project.siteName}" assigned to you.`)}),te.on("task_assigned",b=>{V.success(`Task "${b.task.title}" assigned to technician.`)}),te.on("task_status_updated",b=>{V(`Task "${b.task.title}" status updated to "${b.task.status}".`),A(F=>{const ce=F.findIndex(ne=>ne._id===b.task._id||ne.id===b.task._id);if(ce!==-1){const ne=[...F];return ne[ce]={...ne[ce],...b.task},ne}return F}),b.project&&P(F=>{const ce=F.findIndex(ne=>ne._id===b.project._id||ne.id===b.project._id);if(ce!==-1){const ne=[...F];return ne[ce]={...ne[ce],...b.project},ne}return F});const D=localStorage.getItem("token");fetch("https://cosmicproject-backend-1.onrender.com/api/manager/tasks",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`}}).then(F=>F.json()).then(F=>{F.status==="success"&&A(F.data)}).catch(console.error),fetch("https://cosmicproject-backend-1.onrender.com/api/manager/stats",{headers:{Authorization:`Bearer ${D}`}}).then(F=>F.json()).then(F=>{F.status==="success"&&C(F.data)}).catch(console.error)}),te.on("report_submitted",b=>{V.success(`Report submitted for task "${b.report.task}".`)}),()=>{te.off("project_created"),te.off("task_assigned"),te.off("task_status_updated"),te.off("report_submitted")}},[te]),c.useEffect(()=>{const b=localStorage.getItem("token");b&&fetch("https://cosmicproject-backend-1.onrender.com/api/manager/tasks",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`}}).then(D=>D.json()).then(D=>{D.status==="success"&&A(D.data)}).catch(D=>{})},[]);const g=async()=>{if(I.length===0){alert("No projects available. Please wait for Super Admin to assign projects to you.");return}if(B.length===0){alert("No team members available. Please contact Super Admin to assign technicians to your team.");return}if(!o||!d||!m){alert("Please fill in all required fields (Project, Technician, Title)");return}try{const b=localStorage.getItem("token"),D=new FormData;D.append("title",m),D.append("description",h),D.append("projectId",o),D.append("technicianId",d),D.append("priority",f||"medium"),D.append("deadline",x),D.append("locationLink",M),T.forEach((ge,Pt)=>{ge.file&&!ge.isProjectFile&&D.append("files",ge.file)}),T.filter(ge=>ge.isProjectFile).map(ge=>ge.projectFilePath).forEach(ge=>{D.append("projectFiles",ge)});const ne=await(await fetch("https://cosmicproject-backend-1.onrender.com/api/manager/tasks",{method:"POST",headers:{Authorization:`Bearer ${b}`},body:D})).json();if(ne.status==="success"){const Pt=await(await fetch("https://cosmicproject-backend-1.onrender.com/api/manager/tasks",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`}})).json();Pt.status==="success"&&A(Pt.data);const Tt=I.find(ys=>ys._id===o),li=B.find(ys=>ys._id===d);alert(`✅ Task "${m}" has been successfully assigned to ${li?.name||"Unknown"} for project "${Tt?.siteName||"Unknown"}"

The technician will be notified and can now view this task in their dashboard.`),u(""),j(""),l(""),p(""),v(""),k(""),N(""),O([]),r(!1)}else alert(`❌ Failed to create task: ${ne.message}`)}catch{alert("❌ Failed to create task. Please try again.")}},W=b=>{const D=I.find(F=>F._id===b);D&&alert(`Project Details:

Name: ${D.siteName}
Client: ${D.clientName}
Location: ${D.location}
Status: ${D.status||"Active"}
Progress: ${D.progress||0}%
Deadline: ${D.deadline?new Date(D.deadline).toLocaleDateString():"No deadline"}

Description: ${D.description||"No description"}
Priority: ${D.priority||"Medium"}`)},oe=()=>{i(!0)},ye=async b=>{const D=localStorage.getItem("token");if(!D){alert("Please log in to download task report.");return}try{const F=await fetch("https://cosmicproject-backend-1.onrender.com/api/reports/task-pdf",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify({tasks:[b]})});if(!F.ok)throw new Error("Failed to generate PDF");const ce=await F.blob(),ne=window.URL.createObjectURL(ce),ge=document.createElement("a");ge.href=ne,ge.setAttribute("download",`${b.title.replace(/\s+/g,"_")}_report.pdf`),document.body.appendChild(ge),ge.click(),ge.remove(),window.URL.revokeObjectURL(ne)}catch(F){alert("Failed to download task report: "+F.message)}};return e.jsx(Ie,{userRole:"manager",userName:Y?.name||"Project Manager",userEmail:Y?.email||"manager@cosmicsolutions.com",userProfilePicture:Y?.profilePicture?`https://cosmicproject-backend-1.onrender.com/${Y.profilePicture}`:void 0,onProfilePictureUpload:S,children:e.jsxs("div",{className:"mobile-container mobile-space-y max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mobile-text-2xl font-bold text-foreground",children:"Project Management"}),e.jsx("p",{className:"text-muted-foreground mt-1 mobile-text-base",children:"Manage your assigned projects and team members."})]}),e.jsxs("div",{className:"mobile-button-group",children:[e.jsxs(R,{onClick:()=>r(!0),className:"mobile-button",children:[e.jsx(ct,{className:"mr-2 h-4 w-4"}),"Create Task"]}),e.jsxs(R,{variant:"outline",onClick:oe,className:"mobile-button",children:[e.jsx(Ee,{className:"mr-2 h-4 w-4"}),"Task Report"]})]})]}),e.jsx(da,{stats:E}),e.jsxs("div",{className:"mobile-grid-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(Z,{className:"mobile-card",children:[e.jsx(se,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{className:"mobile-text-lg",children:"Assigned Projects"}),e.jsx(Ae,{className:"mobile-text-sm",children:"Projects assigned by Super Admin"})]}),e.jsxs("div",{className:"mobile-action-buttons",children:[e.jsxs("div",{className:"mobile-search",children:[e.jsx(ft,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(X,{placeholder:"Search projects...",value:t,onChange:b=>s(b.target.value),className:"mobile-search-input"})]}),e.jsx(R,{variant:"outline",size:"sm",children:e.jsx(Js,{className:"h-4 w-4"})})]})]})}),e.jsx(ee,{children:I.length===0?e.jsxs("div",{className:"mobile-empty-state",children:[e.jsx(be,{className:"mobile-empty-state-icon text-muted-foreground"}),e.jsx("h3",{className:"mobile-empty-state-title",children:"No projects assigned yet"}),e.jsx("p",{className:"mobile-empty-state-description",children:"Projects assigned by Super Admin will appear here."})]}):e.jsx("div",{className:"mobile-space-y",children:I.map(b=>e.jsxs("div",{className:"mobile-card hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-3 mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mobile-text-base font-medium text-foreground mb-1",children:b.siteName}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mobile-text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ea,{className:"h-3 w-3"}),e.jsx("span",{children:b.clientName})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(yt,{className:"h-3 w-3"}),e.jsx("span",{children:b.location})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ye,{className:"h-3 w-3"}),e.jsxs("span",{children:["Due"," ",b.deadline?new Date(b.deadline).toLocaleDateString():"No deadline"]})]})]})]}),e.jsxs("div",{className:"mobile-action-buttons",children:[e.jsx(J,{variant:"outline",className:"bg-blue-500 text-white border-0 mobile-badge",children:b.status||"Active"}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>W(b._id),className:"mobile-button",children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs("select",{value:b.status||"Planning",onChange:async D=>{const F=D.target.value;try{const ce=localStorage.getItem("token"),ge=await(await fetch(`https://cosmicproject-backend-1.onrender.com/api/projects/${b._id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ce}`},body:JSON.stringify({status:F})})).json();ge.status==="success"?(P(Pt=>Pt.map(Tt=>Tt._id===b._id?{...Tt,status:F}:Tt)),V.success("Project status updated!")):V.error(ge.message||"Failed to update status")}catch{V.error("Failed to update status")}},className:"mobile-select border rounded px-2 py-1 mobile-text-sm",children:[e.jsx("option",{value:"Planning",children:"Planning"}),e.jsx("option",{value:"In Progress",children:"Start Working"}),e.jsx("option",{value:"Delayed",children:"Delayed"}),e.jsx("option",{value:"Completed",children:"Completed"})]})]})]}),b.files&&b.files.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Project Files:"}),e.jsx("ul",{className:"list-disc list-inside text-sm mt-1",children:b.files.map((D,F)=>e.jsx("li",{children:e.jsx("a",{href:`https://cosmicproject-backend-1.onrender.com/${D.path.replace(/\\/g,"/")}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-800",children:D.originalName||D.filename})},F))})]})]},b._id))})})]}),e.jsxs(Z,{className:"mb-6 p-2 sm:p-4 md:p-6",children:[e.jsx(se,{children:e.jsx(ae,{children:"All Tasks"})}),e.jsx(ee,{children:e.jsx("div",{className:"overflow-x-auto",children:H.length===0?e.jsx("div",{children:"No tasks assigned yet."}):e.jsxs(Ue,{className:"min-w-[700px]",children:[e.jsx(ze,{children:e.jsxs(je,{children:[e.jsx($,{children:"Title"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Technician"}),e.jsx($,{children:"Project"}),e.jsx($,{children:"Deadline"}),e.jsx($,{children:"Status Timeline"}),e.jsx($,{children:"Project Files & Map"})]})}),e.jsx(Be,{children:H.map(b=>e.jsxs(je,{children:[e.jsx(U,{children:b.title}),e.jsx(U,{children:b.status}),e.jsx(U,{children:b.assignedTo?.name||"N/A"}),e.jsx(U,{children:b.project?.siteName||"N/A"}),e.jsx(U,{children:b.deadline?new Date(b.deadline).toLocaleDateString():"No deadline"}),e.jsx(U,{children:b.statusLog&&b.statusLog.length>0?e.jsx("ul",{className:"text-xs space-y-1",children:b.statusLog.map((D,F)=>e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:D.status}),D.timestamp&&e.jsxs("span",{children:[" (",new Date(D.timestamp).toLocaleString(),")"]}),D.comment&&e.jsxs("span",{children:[": ",D.comment]})]},F))}):e.jsx("span",{children:"No history"})}),e.jsxs(U,{children:[b.project?.mapLink&&e.jsx("div",{className:"mb-1",children:e.jsxs("a",{href:b.project.mapLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline font-medium flex items-center gap-1",children:[e.jsx("span",{role:"img","aria-label":"map",children:"📍"})," Map"]})}),b.project?.files&&b.project.files.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-blue-700",children:"Project Files:"}),e.jsx("ul",{className:"space-y-1 mt-1",children:b.project.files.map((D,F)=>e.jsxs("li",{children:[e.jsx("a",{href:`https://cosmicproject-backend-1.onrender.com/${D.path}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800 underline font-medium",children:D.originalName||D.filename}),D.size&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",(D.size/1024).toFixed(1)," KB)"]})]},F))})]})]})]},b._id||b.id))})]})})})]})]}),e.jsx("div",{className:"space-y-6"})]}),e.jsx(xe,{open:a,onOpenChange:r,children:e.jsxs(de,{className:"mobile-dialog-content max-h-[90vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsx(me,{className:"mobile-text-lg",children:"Create New Task"}),e.jsx(he,{className:"mobile-text-sm",children:"Assign a new task to one of your team members."})]}),e.jsxs("div",{className:"mobile-form py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"mobile-form-group w-full",children:[e.jsx(L,{htmlFor:"project",className:"mobile-text-sm",children:"Project *"}),e.jsxs(Pe,{value:o,onValueChange:l,children:[e.jsx(Ne,{className:"mobile-select w-full",children:e.jsx(Te,{placeholder:"Select project"})}),e.jsx(we,{children:I.length===0?e.jsx(z,{value:"",disabled:!0,children:"No projects available"}):I.map(b=>e.jsx(z,{value:b._id,children:b.siteName},b._id))})]})]}),e.jsxs("div",{className:"mobile-form-group w-full",children:[e.jsx(L,{htmlFor:"technician",className:"mobile-text-sm",children:"Assign to *"}),e.jsxs(Pe,{value:d,onValueChange:p,children:[e.jsx(Ne,{className:"mobile-select w-full",children:e.jsx(Te,{placeholder:"Select technician"})}),e.jsx(we,{children:B.length===0?e.jsx(z,{value:"",disabled:!0,children:"No team members available"}):B.map(b=>e.jsx(z,{value:b._id,children:b.name},b._id))})]})]})]}),o&&(()=>{const b=I.find(D=>D._id===o);return b?.mapLink?e.jsxs("div",{className:"text-xs text-blue-600 mt-2 p-2 bg-blue-50 rounded border",children:[e.jsx("div",{className:"font-medium mb-1",children:"📍 Project Map Link:"}),e.jsx("a",{href:b.mapLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline break-all",children:b.mapLink})]}):null})(),o&&(()=>{const b=I.find(D=>D._id===o);return b?.files&&b.files.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Project Files"}),e.jsxs("div",{className:"text-xs text-blue-600 p-2 bg-blue-50 rounded border",children:[e.jsx("div",{className:"font-medium mb-2",children:"📎 Project Files Available:"}),e.jsx("div",{className:"space-y-1",children:b.files.map((D,F)=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-1.5 rounded border",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ee,{className:"h-3 w-3 text-gray-500"}),e.jsx("span",{className:"text-gray-700 truncate",children:D.originalName||D.filename}),D.size&&e.jsxs("span",{className:"text-gray-500",children:["(",(D.size/1024).toFixed(1)," KB)"]})]}),e.jsx(R,{type:"button",variant:"outline",size:"sm",className:"text-xs",onClick:()=>{const ce={name:D.originalName||D.filename,size:D.size||0,isProjectFile:!0,projectFilePath:D.path||D.filename};O([...T,ce])},children:"Add to Task"})]},F))})]})]}):null})(),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"task-title",children:"Task Title *"}),e.jsx(X,{id:"task-title",placeholder:"Enter task title",value:m,onChange:b=>u(b.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"task-description",children:"Description"}),e.jsx(Me,{id:"task-description",placeholder:"Enter task description and requirements",value:h,onChange:b=>j(b.target.value),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Upload Files"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{type:"button",variant:"outline",onClick:()=>document.getElementById("task-file-upload")?.click(),className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),"Choose Files"]}),e.jsx("input",{id:"task-file-upload",type:"file",multiple:!0,className:"hidden",onChange:b=>{const F=Array.from(b.target.files||[]).filter(ne=>ne.size>10*1024*1024?(alert(`File "${ne.name}" is too large. Maximum size is 10MB.`),!1):!0);if(T.length+F.length>10){alert("Maximum 10 files allowed. Please remove some files first.");return}const ce=F.map(ne=>({name:ne.name,size:ne.size,file:ne,isProjectFile:!1}));O([...T,...ce])}}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Max 10 files, 10MB each"})]}),T.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:T.map((b,D)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded border",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:b.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:[(b.size/1024).toFixed(1)," KB",b.isProjectFile&&" (Project File)"]})]})]}),e.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>{O(T.filter((F,ce)=>ce!==D))},className:"text-red-600 hover:text-red-700",children:e.jsx(ut,{className:"h-3 w-3"})})]},D))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"task-location-link",children:"Location Link (Google Maps)"}),e.jsx(X,{id:"task-location-link",placeholder:"Enter Google Maps link or coordinates",value:M,onChange:b=>N(b.target.value)}),o&&(()=>{const b=I.find(D=>D._id===o);return b?.mapLink?e.jsxs("div",{className:"text-xs text-green-600 mt-2 p-2 bg-green-50 rounded border",children:[e.jsx("div",{className:"font-medium mb-1",children:"💡 Tip:"}),e.jsx("div",{children:"This project has a map link. You can copy it from above or use your own link."}),e.jsx(R,{type:"button",variant:"outline",size:"sm",className:"mt-2 text-xs",onClick:()=>N(b.mapLink),children:"Use Project's Map Link"})]}):null})()]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"priority",children:"Priority"}),e.jsxs(Pe,{value:f,onValueChange:v,children:[e.jsx(Ne,{className:"w-full",children:e.jsx(Te,{placeholder:"Select priority"})}),e.jsxs(we,{children:[e.jsx(z,{value:"low",children:"Low"}),e.jsx(z,{value:"medium",children:"Medium"}),e.jsx(z,{value:"high",children:"High"}),e.jsx(z,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"deadline",children:"Deadline"}),e.jsx(X,{id:"deadline",type:"date",value:x,onChange:b=>k(b.target.value)})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end",children:[e.jsx(R,{variant:"outline",onClick:()=>{r(!1),u(""),j(""),l(""),p(""),v(""),k(""),N(""),O([]);const b=document.getElementById("task-file-upload");b&&(b.value="")},className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(R,{onClick:g,className:"w-full sm:w-auto",children:"Create Task"})]})]})}),e.jsx(xe,{open:n,onOpenChange:i,children:e.jsxs(de,{className:"mobile-dialog-content max-w-[95vw] sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsx(me,{className:"mobile-text-lg",children:"Task Report"}),e.jsx(he,{className:"mobile-text-sm",children:"View all tasks updated by technicians, including attachments and descriptions. You can also download this report as a PDF."})]}),e.jsx("div",{className:"mobile-space-y",children:H.length===0?e.jsxs("div",{className:"mobile-empty-state",children:[e.jsx("div",{className:"mobile-empty-state-icon",children:"📋"}),e.jsx("h3",{className:"mobile-empty-state-title",children:"No tasks available"}),e.jsx("p",{className:"mobile-empty-state-description",children:"There are no tasks to display in the report."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"hidden sm:block",children:e.jsx("div",{className:"responsive-table",children:e.jsxs("table",{className:"w-full border-collapse bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 text-center border-b border-gray-200 py-3 mobile-text-sm font-medium",children:"Select"}),e.jsx("th",{className:"border-b border-gray-200 py-3 mobile-text-sm font-medium text-left",children:"Title"}),e.jsx("th",{className:"border-b border-gray-200 py-3 mobile-text-sm font-medium text-left",children:"Status"}),e.jsx("th",{className:"border-b border-gray-200 py-3 mobile-text-sm font-medium text-left",children:"Attachments"}),e.jsx("th",{className:"border-b border-gray-200 py-3 mobile-text-sm font-medium text-left",children:"Description"})]})}),e.jsx("tbody",{children:H.map(b=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"text-center border-b border-gray-200 py-3",children:e.jsx("input",{type:"radio",name:"selectedTaskReport",checked:re===(b._id||b.id),onChange:()=>pe(b._id||b.id),className:"w-4 h-4"})}),e.jsx("td",{className:"border-b border-gray-200 py-3 mobile-text-sm",children:b.title}),e.jsx("td",{className:"border-b border-gray-200 py-3 mobile-text-sm",children:e.jsx(J,{variant:"outline",className:"capitalize",children:b.status})}),e.jsx("td",{className:"border-b border-gray-200 py-3 mobile-text-sm",children:b.files&&b.files.length>0?e.jsx("ul",{className:"space-y-1",children:b.files.map((D,F)=>e.jsx("li",{children:e.jsx("a",{href:D.url||`https://cosmicproject-backend-1.onrender.com/${D.path}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline text-xs",children:D.originalName||D.name||D.filename||"Attachment"})},F))}):e.jsx("span",{className:"text-gray-500 text-xs",children:"No attachments"})}),e.jsx("td",{className:"border-b border-gray-200 py-3 mobile-text-sm text-gray-600",children:b.description||"-"})]},b._id||b.id))})]})})}),e.jsx("div",{className:"sm:hidden space-y-4",children:H.map(b=>e.jsx("div",{className:`mobile-card p-4 border-2 transition-colors ${re===(b._id||b.id)?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>pe(b._id||b.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"radio",name:"selectedTaskReport",checked:re===(b._id||b.id),onChange:()=>pe(b._id||b.id),className:"w-4 h-4 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"mobile-text-base font-medium text-gray-900 truncate",children:b.title}),e.jsx(J,{variant:"outline",className:"capitalize mobile-text-xs",children:b.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"mobile-text-xs font-medium text-gray-500",children:"Description:"}),e.jsx("p",{className:"mobile-text-sm text-gray-700 mt-1",children:b.description||"No description available"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"mobile-text-xs font-medium text-gray-500",children:"Attachments:"}),b.files&&b.files.length>0?e.jsx("div",{className:"mt-1 space-y-1",children:b.files.map((D,F)=>e.jsx("div",{children:e.jsx("a",{href:D.url||`https://cosmicproject-backend-1.onrender.com/${D.path}`,target:"_blank",rel:"noopener noreferrer",className:"mobile-text-xs text-blue-600 hover:text-blue-800 underline break-all",children:D.originalName||D.name||D.filename||"Attachment"})},F))}):e.jsx("p",{className:"mobile-text-xs text-gray-500 mt-1",children:"No attachments"})]})]})]})]})},b._id||b.id))})]})}),e.jsxs("div",{className:"mobile-button-group mt-6",children:[e.jsx(R,{variant:"outline",onClick:()=>i(!1),className:"mobile-button",children:"Close"}),e.jsxs(R,{onClick:()=>{const b=H.find(D=>(D._id||D.id)===re);b&&ye(b)},disabled:!re,className:"mobile-button",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]})]})})]})})};var ma="Progress",tm=100,[sm,Cm]=_t(ma),[am,rm]=sm(ma),ai=c.forwardRef((t,s)=>{const{__scopeProgress:a,value:r=null,max:n,getValueLabel:i=nm,...o}=t;(n||n===0)&&Ga(n);const l=Ga(n)?n:tm;r!==null&&Qa(r,l);const d=Qa(r,l)?r:null,p=cs(d)?i(d,l):void 0;return e.jsx(am,{scope:a,value:d,max:l,children:e.jsx(ke.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":cs(d)?d:void 0,"aria-valuetext":p,role:"progressbar","data-state":ii(d,l),"data-value":d??void 0,"data-max":l,...o,ref:s})})});ai.displayName=ma;var ri="ProgressIndicator",ni=c.forwardRef((t,s)=>{const{__scopeProgress:a,...r}=t,n=rm(ri,a);return e.jsx(ke.div,{"data-state":ii(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...r,ref:s})});ni.displayName=ri;function nm(t,s){return`${Math.round(t/s*100)}%`}function ii(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function cs(t){return typeof t=="number"}function Ga(t){return cs(t)&&!isNaN(t)&&t>0}function Qa(t,s){return cs(t)&&!isNaN(t)&&t<=s&&t>=0}var oi=ai,im=ni;const et=c.forwardRef(({className:t,value:s,...a},r)=>e.jsx(oi,{ref:r,className:_("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...a,children:e.jsx(im,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));et.displayName=oi.displayName;const om=()=>{const[t,s]=c.useState(""),[a,r]=c.useState("all"),[n,i]=c.useState(null),[o,l]=c.useState(!1),[d,p]=c.useState(!1),[m,u]=c.useState(""),[h,j]=c.useState(""),[f,v]=c.useState([]),[x,k]=c.useState(""),[M,N]=c.useState([]),[T,O]=c.useState(null),{socket:I}=xt(),P=async()=>{const y={Authorization:`Bearer ${localStorage.getItem("token")}`},g=await(await fetch("https://cosmicproject-backend-1.onrender.com/api/profile",{headers:y})).json();g.status==="success"&&O(g.data)},B=async E=>{const y=localStorage.getItem("token"),S=new FormData;S.append("profilePicture",E),await fetch("https://cosmicproject-backend-1.onrender.com/api/profile/picture",{method:"POST",headers:{Authorization:`Bearer ${y}`},body:S}),await P()};c.useEffect(()=>{P();const y={"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`};fetch("https://cosmicproject-backend-1.onrender.com/api/technician/tasks",{headers:y}).then(S=>S.json()).then(S=>{S.status==="success"&&N(S.data)}).catch(console.error)},[]),c.useEffect(()=>{if(I)return I.on("project_created",E=>{V.success(`New project "${E.project.siteName}" created.`)}),I.on("task_assigned",E=>{V.success(`You have been assigned a new task: "${E.task.title}".`)}),I.on("task_status_updated",E=>{V(`Task "${E.task.title}" status updated to "${E.task.status}".`),N(y=>{const S=y.findIndex(g=>g._id===E.task._id||g.id===E.task._id);if(S!==-1){const g=[...y];return g[S]={...g[S],...E.task},g}return y})}),I.on("report_submitted",E=>{V.success(`A report was submitted for task "${E.report.task}".`)}),()=>{I.off("project_created"),I.off("task_assigned"),I.off("task_status_updated"),I.off("report_submitted")}},[I]);const q=M.filter(E=>E.status==="assigned").length,H=M.filter(E=>E.status==="in_progress").length,A=M.filter(E=>E.status==="completed").length,w=M.filter(E=>E.status==="delayed").length,C=[{title:"Assigned Tasks",value:q,description:"Current active assignments",icon:be},{title:"In Progress",value:H,description:"Currently working on",icon:bt},{title:"Completed",value:A,description:"This month",icon:Le},{title:"Delayed",value:w,description:"Require attention",icon:ts}],Q=M.filter(E=>{const y=E.title.toLowerCase().includes(t.toLowerCase())||E.project.toLowerCase().includes(t.toLowerCase())||E.location.toLowerCase().includes(t.toLowerCase()),S=a==="all"||E.status===a;return y&&S}),le=E=>{switch(E){case"urgent":return"bg-destructive text-destructive-foreground";case"high":return"bg-orange-500 text-white";case"medium":return"bg-pending text-pending-foreground";case"low":return"bg-muted text-muted-foreground";default:return"bg-muted text-muted-foreground"}},Y=E=>{switch(E){case"assigned":return"bg-blue-500 text-white";case"in_progress":return"bg-pending text-pending-foreground";case"completed":return"bg-success text-success-foreground";case"delayed":return"bg-destructive text-destructive-foreground";default:return"bg-muted text-muted-foreground"}},ve=(E,y)=>{i(E),y==="view"?l(!0):y==="update"&&(u(E.status),p(!0))},te=async()=>{if(!n||!m){alert("Please select a status");return}if(m==="delayed"&&(!x||x.trim()==="")){alert("Please provide a delay reason when reporting delay.");return}try{const E=localStorage.getItem("token"),S=await(await fetch(`https://cosmicproject-backend-1.onrender.com/api/technician/tasks/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify({status:m,comment:h,files:f.map(g=>g.name),...m==="delayed"?{delayReason:x}:{}})})).json();if(S.status==="success"){const W=await(await fetch("https://cosmicproject-backend-1.onrender.com/api/technician/tasks",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`}})).json();W.status==="success"&&N(W.data),alert(`✅ Task "${n.title}" status updated to "${m.replace("_"," ")}"${h?` with comment: "${h}"`:""}`),j(""),v([]),p(!1),i(null),k("")}else alert(`❌ Failed to update task status: ${S.message}`)}catch{alert("❌ Failed to update task status. Please try again.")}},re=E=>{const y=Array.from(E.target.files||[]);v(S=>[...S,...y])},pe=E=>{v(y=>y.filter((S,g)=>g!==E))};return e.jsx(Ie,{userRole:"technician",userName:T?.name||"Technician",userEmail:T?.email||"technician@cosmicsolutions.com",userProfilePicture:T?.profilePicture?`https://cosmicproject-backend-1.onrender.com/${T.profilePicture}`:void 0,onProfilePictureUpload:B,children:e.jsxs("div",{className:"mobile-container mobile-space-y max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"mobile-text-2xl font-bold text-foreground",children:"Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-1 mobile-text-base",children:"Welcome to your technician dashboard. Access your tasks and reports from the navigation menu."})]})}),e.jsx(da,{stats:C}),e.jsxs(Z,{className:"mobile-card",children:[e.jsx(se,{children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{className:"mobile-text-lg",children:"Task Management"}),e.jsx(Ae,{className:"mobile-text-sm",children:"View, update, and manage your assigned tasks"})]}),e.jsxs("div",{className:"mobile-action-buttons",children:[e.jsxs("div",{className:"mobile-search",children:[e.jsx(ft,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(X,{placeholder:"Search tasks...",value:t,onChange:E=>s(E.target.value),className:"mobile-search-input"})]}),e.jsxs(Pe,{value:a,onValueChange:r,children:[e.jsx(Ne,{className:"mobile-select w-full sm:w-40",children:e.jsx(Te,{})}),e.jsxs(we,{children:[e.jsx(z,{value:"all",children:"All Tasks"}),e.jsx(z,{value:"assigned",children:"Assigned"}),e.jsx(z,{value:"in_progress",children:"In Progress"}),e.jsx(z,{value:"completed",children:"Completed"}),e.jsx(z,{value:"delayed",children:"Delayed"})]})]})]})]})}),e.jsx(ee,{children:e.jsx("div",{className:"mobile-space-y",children:Q.length===0?e.jsxs("div",{className:"mobile-empty-state",children:[e.jsx(be,{className:"mobile-empty-state-icon text-muted-foreground"}),e.jsx("h3",{className:"mobile-empty-state-title",children:"No tasks found"}),e.jsx("p",{className:"mobile-empty-state-description",children:M.length===0?"No tasks have been assigned to you yet. You can view or submit your tasks and reports using the navigation menu.":"No tasks match your current filters."})]}):e.jsx("div",{className:"responsive-table",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2 bg-muted/50 mobile-text-sm font-medium text-muted-foreground",children:"Task Title"}),e.jsx("th",{className:"py-2 px-2 bg-muted/50 mobile-text-sm font-medium text-muted-foreground",children:"Project"}),e.jsx("th",{className:"py-2 px-2 bg-muted/50 mobile-text-sm font-medium text-muted-foreground",children:"Location"}),e.jsx("th",{className:"py-2 px-2 bg-muted/50 mobile-text-sm font-medium text-muted-foreground",children:"Priority"}),e.jsx("th",{className:"py-2 px-2 bg-muted/50 mobile-text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"py-2 px-2 bg-muted/50 mobile-text-sm font-medium text-muted-foreground",children:"Deadline"}),e.jsx("th",{className:"py-2 px-2 bg-muted/50 mobile-text-sm font-medium text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{children:Q.map(E=>e.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"py-2 px-2 mobile-text-sm text-foreground",children:e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:e.jsx("h4",{className:"font-medium",children:E.title})})}),e.jsx("td",{className:"py-2 px-2 mobile-text-sm text-foreground",children:E.project}),e.jsx("td",{className:"py-2 px-2 mobile-text-sm text-foreground",children:E.location}),e.jsx("td",{className:"py-2 px-2 mobile-text-sm text-foreground",children:e.jsx(J,{variant:"outline",className:le(E.priority),children:E.priority.toUpperCase()})}),e.jsx("td",{className:"py-2 px-2 mobile-text-sm text-foreground",children:e.jsx(J,{variant:"outline",className:Y(E.status),children:E.status.replace("_"," ").toUpperCase()})}),e.jsx("td",{className:"py-2 px-2 mobile-text-sm text-foreground",children:new Date(E.deadline).toLocaleDateString()}),e.jsx("td",{className:"py-2 px-2 mobile-text-sm text-foreground",children:e.jsxs("div",{className:"mobile-action-buttons",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>ve(E,"view"),children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),"View"]}),E.status!=="completed"&&e.jsx(R,{size:"sm",onClick:()=>ve(E,"update"),children:E.status==="assigned"?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"h-3 w-3 mr-1"}),"Start"]}):e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"h-3 w-3 mr-1"}),"Update"]})})]})})]},E.id))})]})})})})]}),e.jsx(xe,{open:o,onOpenChange:l,children:e.jsxs(de,{className:"mobile-dialog-content max-h-[90vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsx(me,{className:"mobile-text-lg",children:n?.title}),e.jsx(he,{className:"mobile-text-sm",children:"Task details and information"})]}),n&&e.jsxs("div",{className:"mobile-space-y",children:[e.jsxs("div",{className:"mobile-grid-2",children:[e.jsxs("div",{children:[e.jsx(L,{className:"mobile-text-sm font-medium",children:"Project"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:n.project})]}),e.jsxs("div",{children:[e.jsx(L,{className:"mobile-text-sm font-medium",children:"Location"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:n.location})]}),e.jsxs("div",{children:[e.jsx(L,{className:"mobile-text-sm font-medium",children:"Assigned By"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:n.assignedBy})]}),e.jsxs("div",{children:[e.jsx(L,{className:"mobile-text-sm font-medium",children:"Deadline"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground",children:new Date(n.deadline).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(L,{className:"mobile-text-sm font-medium",children:"Priority"}),e.jsx(J,{variant:"outline",className:le(n.priority),children:n.priority.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx(L,{className:"mobile-text-sm font-medium",children:"Status"}),e.jsx(J,{variant:"outline",className:Y(n.status),children:n.status.replace("_"," ").toUpperCase()})]})]}),e.jsxs("div",{children:[e.jsx(L,{className:"mobile-text-sm font-medium",children:"Description"}),e.jsx("p",{className:"mobile-text-sm text-muted-foreground mt-1",children:n.description})]}),n.locationLink&&e.jsxs("div",{children:[e.jsx(L,{className:"text-sm font-medium",children:"Location Link"}),e.jsx("div",{className:"mt-1",children:e.jsxs("a",{href:n.locationLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline font-medium flex items-center gap-2",children:[e.jsx(yt,{className:"h-4 w-4"}),"Open Location in Maps"]})})]}),n.files&&n.files.length>0||n.projectFiles&&n.projectFiles.length>0?e.jsxs("div",{children:[e.jsx(L,{className:"text-sm font-medium",children:"Attached Files"}),e.jsxs("div",{className:"mt-2 space-y-3",children:[n.files&&n.files.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Task Files:"}),e.jsx("div",{className:"mt-2 space-y-2",children:n.files.map((E,y)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ee,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:E.originalName||E.name||E.filename}),E.size&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(E.size/1024).toFixed(1)," KB"]})]})]}),e.jsx("a",{href:E.url||`https://cosmicproject-backend-1.onrender.com/${E.path}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 underline font-medium",children:"Download"})]},y))})]}),n.projectFiles&&n.projectFiles.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Project Files:"}),e.jsx("div",{className:"mt-2 space-y-2",children:n.projectFiles.map((E,y)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ee,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:E.originalName||E.name||E.filename}),E.size&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(E.size/1024).toFixed(1)," KB"]})]})]}),e.jsx("a",{href:E.url||`https://cosmicproject-backend-1.onrender.com/${E.path}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 underline font-medium",children:"Download"})]},y))})]})]})]}):null,n.status!=="assigned"&&e.jsxs("div",{children:[e.jsx(L,{className:"text-sm font-medium",children:"Progress"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Completion"}),e.jsxs("span",{className:"font-medium",children:[n.progress,"%"]})]}),e.jsx(et,{value:n.progress,className:"h-2"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",onClick:()=>l(!1),children:"Close"}),n.status!=="completed"&&e.jsx(R,{onClick:()=>{l(!1),ve(n,"update")},children:"Update Status"})]})]})]})}),e.jsx(xe,{open:d,onOpenChange:p,children:e.jsxs(de,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsx(me,{children:"Update Task Status"}),e.jsxs(he,{children:['Update the status of "',n?.title,'"']})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(L,{htmlFor:"status",children:"New Status *"}),e.jsxs(Pe,{value:m,onValueChange:u,children:[e.jsx(Ne,{className:"mt-2",children:e.jsx(Te,{placeholder:"Select new status"})}),e.jsxs(we,{children:[e.jsx(z,{value:"in_progress",children:"Start Working"}),e.jsx(z,{value:"completed",children:"Mark Completed"}),e.jsx(z,{value:"delayed",children:"Report Delay"})]})]})]}),e.jsxs("div",{children:[e.jsx(L,{htmlFor:"comment",children:"Comments"}),e.jsx(Me,{id:"comment",placeholder:"Add comments about the task progress, issues, or completion details...",value:h,onChange:E=>j(E.target.value),className:"mt-2",rows:3})]}),e.jsxs("div",{children:[e.jsx(L,{children:"Upload Files"}),e.jsxs("div",{className:"mt-2 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(R,{variant:"outline",onClick:()=>document.getElementById("file-upload")?.click(),className:"w-full sm:w-auto",children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),"Upload Photos/Documents"]}),e.jsx("input",{id:"file-upload",type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx",onChange:re,className:"hidden"})]}),f.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm",children:"Uploaded Files:"}),f.map((E,y)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded-md",children:[e.jsx("span",{className:"text-sm truncate",children:E.name}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>pe(y),children:"×"})]},y))]})]})]}),m==="delayed"&&e.jsxs("div",{children:[e.jsx(L,{htmlFor:"delayReason",children:"Delay Reason *"}),e.jsx(Me,{id:"delayReason",placeholder:"Enter the reason for the delay...",value:x,onChange:E=>k(E.target.value),className:"mt-2",rows:2,required:!0})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end",children:[e.jsx(R,{variant:"outline",onClick:()=>p(!1),className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(R,{onClick:te,className:"w-full sm:w-auto",children:"Update Status"})]})]})]})})]})})},lm=()=>{const t=Ct();return c.useEffect(()=>{},[t.pathname]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},cm=()=>{const[t,s]=c.useState(""),[a,r]=c.useState("all"),[n,i]=c.useState("cards"),[o,l]=c.useState(null),[d,p]=c.useState(!1),[m,u]=c.useState(!1),[h,j]=c.useState([]),[f,v]=c.useState(""),[x,k]=c.useState(""),[M,N]=c.useState(null),{socket:T}=xt();c.useEffect(()=>{const w={"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`};fetch("https://cosmicproject-backend-1.onrender.com/api/manager/projects",{headers:w}).then(C=>C.json()).then(C=>{C.status==="success"&&j(C.data)}).catch(console.error),fetch("https://cosmicproject-backend-1.onrender.com/api/reports/overview",{headers:w}).then(C=>C.json()).then(C=>{C.status==="success"&&N(C.data)}).catch(console.error)},[]),c.useEffect(()=>{if(T)return T.on("project_created",A=>{V.success(`New project "${A.project.siteName}" assigned to you.`)}),T.on("task_assigned",A=>{V.success(`Task "${A.task.title}" assigned to technician.`)}),T.on("task_status_updated",A=>{V(`Task "${A.task.title}" status updated to "${A.task.status}".`)}),T.on("report_submitted",A=>{V.success(`Report submitted for task "${A.report.task}".`)}),()=>{T.off("project_created"),T.off("task_assigned"),T.off("task_status_updated"),T.off("report_submitted")}},[T]);const O=h.filter(A=>{const w=A.siteName.toLowerCase().includes(t.toLowerCase())||A.clientName.toLowerCase().includes(t.toLowerCase())||A.location.toLowerCase().includes(t.toLowerCase()),C=a==="all"||(A.status||"active").toLowerCase()===a;return w&&C}),I=A=>{l(A),p(!0)},P=A=>{switch(A){case"Active":return e.jsx(bt,{className:"h-4 w-4"});case"Completed":return e.jsx(Le,{className:"h-4 w-4"});case"On Hold":return e.jsx(_a,{className:"h-4 w-4"});default:return e.jsx(dn,{className:"h-4 w-4"})}},B=A=>{switch(A){case"High":return"bg-red-500";case"Medium":return"bg-orange-500";case"Low":return"bg-green-500";default:return"bg-gray-500"}},q=({project:A})=>e.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-3 mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:A.siteName}),e.jsx(J,{className:`${B(A.priority)} text-white border-0 text-xs`,children:A.priority})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ea,{className:"h-3 w-3"}),e.jsx("span",{children:A.clientName})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(yt,{className:"h-3 w-3"}),e.jsx("span",{children:A.location})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ye,{className:"h-3 w-3"}),e.jsxs("span",{children:[new Date(A.startDate).toLocaleDateString()," -"," ",new Date(A.endDate).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(J,{className:`${A.statusColor} text-white border-0 flex items-center gap-1`,children:[P(A.status),A.status]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>I(A),children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),"View"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Budget:"}),e.jsx("span",{className:"font-medium ml-2",children:A.budget})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Team Size:"}),e.jsxs("span",{className:"font-medium ml-2",children:[A.teamSize," members"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Tasks: ",A.completedTasks,"/",A.tasksCount]}),e.jsxs("span",{className:"font-medium",children:[A.progress,"%"]})]}),e.jsx(et,{value:A.progress,className:"h-2"})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-600",children:["Last updated: ",new Date(A.lastUpdated).toLocaleDateString()]})]}),H=({project:A})=>e.jsxs(je,{children:[e.jsx(U,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:A.name}),e.jsx("div",{className:"text-sm text-gray-600",children:A.client})]})}),e.jsx(U,{children:e.jsx("div",{className:"text-sm",children:e.jsx("div",{children:A.location})})}),e.jsx(U,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:new Date(A.startDate).toLocaleDateString()}),e.jsxs("div",{className:"text-gray-600",children:["to ",new Date(A.endDate).toLocaleDateString()]})]})}),e.jsx(U,{children:e.jsxs(J,{className:`${A.statusColor} text-white border-0 flex items-center gap-1 w-fit`,children:[P(A.status),A.status]})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[A.completedTasks,"/",A.tasksCount]}),e.jsxs("span",{children:[A.progress,"%"]})]}),e.jsx(et,{value:A.progress,className:"h-2"})]})}),e.jsx(U,{children:e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>I(A),children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),"View"]})})]},A.id);return e.jsx(Ie,{userRole:"manager",userName:"Project Manager",userEmail:"manager@cosmicsolutions.com",children:e.jsxs("div",{className:"p-4 lg:p-6 space-y-4 lg:space-y-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"My Projects"}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm lg:text-base",children:"Manage and track all your assigned projects."})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(Z,{children:[e.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ae,{className:"text-sm font-medium",children:"Total Projects"}),e.jsx(be,{className:"h-4 w-4 text-gray-600"})]}),e.jsxs(ee,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.length}),e.jsx("p",{className:"text-xs text-gray-600",children:"All assigned projects"})]})]}),e.jsxs(Z,{children:[e.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ae,{className:"text-sm font-medium",children:"Active Projects"}),e.jsx(bt,{className:"h-4 w-4 text-gray-600"})]}),e.jsxs(ee,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.filter(A=>!A.status||A.status==="Active"||A.status==="Planning"||A.status==="In Progress").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Currently in progress"})]})]}),e.jsxs(Z,{children:[e.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ae,{className:"text-sm font-medium",children:"Completed"}),e.jsx(Le,{className:"h-4 w-4 text-gray-600"})]}),e.jsxs(ee,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.filter(A=>A.status==="Completed"||A.status==="Done").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Successfully finished"})]})]}),e.jsxs(Z,{children:[e.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ae,{className:"text-sm font-medium",children:"On Hold"}),e.jsx(_a,{className:"h-4 w-4 text-gray-600"})]}),e.jsxs(ee,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.filter(A=>A.status==="On Hold"||A.status==="Paused").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Temporarily paused"})]})]})]}),e.jsxs(Z,{children:[e.jsx(se,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Projects Overview"}),e.jsxs(Ae,{children:[O.length," of ",h.length," ","projects"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 sm:w-64",children:[e.jsx(ft,{className:"absolute left-3 top-3 h-4 w-4 text-gray-600"}),e.jsx(X,{placeholder:"Search projects...",value:t,onChange:A=>s(A.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Js,{className:"h-4 w-4 text-gray-600"}),e.jsxs(Pe,{value:a,onValueChange:r,children:[e.jsx(Ne,{className:"w-32",children:e.jsx(Te,{placeholder:"All Status"})}),e.jsxs(we,{children:[e.jsx(z,{value:"all",children:"All Status"}),e.jsx(z,{value:"active",children:"Active"}),e.jsx(z,{value:"completed",children:"Completed"}),e.jsx(z,{value:"on hold",children:"On Hold"})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:n==="cards"?"default":"outline",size:"sm",onClick:()=>i("cards"),children:e.jsx(ud,{className:"h-4 w-4"})}),e.jsx(R,{variant:n==="table"?"default":"outline",size:"sm",onClick:()=>i("table"),children:e.jsx(md,{className:"h-4 w-4"})})]})]})]})}),e.jsx(ee,{children:O.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(be,{className:"mx-auto h-12 w-12 text-gray-600"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No projects found"}),e.jsx("p",{className:"mt-2 text-gray-600",children:t||a!=="all"?"Try adjusting your search or filters":"Projects assigned by Super Admin will appear here."})]}):n==="cards"?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-1",children:O.map(A=>e.jsx(q,{project:A},A.id))}):e.jsxs(Ue,{children:[e.jsx(ze,{children:e.jsxs(je,{children:[e.jsx($,{children:"Project & Client"}),e.jsx($,{children:"Location"}),e.jsx($,{children:"Timeline"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Progress"}),e.jsx($,{children:"Actions"})]})}),e.jsx(Be,{children:O.map(A=>e.jsx(H,{project:A},A.id))})]})})]}),M&&e.jsxs(Z,{children:[e.jsx(se,{children:e.jsx(ae,{children:"Project Overview Report"})}),e.jsx(ee,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Projects"}),e.jsx("div",{className:"text-2xl font-bold",children:M.totalProjects})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completion Rate"}),e.jsxs("div",{className:"text-2xl font-bold",children:[(M.completionRate*100).toFixed(2),"%"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Average Duration"}),e.jsxs("div",{className:"text-2xl font-bold",children:[M.averageDuration," days"]})]})]})})]}),e.jsx(xe,{open:d,onOpenChange:p,children:e.jsxs(de,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(me,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5"}),"Project Details"]}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>p(!1),children:e.jsx(ut,{className:"h-4 w-4"})})]}),e.jsx(he,{children:"Complete information about the selected project."})]}),o&&e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:o.name}),e.jsx("p",{className:"text-gray-600",children:o.client})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(J,{className:`${o.statusColor} text-white border-0 flex items-center gap-1`,children:[P(o.status),o.status]}),e.jsx(J,{className:`${B(o.priority)} text-white border-0`,children:o.priority})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Location"}),e.jsxs("p",{className:"flex items-center gap-2 mt-1",children:[e.jsx(yt,{className:"h-4 w-4"}),o.location]})]}),e.jsxs("div",{children:[e.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Timeline"}),e.jsxs("p",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Ye,{className:"h-4 w-4"}),new Date(o.startDate).toLocaleDateString()," ","-"," ",new Date(o.endDate).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Budget"}),e.jsx("p",{className:"font-medium mt-1",children:o.budget})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Team Size"}),e.jsxs("p",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Ge,{className:"h-4 w-4"}),o.teamSize," members"]})]}),e.jsxs("div",{children:[e.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Tasks Progress"}),e.jsxs("p",{className:"mt-1",children:[o.completedTasks,"/",o.tasksCount," completed"]})]}),e.jsxs("div",{children:[e.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Last Updated"}),e.jsx("p",{className:"mt-1",children:new Date(o.lastUpdated).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Project Progress"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Overall Progress"}),e.jsxs("span",{className:"font-medium",children:[o.progress,"%"]})]}),e.jsx(et,{value:o.progress,className:"h-3"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Description"}),e.jsx("p",{className:"text-sm leading-relaxed p-4 bg-gray-50 rounded-lg",children:o.description})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t",children:[e.jsxs(R,{variant:"outline",onClick:()=>alert("Task management will be implemented in the next phase"),className:"flex-1",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"View Tasks"]}),e.jsxs(R,{variant:"outline",onClick:()=>alert("Timeline view will be implemented in the next phase"),className:"flex-1",children:[e.jsx(Fa,{className:"h-4 w-4 mr-2"}),"Timeline"]}),e.jsxs(R,{variant:"outline",onClick:()=>alert("Team view will be implemented in the next phase"),className:"flex-1",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Team"]})]})]})]})}),e.jsx(xe,{open:m,onOpenChange:u,children:e.jsxs(de,{className:"sm:max-w-[900px]",children:[e.jsxs(ue,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(me,{className:"flex items-center gap-2",children:[e.jsx(Fa,{className:"h-5 w-5"}),"Project Timeline - Gantt Chart"]}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>u(!1),children:e.jsx(ut,{className:"h-4 w-4"})})]}),e.jsx(he,{children:"Visual timeline of all your projects and their progress."})]}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(mn,{className:"mx-auto h-12 w-12 text-gray-600"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"Gantt Chart View"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Interactive Gantt chart will show:"}),e.jsxs("ul",{className:"mt-4 text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Project timelines and dependencies"}),e.jsx("li",{children:"• Task scheduling and resource allocation"}),e.jsx("li",{children:"• Critical path analysis"}),e.jsx("li",{children:"• Progress tracking and milestones"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"This feature will be implemented in the next phase."})]})})]})})]})})},dm=()=>{const[t,s]=c.useState(""),[a,r]=c.useState("All"),[n,i]=c.useState("All"),[o,l]=c.useState(!1),[d,p]=c.useState(!1),[m,u]=c.useState(null),[h,j]=c.useState(null),[f,v]=c.useState([]),[x,k]=c.useState({title:"",description:"",assignedTechnician:"",project:"",priority:"Medium",deadline:""}),M=[{name:"Field Technician",email:"technician@cosmicsolutions.com"},{name:"Mike Chen",email:"mike.chen@cosmicsolutions.com"},{name:"Lisa Rodriguez",email:"lisa.rodriguez@cosmicsolutions.com"},{name:"James Wilson",email:"james.wilson@cosmicsolutions.com"}],N=["All","Assigned","In Progress","Completed"],T=["All","Low","Medium","High","Urgent"],{socket:O}=xt(),I=async()=>{const w=localStorage.getItem("token");if(!w)return;const Q=await(await fetch("https://cosmicproject-backend-1.onrender.com/api/manager/tasks",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${w}`}})).json();if(Q.status==="success"){const le=Q.data.map(Y=>({...Y,assignedTechnician:Y.assignedTo?.name||"",technicianEmail:Y.assignedTo?.email||"",project:Y.project?.siteName||Y.project||""}));v(le)}};c.useEffect(()=>{const w=localStorage.getItem("token");fetch("https://cosmicproject-backend-1.onrender.com/api/profile",{headers:{Authorization:`Bearer ${w}`}}).then(C=>C.json()).then(C=>{C.status==="success"&&j(C.data)}).catch(console.error),I()},[]),c.useEffect(()=>{if(!O)return;const w=()=>{I()};return O.on("task_status_updated",w),()=>{O.off("task_status_updated",w)}},[O]);const P=c.useMemo(()=>f.filter(w=>{const C=w.title.toLowerCase().includes(t.toLowerCase())||w.assignedTechnician.toLowerCase().includes(t.toLowerCase())||w.project.toLowerCase().includes(t.toLowerCase()),Q=a==="All"||w.status===a,le=n==="All"||w.priority===n;return C&&Q&&le}),[f,t,a,n]),B=w=>{switch(w){case"Low":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"High":return"bg-orange-100 text-orange-800";case"Urgent":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},q=w=>{switch(w){case"Assigned":return"bg-blue-100 text-blue-800";case"In Progress":return"bg-yellow-100 text-yellow-800";case"Completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},H=w=>new Date(w)<new Date&&new Date(w).toDateString()!==new Date().toDateString(),A=()=>{if(x.title&&x.assignedTechnician&&x.deadline){const w={id:f.length+1,...x,technicianEmail:M.find(C=>C.name===x.assignedTechnician)?.email||"",status:"Assigned",createdDate:new Date().toISOString().split("T")[0],attachments:[]};v([...f,w]),k({title:"",description:"",assignedTechnician:"",project:"",priority:"Medium",deadline:""}),l(!1)}};return e.jsxs(Ie,{userRole:"manager",userName:h?.name||"Project Manager",userEmail:h?.email||"manager@cosmicsolutions.com",userProfilePicture:h?.profilePicture?`https://cosmicproject-backend-1.onrender.com/${h.profilePicture}`:void 0,children:[e.jsxs("div",{className:"p-4 lg:p-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsx("p",{className:"text-gray-600 mt-1",children:"Central hub to view, manage, and track all tasks"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(bt,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.filter(w=>w.status==="In Progress").length})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(dn,{className:"w-6 h-6 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.filter(w=>w.status==="Completed").length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 bg-green-600 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.filter(w=>H(w.deadline)).length})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(Ye,{className:"w-6 h-6 text-red-600"})})]})})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border mb-6",children:e.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search tasks, projects, or technicians...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg w-full md:w-64 focus:outline-none focus:ring-2 focus:ring-blue-500",value:t,onChange:w=>s(w.target.value)})]}),e.jsx("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:a,onChange:w=>r(w.target.value),children:N.map(w=>e.jsx("option",{value:w,children:w==="All"?"All Status":w},w))}),e.jsx("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:n,onChange:w=>i(w.target.value),children:T.map(w=>e.jsx("option",{value:w,children:w==="All"?"All Priorities":w},w))})]})})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Task Title"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Assigned Technician"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Priority"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Deadline"})]})}),e.jsx("tbody",{children:P.map(w=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:w.title}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:w.description})]}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:w.assignedTechnician}),e.jsx("div",{className:"text-sm text-gray-500",children:w.technicianEmail})]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${B(w.priority)}`,children:w.priority})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:`text-sm ${H(w.deadline)?"text-red-600 font-medium":"text-gray-900"}`,children:new Date(w.deadline).toLocaleDateString()})]})})]},w.id))})]})}),P.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No tasks found matching your criteria."})})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md m-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Task"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Title"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:x.title,onChange:w=>k({...x,title:w.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,value:x.description,onChange:w=>k({...x,description:w.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assigned Technician"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:x.assignedTechnician,onChange:w=>k({...x,assignedTechnician:w.target.value}),children:[e.jsx("option",{value:"",children:"Select Technician"}),M.map(w=>e.jsx("option",{value:w.name,children:w.name},w.email))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:x.project,onChange:w=>k({...x,project:w.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:x.priority,onChange:w=>k({...x,priority:w.target.value}),children:[e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"}),e.jsx("option",{value:"Urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deadline"}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:x.deadline,onChange:w=>k({...x,deadline:w.target.value})})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:A,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Task"}),e.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})}),d&&m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl m-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:m.title}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(ut,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg",children:m.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assigned Technician"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:m.assignedTechnician}),e.jsx("div",{className:"text-sm text-gray-500",children:m.technicianEmail})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project"}),e.jsx("p",{className:"text-gray-900",children:m.project})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${q(m.status)}`,children:m.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${B(m.priority)}`,children:m.priority})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deadline"}),e.jsx("p",{className:`text-gray-900 ${H(m.deadline)?"text-red-600 font-medium":""}`,children:new Date(m.deadline).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created Date"}),e.jsx("p",{className:"text-gray-900",children:new Date(m.createdDate).toLocaleDateString()})]})]}),e.jsx("div",{className:"flex gap-3 mt-6",children:e.jsx("button",{onClick:()=>p(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Close"})})]})})]})},um=()=>{const[t,s]=c.useState(""),[a,r]=c.useState(""),[n,i]=c.useState(""),[o,l]=c.useState([]),[d,p]=c.useState([]),m=x=>{const k=Array.from(x.target.files||[]);l(M=>[...M,...k])},u=x=>{l(k=>k.filter((M,N)=>N!==x))},h=async x=>{if(x.preventDefault(),!t||!a||!n){alert("Please fill in all required fields");return}const k={id:Date.now().toString(),taskTitle:t,workSummary:a,dateOfWork:n,images:o,submittedAt:new Date().toISOString(),status:"submitted"};try{p(M=>[k,...M]),s(""),r(""),i(""),l([]),alert(`✅ Report submitted successfully!

Task: ${t}
Date: ${new Date(n).toLocaleDateString()}
Images: ${o.length} file(s)

Your report has been sent to the project manager for review.`)}catch{alert("Failed to submit report. Please try again.")}},j=x=>{switch(x){case"submitted":return"bg-blue-500 text-white";case"approved":return"bg-success text-success-foreground";case"rejected":return"bg-destructive text-destructive-foreground";default:return"bg-muted text-muted-foreground"}},f=x=>new Date(x).toLocaleDateString(),v=x=>new Date(x).toLocaleString();return e.jsx(Ie,{userRole:"technician",userName:"Field Technician",userEmail:"technician@cosmicsolutions.com",children:e.jsxs("div",{className:"p-4 lg:p-6 space-y-4 lg:space-y-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-foreground",children:"Reports"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm lg:text-base",children:"Submit work reports and track your submissions."})]})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(Z,{children:[e.jsxs(se,{children:[e.jsxs(ae,{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"h-5 w-5"}),e.jsx("span",{children:"Submit Report"})]}),e.jsx(Ae,{children:"Submit a work report for your completed or ongoing tasks."})]}),e.jsx(ee,{children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"task-title",children:"Task Title *"}),e.jsx(X,{id:"task-title",placeholder:"Enter task title",value:t,onChange:x=>s(x.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"work-summary",children:"Work Summary *"}),e.jsx(Me,{id:"work-summary",placeholder:"Describe the work completed, challenges faced, and any observations...",value:a,onChange:x=>r(x.target.value),rows:5,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"date-of-work",children:"Date of Work *"}),e.jsx(X,{id:"date-of-work",type:"date",value:n,onChange:x=>i(x.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"images",children:"Images (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{type:"button",variant:"outline",onClick:()=>document.getElementById("image-upload")?.click(),className:"w-full",children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),"Upload Images"]}),e.jsx("input",{id:"image-upload",type:"file",multiple:!0,accept:"image/*",onChange:m,className:"hidden"}),o.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm",children:"Uploaded Images:"}),o.map((x,k)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded-md",children:[e.jsx("span",{className:"text-sm truncate",children:x.name}),e.jsx(R,{type:"button",variant:"ghost",size:"sm",onClick:()=>u(k),children:e.jsx(Nt,{className:"h-4 w-4"})})]},k))]})]})]}),e.jsxs(R,{type:"submit",className:"w-full",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Submit Report"]})]})})]}),e.jsxs(Z,{children:[e.jsxs(se,{children:[e.jsx(ae,{children:"Submitted Reports"}),e.jsx(Ae,{children:"Track your previously submitted reports and their status."})]}),e.jsx(ee,{children:d.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ee,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No reports submitted"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Your submitted reports will appear here."})]}):e.jsx("div",{className:"space-y-4",children:d.map(x=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.taskTitle}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Work Date: ",f(x.dateOfWork)]})]}),e.jsx(J,{variant:"outline",className:j(x.status),children:x.status.toUpperCase()})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:x.workSummary}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Submitted: ",v(x.submittedAt)]}),e.jsxs("span",{children:[x.images.length," image(s)"]})]})]},x.id))})})]})]}),d.length>0&&e.jsxs(Z,{children:[e.jsxs(se,{children:[e.jsx(ae,{children:"Recent Submissions"}),e.jsx(Ae,{children:"Detailed view of your recent report submissions."})]}),e.jsx(ee,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ue,{children:[e.jsx(ze,{children:e.jsxs(je,{children:[e.jsx($,{children:"Task Title"}),e.jsx($,{children:"Work Date"}),e.jsx($,{children:"Submitted"}),e.jsx($,{children:"Images"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Actions"})]})}),e.jsx(Be,{children:d.map(x=>e.jsxs(je,{children:[e.jsx(U,{children:e.jsx("div",{className:"font-medium",children:x.taskTitle})}),e.jsx(U,{children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ye,{className:"h-3 w-3"}),e.jsx("span",{children:f(x.dateOfWork)})]})}),e.jsx(U,{children:v(x.submittedAt)}),e.jsxs(U,{children:[x.images.length," file(s)"]}),e.jsx(U,{children:e.jsx(J,{variant:"outline",className:j(x.status),children:x.status.toUpperCase()})}),e.jsx(U,{children:e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{alert(`Report Details:

Task: ${x.taskTitle}
Work Date: ${f(x.dateOfWork)}
Summary: ${x.workSummary}
Images: ${x.images.length} file(s)
Status: ${x.status.toUpperCase()}`)},children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),"View"]})})]},x.id))})]})})})]})]})})},mm=()=>{const[t,s]=c.useState(""),[a,r]=c.useState("all"),[n,i]=c.useState(null),[o,l]=c.useState(!1),[d,p]=c.useState(!1),[m,u]=c.useState(!1),[h,j]=c.useState(!1),[f,v]=c.useState(""),[x,k]=c.useState(""),[M,N]=c.useState(""),[T,O]=c.useState(""),[I,P]=c.useState(""),[B,q]=c.useState([]),[H,A]=c.useState([{id:"task-1",title:"CCTV Camera Installation",description:"Install 8 HD security cameras in the main office building",project:"Office Complex Security Setup",location:"Downtown Office Building",assignedBy:"Project Manager",priority:"high",status:"assigned",deadline:"2024-02-15",assignedDate:"2024-01-15",progress:0,estimatedHours:8},{id:"task-2",title:"Network Cable Setup",description:"Run ethernet cables for the new CCTV system",project:"Office Complex Security Setup",location:"Downtown Office Building",assignedBy:"Project Manager",priority:"medium",status:"in_progress",deadline:"2024-02-10",assignedDate:"2024-01-12",startedDate:"2024-01-13",progress:65,estimatedHours:6,actualHours:4}]),[w,C]=c.useState([]),Q=H.filter(g=>{const W=g.title.toLowerCase().includes(t.toLowerCase())||g.project.toLowerCase().includes(t.toLowerCase())||g.location.toLowerCase().includes(t.toLowerCase()),oe=a==="all"||g.status===a;return W&&oe}),le=g=>{switch(g){case"urgent":return"bg-red-500 text-white";case"high":return"bg-orange-500 text-white";case"medium":return"bg-yellow-500 text-black";case"low":return"bg-gray-500 text-white";default:return"bg-gray-500 text-white"}},Y=g=>{switch(g){case"assigned":return"bg-blue-500 text-white";case"in_progress":return"bg-yellow-500 text-black";case"completed":return"bg-green-500 text-white";case"delayed":return"bg-red-500 text-white";default:return"bg-gray-500 text-white"}},ve=g=>new Date(g).toLocaleDateString(),te=(g,W)=>{i(g),W==="view"?l(!0):W==="update"?(v(g.status),p(!0)):W==="start"&&(N(g.title),P(new Date().toISOString().split("T")[0]),O(""),q([]),u(!0))},re=g=>{const W=Array.from(g.target.files||[]);q(oe=>[...oe,...W])},pe=g=>{q(W=>W.filter((oe,ye)=>ye!==g))},E=async g=>{if(g.preventDefault(),!n){alert("No task selected");return}if(!T||!I){alert("Please fill in all required fields");return}try{const W={id:Date.now().toString(),taskId:n.id,taskTitle:n.title,workSummary:T,dateOfWork:I,images:B,submittedAt:new Date().toISOString(),status:"submitted"},oe={...n,status:"in_progress",startedDate:new Date().toISOString(),progress:25};A(H.map(ye=>ye.id===n.id?oe:ye)),C(ye=>[W,...ye]),N(""),O(""),P(""),q([]),u(!1),i(null),alert(`✅ Task started and report submitted successfully!

Task: ${n.title}
Status: Started (In Progress)
Work Date: ${new Date(I).toLocaleDateString()}
Images: ${B.length} file(s)

Your task has been started and the initial report has been sent to the project manager for review.`)}catch{alert("Failed to start task and submit report. Please try again.")}},y=async g=>{if(g.preventDefault(),!M||!T||!I){alert("Please fill in all required fields");return}try{const W={id:Date.now().toString(),taskId:"",taskTitle:M,workSummary:T,dateOfWork:I,images:B,submittedAt:new Date().toISOString(),status:"submitted"};C(oe=>[W,...oe]),N(""),O(""),P(""),q([]),alert(`✅ Report submitted successfully!

Task: ${M}
Date: ${new Date(I).toLocaleDateString()}
Images: ${B.length} file(s)

Your report has been sent to the project manager for review.`),j(!1)}catch{alert("Failed to submit report. Please try again.")}},S=()=>{if(!n||!f){alert("Please select a status");return}const g={...n,status:f,...f==="in_progress"&&!n.startedDate?{startedDate:new Date().toISOString()}:{},...f==="completed"?{completedDate:new Date().toISOString(),progress:100}:{}};A(H.map(W=>W.id===n.id?g:W)),alert(`Task "${n.title}" status updated to "${f.replace("_"," ")}"

Work Progress Description: ${x}`),p(!1),i(null),k("")};return e.jsx(Ie,{userRole:"technician",userName:"Field Technician",userEmail:"technician@cosmicsolutions.com",children:e.jsxs("div",{className:"p-4 lg:p-6 space-y-4 lg:space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold",children:"My Tasks"}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm lg:text-base",children:"View and manage your assigned tasks."})]}),e.jsxs(R,{onClick:()=>{N(""),O(""),P(new Date().toISOString().split("T")[0]),q([]),j(!0)},className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Ee,{className:"mr-2 h-4 w-4"}),"Submit Report"]})]}),e.jsxs(Z,{children:[e.jsx(se,{children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Task List"}),e.jsx(Ae,{children:"All tasks assigned to you"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ft,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(X,{placeholder:"Search tasks...",value:t,onChange:g=>s(g.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs(Pe,{value:a,onValueChange:r,children:[e.jsx(Ne,{className:"w-full sm:w-40",children:e.jsx(Te,{})}),e.jsxs(we,{children:[e.jsx(z,{value:"all",children:"All Tasks"}),e.jsx(z,{value:"assigned",children:"Assigned"}),e.jsx(z,{value:"in_progress",children:"In Progress"}),e.jsx(z,{value:"completed",children:"Completed"}),e.jsx(z,{value:"delayed",children:"Delayed"})]})]})]})]})}),e.jsx(ee,{children:Q.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(be,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No tasks found"}),e.jsx("p",{className:"mt-2 text-gray-600",children:H.length===0?"No tasks have been assigned to you yet. You can view or submit your tasks and reports using the navigation menu.":"No tasks match your current filters."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ue,{children:[e.jsx(ze,{children:e.jsxs(je,{children:[e.jsx($,{children:"Task Name"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Priority"}),e.jsx($,{children:"Assigned Date"}),e.jsx($,{children:"Due Date"}),e.jsx($,{children:"Progress"}),e.jsx($,{children:"Actions"})]})}),e.jsx(Be,{children:Q.map(g=>e.jsxs(je,{children:[e.jsx(U,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:g.title}),e.jsx("div",{className:"text-sm text-gray-600",children:g.project})]})}),e.jsx(U,{children:e.jsx(J,{className:Y(g.status),children:g.status.replace("_"," ").toUpperCase()})}),e.jsx(U,{children:e.jsx(J,{className:le(g.priority),children:g.priority.toUpperCase()})}),e.jsx(U,{children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ye,{className:"h-3 w-3"}),e.jsx("span",{children:ve(g.assignedDate)})]})}),e.jsx(U,{children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ye,{className:"h-3 w-3"}),e.jsx("span",{children:ve(g.deadline)})]})}),e.jsx(U,{children:e.jsxs("div",{className:"w-24",children:[e.jsx("div",{className:"flex justify-between text-xs mb-1",children:e.jsxs("span",{children:[g.progress,"%"]})}),e.jsx(et,{value:g.progress,className:"h-2"})]})}),e.jsx(U,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>te(g,"view"),children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),"View"]}),g.status!=="completed"&&e.jsx(R,{size:"sm",onClick:()=>g.status==="assigned"?te(g,"start"):te(g,"update"),children:g.status==="assigned"?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"h-3 w-3 mr-1"}),"Start"]}):e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"h-3 w-3 mr-1"}),"Update"]})})]})})]},g.id))})]})})})]}),w.length>0&&e.jsxs(Z,{children:[e.jsxs(se,{children:[e.jsx(ae,{children:"Recent Reports"}),e.jsx(Ae,{children:"Your recently submitted reports"})]}),e.jsx(ee,{children:e.jsx("div",{className:"space-y-4",children:w.slice(0,3).map(g=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:g.taskTitle}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Work Date: ",ve(g.dateOfWork)]})]}),e.jsx(J,{className:Y(g.status),children:g.status.toUpperCase()})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:g.workSummary}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[e.jsxs("span",{children:["Submitted: ",new Date(g.submittedAt).toLocaleString()]}),e.jsxs("span",{children:[g.images.length," image(s)"]})]})]},g.id))})})]}),e.jsx(xe,{open:o,onOpenChange:l,children:e.jsxs(de,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsx(me,{children:n?.title}),e.jsx(he,{children:"Task details and information"})]}),n&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Project:"})," ",n.project]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Location:"})," ",n.location]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Assigned By:"})," ",n.assignedBy]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Deadline:"})," ",ve(n.deadline)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Priority:"}),e.jsx(J,{className:`ml-2 ${le(n.priority)}`,children:n.priority.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"}),e.jsx(J,{className:`ml-2 ${Y(n.status)}`,children:n.status.replace("_"," ").toUpperCase()})]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Description:"}),e.jsx("p",{className:"mt-1",children:n.description})]}),n.status!=="assigned"&&e.jsxs("div",{children:[e.jsx("strong",{children:"Progress:"}),e.jsxs("div",{className:"mt-2",children:[e.jsx(et,{value:n.progress,className:"h-2"}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[n.progress,"% Complete"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",onClick:()=>l(!1),children:"Close"}),n.status!=="completed"&&e.jsx(R,{onClick:()=>{l(!1),n.status==="assigned"?te(n,"start"):te(n,"update")},children:n.status==="assigned"?"Start Task":"Update Status"})]})]})]})}),e.jsx(xe,{open:m,onOpenChange:u,children:e.jsxs(de,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsxs(me,{className:"flex items-center space-x-2",children:[e.jsx(Kt,{className:"h-5 w-5"}),e.jsx("span",{children:"Start Task & Submit Initial Report"})]}),e.jsxs(he,{children:['Start working on "',n?.title,'" and submit your initial work report']})]}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[n&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Task:"})," ",n.title]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Project:"})," ",n.project]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Location:"})," ",n.location]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"work-summary",children:"Initial Work Summary *"}),e.jsx(Me,{id:"work-summary",placeholder:"Describe the initial work completed, setup done, challenges faced, and any observations...",value:T,onChange:g=>O(g.target.value),rows:4,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"date-of-work",children:"Date of Work *"}),e.jsx(X,{id:"date-of-work",type:"date",value:I,onChange:g=>P(g.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"images",children:"Images (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{type:"button",variant:"outline",onClick:()=>document.getElementById("start-task-image-upload")?.click(),className:"w-full",children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),"Upload Images"]}),e.jsx("input",{id:"start-task-image-upload",type:"file",multiple:!0,accept:"image/*",onChange:re,className:"hidden"}),B.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm",children:"Uploaded Images:"}),B.map((g,W)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[e.jsx("span",{className:"text-sm truncate",children:g.name}),e.jsx(R,{type:"button",variant:"ghost",size:"sm",onClick:()=>pe(W),children:e.jsx(Nt,{className:"h-4 w-4"})})]},W))]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsxs(R,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Kt,{className:"mr-2 h-4 w-4"}),"Start Task & Submit Report"]})]})]})]})}),e.jsx(xe,{open:h,onOpenChange:j,children:e.jsxs(de,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsxs(me,{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"h-5 w-5"}),e.jsx("span",{children:"Submit Report"})]}),e.jsx(he,{children:"Submit a work report for your completed or ongoing tasks."})]}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"task-title",children:"Task Title *"}),e.jsx(X,{id:"task-title",placeholder:"Enter task title",value:M,onChange:g=>N(g.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"standalone-work-summary",children:"Work Summary *"}),e.jsx(Me,{id:"standalone-work-summary",placeholder:"Describe the work completed, challenges faced, and any observations...",value:T,onChange:g=>O(g.target.value),rows:5,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"standalone-date-of-work",children:"Date of Work *"}),e.jsx(X,{id:"standalone-date-of-work",type:"date",value:I,onChange:g=>P(g.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"standalone-images",children:"Images (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(R,{type:"button",variant:"outline",onClick:()=>document.getElementById("standalone-image-upload")?.click(),className:"w-full",children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),"Upload Images"]}),e.jsx("input",{id:"standalone-image-upload",type:"file",multiple:!0,accept:"image/*",onChange:re,className:"hidden"}),B.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm",children:"Uploaded Images:"}),B.map((g,W)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[e.jsx("span",{className:"text-sm truncate",children:g.name}),e.jsx(R,{type:"button",variant:"ghost",size:"sm",onClick:()=>pe(W),children:e.jsx(Nt,{className:"h-4 w-4"})})]},W))]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsxs(R,{type:"submit",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Submit Report"]})]})]})]})}),e.jsx(xe,{open:d,onOpenChange:p,children:e.jsxs(de,{className:"sm:max-w-[500px]",children:[e.jsxs(ue,{children:[e.jsx(me,{children:"Update Task Status"}),e.jsxs(he,{children:['Update the status of "',n?.title,'"']})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"text-sm font-medium",children:"New Status *"}),e.jsxs(Pe,{value:f,onValueChange:v,children:[e.jsx(Ne,{className:"mt-2",children:e.jsx(Te,{placeholder:"Select new status"})}),e.jsxs(we,{children:[e.jsx(z,{value:"in_progress",children:"Start Working"}),e.jsx(z,{value:"completed",children:"Mark Completed"}),e.jsx(z,{value:"delayed",children:"Report Delay"})]})]})]}),e.jsxs("div",{children:[e.jsx(L,{htmlFor:"status-description",children:"Work Progress Description"}),e.jsx(Me,{id:"status-description",placeholder:"Describe how much work has been done, any issues, or progress details...",value:x,onChange:g=>k(g.target.value),rows:3,className:"mt-2"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(R,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(R,{onClick:S,children:"Update Status"})]})]})]})})]})})},hm=()=>{const[t,s]=c.useState(""),[a,r]=c.useState(null),[n,i]=c.useState(!1),[o,l]=c.useState(!1),[d,p]=c.useState(""),[m,u]=c.useState(""),[h,j]=c.useState(""),[f,v]=c.useState(""),{socket:x}=xt(),[k,M]=c.useState([]);c.useEffect(()=>{const P=localStorage.getItem("token");P&&fetch("https://cosmicproject-backend-1.onrender.com/api/manager/technicians",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`}}).then(B=>B.json()).then(B=>{B.status==="success"&&M(B.data)}).catch(console.error)},[]),c.useEffect(()=>{if(x)return x.on("task_assigned",P=>{V.success(`Task "${P.task.title}" assigned to technician.`)}),x.on("task_status_updated",P=>{V(`Task "${P.task.title}" status updated to "${P.task.status}".`)}),x.on("report_submitted",P=>{V.success(`Report submitted for task "${P.report.task}".`)}),()=>{x.off("task_assigned"),x.off("task_status_updated"),x.off("report_submitted")}},[x]);const N={totalTechnicians:k.length,availableTechnicians:k.filter(P=>P.status==="Available").length,avgCompletionTime:k.reduce((P,B)=>P+B.avgCompletionTime,0)/k.length||0,avgRating:k.reduce((P,B)=>P+parseFloat(B.rating),0)/k.length||0,totalTasksCompleted:k.reduce((P,B)=>P+B.completedTasks,0),totalActiveTasks:k.reduce((P,B)=>P+B.activeTasks,0)};k.filter(P=>P.name.toLowerCase().includes(t.toLowerCase())||P.email.toLowerCase().includes(t.toLowerCase())||P.department.toLowerCase().includes(t.toLowerCase()));const T=P=>{r(P),l(!0)},O=()=>{if(!d){alert("Please fill in the task title");return}Date.now().toString(),a.id,new Date().toISOString(),alert(`✅ Task "${d}" has been successfully assigned to ${a?.name}

The technician will be notified and can now view this task in their dashboard.`),p(""),u(""),j(""),v(""),l(!1)},I=()=>{new Date().toISOString(),k.map(P=>({name:P.name,email:P.email,status:P.status,totalTasks:P.totalTasks,completedTasks:P.completedTasks,activeTasks:P.activeTasks,avgCompletionTime:P.avgCompletionTime,rating:P.rating})),alert(`📊 Team Report Generated!

Total Technicians: ${N.totalTechnicians}
Available: ${N.availableTechnicians}
Avg. Completion Time: ${N.avgCompletionTime.toFixed(1)} hours
Team Rating: ${N.avgRating.toFixed(1)}/5.0

Report would be downloaded as CSV/PDF in a real implementation.`)};return e.jsx(Ie,{userRole:"manager",userName:"Project Manager",userEmail:"manager@cosmicsolutions.com",children:e.jsxs("div",{className:"p-4 lg:p-6 space-y-4 lg:space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-foreground",children:"Team Technicians"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm lg:text-base",children:"Manage and monitor your technician team performance."})]}),e.jsxs(R,{variant:"outline",onClick:I,className:"w-full sm:w-auto",children:[e.jsx(gs,{className:"mr-2 h-4 w-4"}),"Export Team Report"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(Z,{children:[e.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ae,{className:"text-sm font-medium",children:"Total Technicians"}),e.jsx(Ge,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ee,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N.totalTechnicians}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[N.availableTechnicians," available"]})]})]}),e.jsxs(Z,{children:[e.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ae,{className:"text-sm font-medium",children:"Avg. Completion Time"}),e.jsx(bt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ee,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[N.avgCompletionTime.toFixed(1),"h"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Per task completion"})]})]}),e.jsxs(Z,{children:[e.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ae,{className:"text-sm font-medium",children:"Team Rating"}),e.jsx(xd,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ee,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[N.avgRating.toFixed(1),"/5.0"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average performance"})]})]}),e.jsxs(Z,{children:[e.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ae,{className:"text-sm font-medium",children:"Active Tasks"}),e.jsx(nd,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ee,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N.totalActiveTasks}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[N.totalTasksCompleted," completed"]})]})]})]}),e.jsx(xe,{open:n,onOpenChange:i,children:e.jsxs(de,{className:"sm:max-w-[700px]",children:[e.jsxs(ue,{children:[e.jsx(me,{children:"Technician Profile"}),e.jsx(he,{children:"Detailed information and performance summary"})]}),a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(ea,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(J,{variant:"outline",className:`${a.statusColor} text-white border-0`,children:a.status}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"•"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:a.department})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:a.totalTasks}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Tasks"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.completedTasks}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Completed"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:a.activeTasks}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Active"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:a.rating}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Rating"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Task Completion Rate"}),e.jsxs("span",{className:"font-medium",children:[a.totalTasks>0?(a.completedTasks/a.totalTasks*100).toFixed(1):0,"%"]})]}),e.jsx(et,{value:a.totalTasks>0?a.completedTasks/a.totalTasks*100:0,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Skills & Expertise"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.skills.length>0?a.skills.map(P=>e.jsx(J,{variant:"secondary",children:P},P)):e.jsx("span",{className:"text-sm text-muted-foreground",children:"No skills data available"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Join Date:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(a.joinDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Active:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(a.lastActive).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Avg. Completion Time:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[a.avgCompletionTime," hours"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Department:"}),e.jsx("span",{className:"ml-2 font-medium",children:a.department})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Recent Tasks"}),e.jsx("div",{className:"space-y-2",children:a.recentTasks.length>0?a.recentTasks.map(P=>e.jsx("div",{className:"p-3 border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:P.title}),e.jsx("div",{className:"text-sm text-muted-foreground",children:P.project})]}),e.jsx(J,{variant:P.status==="Completed"?"default":"secondary",children:P.status})]})},P.id)):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No recent tasks available"})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(R,{variant:"outline",onClick:()=>i(!1),children:"Close"}),e.jsx(R,{onClick:()=>{i(!1),T(a)},children:"Assign Task"})]})]})}),e.jsx(xe,{open:o,onOpenChange:l,children:e.jsxs(de,{className:"sm:max-w-[600px]",children:[e.jsxs(ue,{children:[e.jsxs(me,{children:["Assign Task to ",a?.name]}),e.jsx(he,{children:"Create and assign a new task to this technician."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"task-title",children:"Task Title *"}),e.jsx(X,{id:"task-title",placeholder:"Enter task title",value:d,onChange:P=>p(P.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"task-description",children:"Description"}),e.jsx(Me,{id:"task-description",placeholder:"Enter task description and requirements",value:m,onChange:P=>u(P.target.value),rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"priority",children:"Priority"}),e.jsxs(Pe,{value:h,onValueChange:j,children:[e.jsx(Ne,{children:e.jsx(Te,{placeholder:"Select priority"})}),e.jsxs(we,{children:[e.jsx(z,{value:"low",children:"Low"}),e.jsx(z,{value:"medium",children:"Medium"}),e.jsx(z,{value:"high",children:"High"}),e.jsx(z,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"deadline",children:"Deadline"}),e.jsx(X,{id:"deadline",type:"date",value:f,onChange:P=>v(P.target.value)})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end",children:[e.jsx(R,{variant:"outline",onClick:()=>l(!1),className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(R,{onClick:O,className:"w-full sm:w-auto",children:"Assign Task"})]})]})})]})})},_e=({children:t,allowedRoles:s=[],requireAuth:a=!0})=>{const{user:r,isAuthenticated:n,isLoading:i}=Ys(),o=Ct();if(i)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});if(a&&!n)return e.jsx(Os,{to:"/login",state:{from:o},replace:!0});if(s.length>0&&r){const l=m=>m==="super-admin"?"superadmin":m,d=l(r.role);if(!s.map(l).includes(d)){const u={superadmin:"/superadmin","super-admin":"/superadmin",manager:"/manager",technician:"/technician"}[r.role]||"/login";return e.jsx(Os,{to:u,replace:!0})}}return e.jsx(e.Fragment,{children:t})},pm=()=>{const t=()=>{V.success("Success notification!"),V.error("Error notification!"),V("Default notification!"),V.loading("Loading notification...")};return e.jsxs("div",{className:"p-8 space-y-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Toast Notification Test"}),e.jsx("p",{className:"text-muted-foreground",children:"Click the button below to test different types of toast notifications."}),e.jsx(R,{onClick:t,children:"Test All Toast Types"})]})},xm=new cl,fm=()=>e.jsx(ul,{client:xm,children:e.jsx(Vi,{children:e.jsx(ic,{children:e.jsx(Xc,{children:e.jsxs($o,{children:[e.jsx(Kc,{position:"top-right"}),e.jsx(rc,{children:e.jsxs(tc,{children:[e.jsx(Se,{path:"/",element:e.jsx(Os,{to:"/login",replace:!0})}),e.jsx(Se,{path:"/login",element:e.jsx(vd,{})}),e.jsx(Se,{path:"/test-toast",element:e.jsx(pm,{})}),e.jsx(Se,{path:"/superadmin",element:e.jsx(_e,{allowedRoles:["superadmin","super-admin"],children:e.jsx(Hu,{})})}),e.jsx(Se,{path:"/superadmin/projects",element:e.jsx(_e,{allowedRoles:["superadmin","super-admin"],children:e.jsx(Ju,{})})}),e.jsx(Se,{path:"/superadmin/reports",element:e.jsx(_e,{allowedRoles:["superadmin","super-admin"],children:e.jsx(Zu,{})})}),e.jsx(Se,{path:"/superadmin/settings",element:e.jsx(_e,{allowedRoles:["superadmin","super-admin"],children:e.jsx(Xu,{})})}),e.jsx(Se,{path:"/manager",element:e.jsx(_e,{allowedRoles:["manager"],children:e.jsx(em,{})})}),e.jsx(Se,{path:"/manager/projects",element:e.jsx(_e,{allowedRoles:["manager"],children:e.jsx(cm,{})})}),e.jsx(Se,{path:"/manager/technicians",element:e.jsx(_e,{allowedRoles:["manager"],children:e.jsx(hm,{})})}),e.jsx(Se,{path:"/manager/tasks",element:e.jsx(_e,{allowedRoles:["manager"],children:e.jsx(dm,{})})}),e.jsx(Se,{path:"/technician",element:e.jsx(_e,{allowedRoles:["technician"],children:e.jsx(om,{})})}),e.jsx(Se,{path:"/technician/tasks",element:e.jsx(_e,{allowedRoles:["technician"],children:e.jsx(mm,{})})}),e.jsx(Se,{path:"/technician/reports",element:e.jsx(_e,{allowedRoles:["technician"],children:e.jsx(um,{})})}),e.jsx(Se,{path:"*",element:e.jsx(lm,{})})]})})]})})})})});_i.createRoot(document.getElementById("root")).render(e.jsx(fm,{}));
